<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/ch17.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch17.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/ch17.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch17.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><!--<![endif]--><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="author" content="Safari Books Online" /><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491920565"/><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"/><meta property="twitter:account_id" content="4503599627559754" /><link rel="apple-touch-icon" href="/static/images/apple-touch-icon.0c29511d2d72.png"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'><title>17. Visualizing Individual Prizes - Data Visualization with Python and JavaScript</title><link rel="stylesheet" href="/static/CACHE/css/a04cd81b09cd.css" type="text/css" /><link rel="stylesheet" type="text/css" href="/static/css/annotator.ef38b0457d7b.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td,#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content canvas,#sbo-rt-content details,#sbo-rt-content embed,#sbo-rt-content figure,#sbo-rt-content figcaption,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content output,#sbo-rt-content ruby,#sbo-rt-content section,#sbo-rt-content summary,#sbo-rt-content time,#sbo-rt-content mark,#sbo-rt-content audio,#sbo-rt-content video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content details,#sbo-rt-content figcaption,#sbo-rt-content figure,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content section{display:block}#sbo-rt-content div{line-height:1}#sbo-rt-content ol,#sbo-rt-content ul{list-style:none}#sbo-rt-content blockquote,#sbo-rt-content q{quotes:none}#sbo-rt-content blockquote:before,#sbo-rt-content blockquote:after,#sbo-rt-content q:before,#sbo-rt-content q:after{content:none}#sbo-rt-content table{border-collapse:collapse;border-spacing:0}@page{margin:5px !important}#sbo-rt-content p{margin:10px 0 0;line-height:125%;text-align:left}#sbo-rt-content p.byline{text-align:left;margin:-33px auto 35px;font-style:italic;font-weight:bold}#sbo-rt-content div.preface p+p.byline{margin:1em 0 0}#sbo-rt-content div.preface p.byline+p.byline{margin:0}#sbo-rt-content div.sect1>p.byline{margin:-.25em 0 1em}#sbo-rt-content div.sect1>p.byline+p.byline{margin-top:-1em}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content span.lineannotation{font-style:italic;color:#a62a2a;font-family:serif}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#fff}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content span.label,#sbo-rt-content span.keep-together{font-size:inherit;font-weight:inherit}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center !important;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;border:1px solid #DCDCDC;background-color:#F7F7F7;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content div.sidebar ul,#sbo-rt-content aside[data-type="sidebar"] ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:1.25em !important}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div[data-type="tip"],#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div[data-type="note"],#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div[data-type="warning"],#sbo-rt-content div.sidebar div[data-type="caution"],#sbo-rt-content div.sidebar div[data-type="important"]{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content aside[data-type="sidebar"] p.byline{font-size:90%;font-weight:bold;font-style:italic;text-align:center;text-indent:0;margin:5px auto 6px;page-break-after:avoid}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;text-align:left !important;text-transform:none !important;font-family:serif !important;margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:2em;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"] h2,#sbo-rt-content section[data-type="titlepage"] p.subtitle,#sbo-rt-content section[data-type="titlepage"] p[data-type="subtitle"]{font-size:1.3em;font-weight:normal;text-align:center;margin-top:.5em;color:#555}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"],#sbo-rt-content section[data-type="titlepage"] p.author{font-size:1.3em;font-family:serif !important;font-weight:bold;margin:50px 0 !important;text-align:center}#sbo-rt-content section[data-type="titlepage"] p.edition{text-align:center;text-transform:uppercase;margin-top:2em}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content ul.stafflist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.stafflist li{list-style-type:none;padding:5px 0}#sbo-rt-content ul.printings li{list-style-type:none}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif !important;font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif !important;margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10px}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif !important}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-style:italic;margin:.75em 0 0 !important}#sbo-rt-content blockquote div.attribution,#sbo-rt-content blockquote p[data-type="attribution"]{margin:5px 0 10px 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p,#sbo-rt-content blockquote p[data-type="attribution"]{font-style:normal;margin-top:5px}#sbo-rt-content blockquote div.attribution p:before,#sbo-rt-content blockquote p[data-type="attribution"]:before{font-style:normal;content:"—";-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div[data-type="footnotes"]{border-top:1px solid black;margin-top:1.5em}#sbo-rt-content sub,#sbo-rt-content sup{font-size:75%;line-height:0;position:relative}#sbo-rt-content sup{top:-.5em}#sbo-rt-content sub{bottom:-.25em}#sbo-rt-content div.refentry p.refname{font-size:1em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin-bottom:5px;overflow:auto;width:100%}#sbo-rt-content div.refentry{width:100%;display:block;margin-top:2em}#sbo-rt-content div.refsynopsisdiv{display:block;clear:both}#sbo-rt-content div.refentry header{page-break-inside:avoid !important;display:block;break-inside:avoid !important;padding-top:0;border-bottom:1px solid #000}#sbo-rt-content div.refsect1 h6{font-size:.9em;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content div.refsect1{margin-top:3em}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dd{margin-left:1.5em !important;margin-bottom:.25em}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ul{list-style-type:disc}#sbo-rt-content ul ul{list-style-type:square}#sbo-rt-content ul ul ul{list-style-type:circle}#sbo-rt-content ol{list-style-type:decimal}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ol ul{list-style-type:disc}#sbo-rt-content ol ul ol{list-style-type:decimal}#sbo-rt-content ul ol{list-style-type:decimal}#sbo-rt-content ul ol ul{list-style-type:disc}#sbo-rt-content ol,#sbo-rt-content ul{list-style-position:outside;margin:15px 0 15px 1.25em}#sbo-rt-content ol li,#sbo-rt-content ul li{margin:.5em 0 .65em;line-height:125%}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist,#sbo-rt-content ul.simplelist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.simplelist li{list-style-type:none;padding:5px 0}#sbo-rt-content table.simplelist td{border:none}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img,#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip ol,#sbo-rt-content div.tip ul,#sbo-rt-content div[data-type="tip"] ol,#sbo-rt-content div[data-type="tip"] ul,#sbo-rt-content div.note ol,#sbo-rt-content div.note ul,#sbo-rt-content div[data-type="note"] ol,#sbo-rt-content div[data-type="note"] ul,#sbo-rt-content div.warning ol,#sbo-rt-content div.warning ul,#sbo-rt-content div[data-type="warning"] ol,#sbo-rt-content div[data-type="warning"] ul,#sbo-rt-content div[data-type="caution"] ol,#sbo-rt-content div[data-type="caution"] ul,#sbo-rt-content div[data-type="important"] ol,#sbo-rt-content div[data-type="important"] ul{margin-left:1.5em !important}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1,#sbo-rt-content div[data-type="important"] h6{font-weight:bold;font-size:110%;font-family:sans-serif !important;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div[data-type="note"] h1{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3,#sbo-rt-content div.safarienabled h6{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px 0 30px 0 !important;max-width:95%;border:none !important;background:none;display:table !important}#sbo-rt-content div.table,#sbo-rt-content div.informaltable,#sbo-rt-content table{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{display:table-cell;padding:.3em;text-align:left;vertical-align:middle;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif;font-size:1em;margin:10px 0 10px 0 !important;padding:0;page-break-after:avoid;text-align:left !important}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation,#sbo-rt-content div[data-type="equation"]{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title,#sbo-rt-content div[data-type="equation"] h5{font-style:italic;font-weight:normal;font-family:serif !important;font-size:90%;margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul,#sbo-rt-content div[data-type="index"] ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:1em}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif;text-align:left}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content span.gray{color:#4C4C4C}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781491920565/chapter/ch17.html",
          "book_id": "9781491920565",
          "chapter_uri": "ch17.html",
          "position": 0,
          "user_uuid": "fee1bd59-4e02-48a4-a7b4-152ec4c157ac",
          "next_chapter_uri": "/library/view/data-visualization-with/9781491920565/ch18.html"
        
      },
      title: "Data Visualization with Python and JavaScript",
      author_list: "Kyran Dale",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false,
      show_ios_app_teaser: false
    };
    // ]]></script><script src="/static/js/src/modernizr.js"></script><script>
    
      
       window.PUBLIC_ANNOTATIONS = false;
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

    
      window.PRIVACY_CONTROL_SWITCH = true;
    

    
      window.PUBLISHER_PAGES = true;
    

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "https://www.safaribooksonline.com/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://www.safaribooksonline.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch17.html"/><meta name="description" content=" Chapter 17. Visualizing Individual Prizes In Chapter 16 you learned the basics of D3, how to select and change DOM elements, how to add new ones, and how to apply ... "><meta property="og:title" content="17. Visualizing Individual Prizes" /><meta itemprop="isPartOf" content="/library/view/data-visualization-with/9781491920565/" /><meta itemprop="name" content="17. Visualizing Individual Prizes" /><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch17.html" /><meta property="og:site_name" content="Safari" /><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491920565/" /><meta property="og:description" itemprop="description" content=" Chapter 17. Visualizing Individual Prizes In Chapter 16 you learned the basics of D3, how to select and change DOM elements, how to add new ones, and how to apply ... "><meta itemprop="inLanguage" content="en" /><meta itemprop="publisher" content="O&#39;Reilly Media, Inc." /><meta property="og:type" content="book" /><meta property="og:book:isbn" itemprop="isbn" content="9781491920510" /><meta property="og:book:author" itemprop="author" content="Kyran Dale" /><meta property="og:book:tag" itemprop="about" content="JavaScript" /><meta property="og:book:tag" itemprop="about" content="Python" /><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><script>
    window.ENABLE_BOWERBIRD_COLLECTIONS = true;
  </script><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script type="text/javascript">
    (function(i,s,o,g,r,a,m) {
      i['GoogleAnalyticsObject']=r;
      i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
      a=s.createElement(o),m=s.getElementsByTagName(o)[0];
      a.async=1;
      a.src=g;
      m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    var matches = document.cookie.match(/BrowserCookie\s*=\s*([a-f0-9\-]{36})/),
      user_uuid = null;

    if (matches && matches.length === 2) {
      user_uuid = matches[1];
    }

  
    ga('create', 'UA-39299553-7', {'userId': 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac' });
  

  
    
      ga('set', 'dimension1', 'Trial');
    
  

  ga('set', 'dimension6', user_uuid);

  
    ga('set', 'dimension2', 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac');
    
  

  

  

  //enable enhanced link tracking
  ga('require', 'linkid', 'linkid.js');

  // reading interface will track pageviews itself
  if (document.location.pathname.indexOf("/library/view") !== 0) {
    ga('send', 'pageview');
  }
  </script><script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
  </script><script defer src="/static/js/build/vendor.e2e622a103f9.js"></script><script defer src="/static/js/build/reader.84feb506aa44.js"></script></head>


<body class="reading sidenav nav-collapsed  scalefonts">

    
  
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        





<a href="#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"/><rect x="10" y="12" width="3" height="7"/><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"/><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"/></g></svg><span>Safari Home</span></a></li><li><a href="/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z"/></g></svg><span>Recommended</span></a></li><li><a href="/playlists/" class="t-queue-nav l0 nav-icn None"><?xml version="1.0" encoding="UTF-8"?><svg width="21px" height="17px" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --><title>icon_Playlist_sml</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon_Playlist_sml" fill-rule="nonzero" fill="#000000"><g id="playlist-icon"><g id="Group-6"><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle></g><g id="Group-5" transform="translate(0.000000, 7.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g><g id="Group-5-Copy" transform="translate(0.000000, 14.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g></g></g></g></svg><span>
                 Playlists
              </span></a></li><li class="search"><a href="#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"/></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"/></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z"/></g></svg><span>History</span></a></li><li><a href="/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" width="20" height="20" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z"/></g></svg><span>Topics</span></a></li><li><a href="/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z"/></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>offers icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M35.9 20.6L27 15.5C26.1 15 24.7 15 23.7 15.5L14.9 20.6C13.9 21.1 13.2 22.4 13.2 23.4L13.2 41.4C13.2 42.4 13.9 43.7 14.9 44.2L23.3 49C24.2 49.5 25.6 49.5 26.6 49L35.9 43.6C36.8 43.1 37.6 41.8 37.6 40.8L37.6 23.4C37.6 22.4 36.8 21.1 35.9 20.6L35.9 20.6ZM40 8.2C39.1 7.6 37.6 7.6 36.7 8.2L30.2 11.9C29.3 12.4 29.3 13.2 30.2 13.8L39.1 18.8C40 19.4 40.7 20.6 40.7 21.7L40.7 39C40.7 40.1 41.4 40.5 42.4 40L48.2 36.6C49.1 36.1 49.8 34.9 49.8 33.8L49.8 15.6C49.8 14.6 49.1 13.3 48.2 12.8L40 8.2 40 8.2ZM27 10.1L33.6 6.4C34.5 5.9 34.5 5 33.6 4.5L26.6 0.5C25.6 0 24.2 0 23.3 0.5L16.7 4.2C15.8 4.7 15.8 5.6 16.7 6.1L23.7 10.1C24.7 10.6 26.1 10.6 27 10.1ZM10.1 21.7C10.1 20.6 10.8 19.4 11.7 18.8L20.6 13.8C21.5 13.2 21.5 12.4 20.6 11.9L13.6 7.9C12.7 7.4 11.2 7.4 10.3 7.9L1.6 12.8C0.7 13.3 0 14.6 0 15.6L0 33.8C0 34.9 0.7 36.1 1.6 36.6L8.4 40.5C9.3 41 10.1 40.6 10.1 39.6L10.1 21.7 10.1 21.7Z"/></g></svg><span>Offers & Deals</span></a><ul class="flyout"><li><a href="https://get.oreilly.com/email-signup.html" target="_blank" class="l2 nav-icn"><span>Newsletters</span></a></li></ul></li><li class="nav-highlights"><a href="/u/fee1bd59-4e02-48a4-a7b4-152ec4c157ac/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" width="20" height="20" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z"/></g></svg><span>Highlights</span></a></li><li><a href="/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a></li><li><a href="https://www.safaribooksonline.com/public/support" class="l1 no-icon">Support</a></li><li><a href="/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a><span class="l2 t-nag-notification"  id="nav-nag" ><strong class="trial-green">7</strong> days left in your trial.
  
  

  
    
      

<a class="" href="/subscribe/">Subscribe</a>.


    
  

  

</span></li><li><a href="https://www.safaribooksonline.com/public/support" class="l2">Support</a></li><li><a href="/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Data Visualization with Python and JavaScript
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781491920565/chapter/ch17.html"><div class="js-collections-dropdown collections-dropdown menu-bit-cards"></div></div></li><li class="js-font-control-panel font-control-activator"><a href="#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a
        class="twitter share-button t-twitter"
        target="_blank"
        aria-label="Share this section on Twitter"
        title="Share this section on Twitter"
      
        href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch17.html&text=Data%20Visualization%20with%20Python%20and%20JavaScript&via=safari"
      ><span>Twitter</span></a></li><li><a
        class="facebook share-button t-facebook"
        target="_blank"
        aria-label="Share this section on Facebook"
        title="Share this section on Facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch17.html"
      ><span>Facebook</span></a></li><li><a
        class="googleplus share-button t-googleplus"
        target="_blank"
        aria-label="Share this secton on Google Plus"
        title="Share this secton on Google Plus"
        href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch17.html"
      ><span>Google Plus</span></a></li><li><a
        class="email share-button t-email"
        aria-label="Share this section via email"
        title="Share this section via email"
      
        href="mailto:?subject=Safari: 17.%20Visualizing%20Individual%20Prizes&body=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch17.html%0D%0Afrom Data%20Visualization%20with%20Python%20and%20JavaScript%0D%0A"
      ><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
        
        



 <!--[if lt IE 9]>
  
<![endif]-->



  <script defer src="/static/js/build/djangoMessagesPage.893631b34e7a.js"></script>


        
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch16.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">16. Introducing D3—The Story of a Bar Chart</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch18.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">18. Mapping with D3</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 17. Visualizing Individual Prizes"><div class="chapter" id="chapter_d3_nobels">
<h1><span class="label">Chapter 17. </span>Visualizing Individual Prizes</h1>


<p><a data-type="indexterm" data-primary="D3 library" data-secondary="timeline charts" data-tertiary="framework for" id="idm140319394711616"></a><a data-type="indexterm" data-primary="timeline charts" data-secondary="framework for" id="idm140319394710528"></a>In <a data-type="xref" href="ch16.html#chapter_d3_intro">Chapter 16</a> you learned the basics of D3, how to select and change DOM elements, how to add new ones, and how to apply the data update pattern, which is the axis around which interactive D3 spins. In this chapter, I will expand on what you’ve learned so far and show you how to build a fairly novel visual element, showing all the individual Nobel Prizes by year (<a data-type="xref" href="#d3nobels_target">Figure 17-1</a>). This Nobel timeline will allow us to expand on the knowledge of the last chapter, demonstrating a number of new techniques including more advanced data manipulation.</p>

<figure><div id="d3nobels_target" class="figure">
<img src="dvpj_1402.png" alt="dvpj 1402" width="972" height="160">
<h6><span class="label">Figure 17-1. </span>This chapter’s target chart, a timeline of Nobel Prizes</h6>
</div></figure>

<p>Let’s start by showing how we build the HTML framework for our timeline chart.</p>






<section data-type="sect1" data-pdf-bookmark="Building the Framework"><div class="sect1" id="idm140319394705264">
<h1>Building the Framework</h1>

<p>Our target chart’s construction is similar to that of our Nobel Prize bar chart, which we covered in detail in the last chapter. We first use D3 to select our <code>&lt;div&gt;</code> container with id <code>nobel-time</code>, then use the width and height of the container, along with our specified margins, to create our <code>svg</code> chart group:</p>

<pre data-type="programlisting" data-code-language="js"><code class="cm">/* global $, _, crossfilter, d3  */</code>
<code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">nbviz</code><code class="p">)</code> <code class="p">{</code>
    <code class="s1">'use strict'</code><code class="p">;</code>

    <code class="kd">var</code> <code class="nx">chartHolder</code> <code class="o">=</code> <code class="nx">d3</code><code class="p">.</code><code class="nx">select</code><code class="p">(</code><code class="s1">'#nobel-time'</code><code class="p">);</code>

    <code class="kd">var</code> <code class="nx">margin</code> <code class="o">=</code> <code class="p">{</code><code class="nx">top</code><code class="o">:</code><code class="mi">20</code><code class="p">,</code> <code class="nx">right</code><code class="o">:</code><code class="mi">20</code><code class="p">,</code> <code class="nx">bottom</code><code class="o">:</code><code class="mi">30</code><code class="p">,</code> <code class="nx">left</code><code class="o">:</code><code class="mi">40</code><code class="p">};</code>
    <code class="kd">var</code> <code class="nx">boundingRect</code> <code class="o">=</code> <code class="nx">chartHolder</code><code class="p">.</code><code class="nx">node</code><code class="p">()</code>
      <code class="p">.</code><code class="nx">getBoundingClientRect</code><code class="p">();</code>
    <code class="kd">var</code> <code class="nx">width</code> <code class="o">=</code> <code class="nx">boundingRect</code><code class="p">.</code><code class="nx">width</code> <code class="o">-</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">left</code>
    <code class="o">-</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">right</code><code class="p">,</code>
    <code class="nx">height</code> <code class="o">=</code> <code class="nx">boundingRect</code><code class="p">.</code><code class="nx">height</code> <code class="o">-</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">top</code> <code class="o">-</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">bottom</code><code class="p">;</code>

    <code class="kd">var</code> <code class="nx">svg</code> <code class="o">=</code> <code class="nx">chartHolder</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s2">"svg"</code><code class="p">)</code>
            <code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"width"</code><code class="p">,</code> <code class="nx">width</code> <code class="o">+</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">left</code> <code class="o">+</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">right</code><code class="p">)</code>
            <code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"height"</code><code class="p">,</code> <code class="nx">height</code> <code class="o">+</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">top</code>
            <code class="o">+</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">bottom</code><code class="p">)</code>
            <code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'g'</code><code class="p">)</code>
            <code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"transform"</code><code class="p">,</code>
                      <code class="s2">"translate("</code> <code class="o">+</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">left</code> <code class="o">+</code> <code class="s2">","</code>
                      <code class="o">+</code> <code class="nx">margin</code><code class="p">.</code><code class="nx">top</code> <code class="o">+</code> <code class="s2">")"</code><code class="p">);</code>
    <code class="c1">// ...</code></pre>

<p>With our <code>svg</code> chart group in place, let’s add the scales and axes.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Scales"><div class="sect1" id="idm140319394700000">
<h1>Scales</h1>

<p><a data-type="indexterm" data-primary="timeline charts" data-secondary="ordinal scales" id="idm140319394698480"></a><a data-type="indexterm" data-primary="D3 library" data-secondary="timeline charts" data-tertiary="ordinal scales" id="idm140319394597248"></a><a data-type="indexterm" data-primary="ordinal scales (D3 library)" id="idm140319394596032"></a><a data-type="indexterm" data-primary="scales (D3 library)" data-secondary="ordinal scales" id="idm140319394595392"></a>To place the circular indicators we use two ordinal scales (<a data-type="xref" href="#d3time_scales">Example 17-1</a>). The x-scale uses the <code>rangeRoundBands</code> method to specify a 10% padding between the circles. Because we use the x-scale to set the circles’ diameters, the height of our y-scale’s range is manually adjusted to accommodate all the indicators, allowing a little padding between them. We use <code>rangeRoundPoints</code> to round to integer pixel coordinates.</p>
<div id="d3time_scales" data-type="example">
<h5><span class="label">Example 17-1. </span>The chart’s two ordinal scales, for x and y axes</h5>

<pre data-type="programlisting" data-code-language="js"><code class="kd">var</code><code> </code><code class="nx">xScale</code><code> </code><code class="o">=</code><code> </code><code class="nx">d3</code><code class="p">.</code><code class="nx">scale</code><code class="p">.</code><code class="nx">ordinal</code><code class="p">(</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">rangeRoundBands</code><code class="p">(</code><code class="p">[</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="nx">width</code><code class="p">]</code><code class="p">,</code><code> </code><code class="mf">0.1</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO1-1" href="#callout_visualizing_individual_prizes_CO1-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
        </code><code class="p">.</code><code class="nx">domain</code><code class="p">(</code><code class="nx">d3</code><code class="p">.</code><code class="nx">range</code><code class="p">(</code><code class="mi">1900</code><code class="p">,</code><code> </code><code class="mi">2015</code><code class="p">)</code><code class="p">;</code><code> </code><code class="c1">// years of Nobel Prize
</code><code>
</code><code class="kd">var</code><code> </code><code class="nx">yScale</code><code> </code><code class="o">=</code><code> </code><code class="nx">d3</code><code class="p">.</code><code class="nx">scale</code><code class="p">.</code><code class="nx">ordinal</code><code class="p">(</code><code class="p">)</code><code>
            </code><code class="p">.</code><code class="nx">rangeRoundPoints</code><code class="p">(</code><code class="p">[</code><code class="nx">height</code><code class="p">,</code><code> </code><code class="mi">0</code><code class="p">]</code><code class="p">)</code><code>
            </code><code class="p">.</code><code class="nx">domain</code><code class="p">(</code><code class="nx">d3</code><code class="p">.</code><code class="nx">range</code><code class="p">(</code><code class="mi">15</code><code class="p">)</code><code class="p">)</code><code class="p">;</code><code class="c1">// from 0 to max. in any one year</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO1-1" href="#co_visualizing_individual_prizes_CO1-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>We’re using a padding factor of 0.1, which is approximately 10% of an indicator’s diameter.</p></dd>
</dl></div>

<p>Unlike our bar chart from the last chapter, both ranges and domains of this chart are fixed. The domain of the <code>xScale</code> is the years over which the Nobel Prize has run, and that of the <code>yScale</code> is from zero to the maximum number of prizes in any given year (14 in the year 2000). Neither of these will change in response to user interaction, so we define them outside the <code>update</code> method.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Axes"><div class="sect1" id="idm140319394544928">
<h1>Axes</h1>

<p><a data-type="indexterm" data-primary="D3 library" data-secondary="timeline charts" data-tertiary="axes" id="idm140319394547024"></a><a data-type="indexterm" data-primary="timeline charts" data-secondary="axes" id="idm140319394538880"></a><a data-type="indexterm" data-primary="axes (D3 library)" id="idm140319394550160"></a>With a maximum of 14 prizes in any one year and with a circular indicator for each, it is easy to make a prize count by eye if necessary. Given this, the emphasis on providing a relative indicator of prize distribution (e.g., showing the spurt in post-WWII US science prizes), and the long length of the chart, a y-axis is redundant for our chart.</p>

<p>For the x-axis, labeling the decades’ starts seems about right. It reduces visual clutter and is also the standard human way of charting historical trends. <a data-type="xref" href="#d3time_axis_code">Example 17-2</a> shows the construction of our x-axis, using D3’s handy <code>axis</code> object. We override the tick values using the <code>tickValues</code> method, filtering the domain range (1900–2015) to return only those dates ending with zero.</p>
<div id="d3time_axis_code" data-type="example">
<h5><span class="label">Example 17-2. </span>Making the x-axis, with tick labels per decade</h5>

<pre data-type="programlisting" data-code-language="js"><code class="kd">var</code><code> </code><code class="nx">xAxis</code><code> </code><code class="o">=</code><code> </code><code class="nx">d3</code><code class="p">.</code><code class="nx">svg</code><code class="p">.</code><code class="nx">axis</code><code class="p">(</code><code class="p">)</code><code>
              </code><code class="p">.</code><code class="nx">scale</code><code class="p">(</code><code class="nx">xScale</code><code class="p">)</code><code>
              </code><code class="p">.</code><code class="nx">orient</code><code class="p">(</code><code class="s2">"bottom"</code><code class="p">)</code><code class="p">;</code><code>
              </code><code class="p">.</code><code class="nx">tickValues</code><code class="p">(</code><code class="nx">xScale</code><code class="p">.</code><code class="nx">domain</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">filter</code><code class="p">(</code><code>
                </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">,</code><code class="nx">i</code><code class="p">)</code><code class="p">{</code><code>
                  </code><code class="k">return</code><code> </code><code class="o">!</code><code class="p">(</code><code class="nx">d</code><code class="o">%</code><code class="mi">10</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO2-1" href="#callout_visualizing_individual_prizes_CO2-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
                </code><code class="p">}</code><code class="p">)</code><code>
              </code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO2-1" href="#co_visualizing_individual_prizes_CO2-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Returns true for years ending in 0, giving a tick label at the start of every decade.</p></dd>
</dl></div>

<p>As with the scales, we don’t anticipate the axes changing,<sup><a data-type="noteref" id="idm140319394437664-marker" href="ch17.html#idm140319394437664">1</a></sup> so we can add them before receiving the dataset in the <code>updateTimeChart</code> <span class="keep-together">function</span>:</p>

<pre data-type="programlisting" data-code-language="js"><code class="nx">svg</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s2">"g"</code><code class="p">)</code><code> </code><code class="c1">// group to hold the axis
</code><code>    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"class"</code><code class="p">,</code><code> </code><code class="s2">"x axis"</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"transform"</code><code class="p">,</code><code> </code><code class="s2">"translate(0,"</code><code> </code><code class="o">+</code><code> </code><code class="nx">height</code><code> </code><code class="o">+</code><code> </code><code class="s2">")"</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">call</code><code class="p">(</code><code class="nx">xAxis</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO3-1" href="#callout_visualizing_individual_prizes_CO3-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
    </code><code class="p">.</code><code class="nx">selectAll</code><code class="p">(</code><code class="s2">"text"</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO3-2" href="#callout_visualizing_individual_prizes_CO3-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
    </code><code class="p">.</code><code class="nx">style</code><code class="p">(</code><code class="s2">"text-anchor"</code><code class="p">,</code><code> </code><code class="s2">"end"</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"dx"</code><code class="p">,</code><code> </code><code class="s2">"-.8em"</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"dy"</code><code class="p">,</code><code> </code><code class="s2">".15em"</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"transform"</code><code class="p">,</code><code> </code><code class="s2">"rotate(-65)"</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO3-1" href="#co_visualizing_individual_prizes_CO3-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Calls our D3 axis on the <code>svg</code> group, with the <code>axis</code> object taking care of building the axis elements.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO3-2" href="#co_visualizing_individual_prizes_CO3-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>As in <a data-type="xref" href="ch16.html#sect_axes_labels">“Axes and Labels”</a>, we rotate the axis tick labels to place them diagonally.</p></dd>
</dl>

<p>With axes and scales taken care of, we need only add a little legend with our colored category labels before moving on to the cool, interactive elements of the chart.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Category Labels"><div class="sect1" id="idm140319394229632">
<h1>Category Labels</h1>

<p><a data-type="indexterm" data-primary="D3 library" data-secondary="timeline charts" data-tertiary="labels" id="idm140319394228128"></a><a data-type="indexterm" data-primary="timeline charts" data-secondary="labels" id="idm140319394226880"></a><a data-type="indexterm" data-primary="legends" id="idm140319394225936"></a><a data-type="indexterm" data-primary="category labels" id="idm140319394187408"></a>The last of our <em>static</em> components is a legend, containing the category labels shown in <a data-type="xref" href="#d3nobels_legend">Figure 17-2</a>.</p>

<figure><div id="d3nobels_legend" class="figure">
<img src="dvpj_1702.png" alt="dvpj 1702" width="1166" height="230">
<h6><span class="label">Figure 17-2. </span>Categories legend</h6>
</div></figure>

<p>To create the legend, we first create a group, class <code>labels</code>, to hold the labels. We bind our <code>nbviz.CATEGORIES</code> data to a <code>label</code> selection on this <code>labels</code> group, enter the bound data, and attach a group for each category, displaced on the y-axis by index:</p>

<pre data-type="programlisting" data-code-language="js"><code class="kd">var</code><code> </code><code class="nx">catLabels</code><code> </code><code class="o">=</code><code> </code><code class="nx">chartHolder</code><code class="p">.</code><code class="nx">select</code><code class="p">(</code><code class="s1">'svg'</code><code class="p">)</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'g'</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'transform'</code><code class="p">,</code><code> </code><code class="s2">"translate(10, 10)"</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'class'</code><code class="p">,</code><code> </code><code class="s1">'labels'</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">selectAll</code><code class="p">(</code><code class="s1">'label'</code><code class="p">)</code><code class="p">.</code><code class="nx">data</code><code class="p">(</code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">CATEGORIES</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO4-1" href="#callout_visualizing_individual_prizes_CO4-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
        </code><code class="p">.</code><code class="nx">enter</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'g'</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'transform'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">,</code><code> </code><code class="nx">i</code><code class="p">)</code><code> </code><code class="p">{</code><code>
            </code><code class="k">return</code><code> </code><code class="s2">"translate(0,"</code><code> </code><code class="o">+</code><code> </code><code class="nx">i</code><code> </code><code class="o">*</code><code> </code><code class="mi">10</code><code> </code><code class="o">+</code><code> </code><code class="s2">")"</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO4-2" href="#callout_visualizing_individual_prizes_CO4-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
        </code><code class="p">}</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO4-1" href="#co_visualizing_individual_prizes_CO4-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Binds our array of categories (<code>["Chemistry", "Economics", …]</code>) to the <code>label</code> group.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO4-2" href="#co_visualizing_individual_prizes_CO4-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Creates a group for each category, spaced vertically 10 pixels apart.</p></dd>
</dl>

<p>Now that we have our <code>catLabels</code> selection, let’s add a circular indicator (matching those seen in the timeline) and text label to each of its groups:</p>

<pre data-type="programlisting" data-code-language="js"><code class="nx">catLabels</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'circle'</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'fill'</code><code class="p">,</code><code> </code><code class="p">(</code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">categoryFill</code><code class="p">)</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO5-1" href="#callout_visualizing_individual_prizes_CO5-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'r'</code><code class="p">,</code><code> </code><code class="nx">xScale</code><code class="p">.</code><code class="nx">rangeBand</code><code class="p">(</code><code class="p">)</code><code class="o">/</code><code class="mi">2</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO5-2" href="#callout_visualizing_individual_prizes_CO5-2"><img src="2.png" alt="2" width="12" height="12"></a><code>

</code><code class="nx">catLabels</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'text'</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">text</code><code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">)</code><code> </code><code class="p">{</code><code>
        </code><code class="k">return</code><code> </code><code class="nx">d</code><code class="p">;</code><code>
    </code><code class="p">}</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'dy'</code><code class="p">,</code><code> </code><code class="s1">'0.4em'</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'x'</code><code class="p">,</code><code> </code><code class="mi">10</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO5-1" href="#co_visualizing_individual_prizes_CO5-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>We use our shared <code>categoryFill</code> method to return a color based on the bound category.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO5-2" href="#co_visualizing_individual_prizes_CO5-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>We use the diameter produced by our <code>xScale</code> to make these circles the same size as those in the timeline.</p></dd>
</dl>

<p>The <code>categoryFill</code> function (<a data-type="xref" href="#d3time_colors">Example 17-3</a>) is defined in <em>nbviz_core.js</em> and is used by the app to provide colors for the categories. It uses D3’s <code>hcl</code> method to return equally spaced colors in the [0, 360] color hue range.<sup><a data-type="noteref" id="idm140319393983680-marker" href="ch17.html#idm140319393983680">2</a></sup> These are converted by D3 to CSS RGB.</p>
<div id="d3time_colors" data-type="example">
<h5><span class="label">Example 17-3. </span>Setting the category colors</h5>

<pre data-type="programlisting" data-code-language="js"><code class="nx">nbviz</code><code class="p">.</code><code class="nx">CATEGORIES</code> <code class="o">=</code> <code class="p">[</code>
    <code class="s2">"Physiology or Medicine"</code><code class="p">,</code> <code class="s2">"Peace"</code><code class="p">,</code> <code class="s2">"Physics"</code><code class="p">,</code>
    <code class="s2">"Literature"</code><code class="p">,</code> <code class="s2">"Chemistry"</code><code class="p">,</code> <code class="s2">"Economics"</code><code class="p">];</code>

<code class="nx">nbviz</code><code class="p">.</code><code class="nx">categoryFill</code> <code class="o">=</code> <code class="kd">function</code><code class="p">(</code><code class="nx">category</code><code class="p">){</code>
    <code class="kd">var</code> <code class="nx">i</code> <code class="o">=</code> <code class="nx">nbviz</code><code class="p">.</code><code class="nx">CATEGORIES</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="nx">category</code><code class="p">);</code>
    <code class="c1">// return equally-spaced color hues</code>
    <code class="k">return</code> <code class="nx">d3</code><code class="p">.</code><code class="nx">hcl</code><code class="p">(</code><code class="nx">i</code> <code class="o">/</code> <code class="nx">cats</code><code class="p">.</code><code class="nx">length</code> <code class="o">*</code> <code class="mi">360</code><code class="p">,</code> <code class="mi">60</code><code class="p">,</code> <code class="mi">70</code><code class="p">);</code>
<code class="p">};</code></pre></div>

<p>Now that we’ve covered all static elements to our time chart, let’s look at how we knock it into usable form with D3’s <code>nest</code> library.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Nesting the Data"><div class="sect1" id="idm140319394229040">
<h1>Nesting the Data</h1>

<p><a data-type="indexterm" data-primary="D3 library" data-secondary="timeline charts" data-tertiary="nesting data" id="idm140319393883584"></a><a data-type="indexterm" data-primary="timeline charts" data-secondary="nesting data" id="idm140319393882336"></a><a data-type="indexterm" data-primary="data nesting (D3 library)" id="idm140319393881392"></a>In order to create this timeline component, we need to reorganize our flat array of winners objects into a form that will allow us to bind it to the individual Nobel Prizes in our timeline. What we need, to make binding this data with D3 as smooth as possible, is an array of prize objects by year, with the year groups available as arrays. Let’s demonstrate the conversion process with our Nobel Prize dataset.</p>

<p>The following is the flat Nobel Prize dataset we begin with, ordered by year:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// var data =</code>
<code class="p">[</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Wilhelm Conrad R\\u00f6ntgen"</code><code class="p">,...},</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Jacobus Henricus van \'t Hoff"</code><code class="p">,...},</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Sully Prudhomme"</code><code class="p">,...},</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Fr\\u00e9d\\u00e9ric Passy"</code><code class="p">,...},</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Henry Dunant"</code><code class="p">,...},</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Emil Adolf von Behring"</code><code class="p">,...},</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1902</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Theodor Mommsen"</code><code class="p">,...},</code>
 <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1902</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Hermann Emil Fischer"</code><code class="p">,...},</code>
 <code class="p">...</code>
<code class="p">];</code></pre>

<p>We want to take this data and convert it to the following nested format, an array of objects with year keys and winners-by-year values:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// data =</code>
<code class="p">[</code>
 <code class="p">{</code><code class="s2">"key"</code><code class="o">:</code><code class="s2">"1901"</code><code class="p">,</code>
  <code class="s2">"values"</code><code class="o">:</code><code class="p">[</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Wilhelm Conrad R\\u00f6ntgen"</code><code class="p">,...},</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Jacobus Henricus van \'t Hoff"</code><code class="p">,...},</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Sully Prudhomme"</code><code class="p">,...},</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Fr\\u00e9d\\u00e9ric Passy"</code><code class="p">,...},</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Henry Dunant"</code><code class="p">,...},</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1901</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Emil Adolf von Behring"</code><code class="p">,...}</code>
  <code class="p">]</code>
 <code class="p">},</code>
 <code class="p">{</code><code class="s2">"key"</code><code class="o">:</code><code class="s2">"1902"</code><code class="p">,</code>
  <code class="s2">"values"</code><code class="o">:</code><code class="p">[</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1902</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Theodor Mommsen"</code><code class="p">,...},</code>
   <code class="p">{</code><code class="s2">"year"</code><code class="o">:</code><code class="mi">1902</code><code class="p">,</code><code class="s2">"name"</code><code class="o">:</code><code class="s2">"Hermann Emil Fischer"</code><code class="p">,...},</code>
   <code class="p">...</code>
  <code class="p">]</code>
 <code class="p">},</code>
 <code class="p">...</code>
<code class="p">];</code></pre>

<p>We can iterate through this nested array and bind the year groups in turn, each one represented by a column of indicators in our <span class="keep-together">timeline</span>.</p>

<p>D3 provides a handy nest operator to convert datasets to the desired nested form. <a data-type="xref" href="#d3nobels_nesting_code">Example 17-4</a> achieves the required conversion of our Nobel Prize dataset.</p>
<div id="d3nobels_nesting_code" data-type="example">
<h5><span class="label">Example 17-4. </span>Nesting our winners’ array by year</h5>

<pre data-type="programlisting" data-code-language="js"><code class="kd">var</code><code> </code><code class="nx">nestDataByYear</code><code> </code><code class="o">=</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">entries</code><code class="p">)</code><code> </code><code class="p">{</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO6-1" href="#callout_visualizing_individual_prizes_CO6-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
    </code><code class="k">return</code><code> </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">data</code><code class="p">.</code><code class="nx">years</code><code> </code><code class="o">=</code><code> </code><code class="nx">d3</code><code class="p">.</code><code class="nx">nest</code><code class="p">(</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">key</code><code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">w</code><code class="p">)</code><code> </code><code class="p">{</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO6-2" href="#callout_visualizing_individual_prizes_CO6-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
            </code><code class="k">return</code><code> </code><code class="nx">w</code><code class="p">.</code><code class="nx">year</code><code class="p">;</code><code>
        </code><code class="p">}</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">entries</code><code class="p">(</code><code class="nx">entries</code><code class="p">)</code><code class="p">;</code><code>
</code><code class="p">}</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO6-1" href="#co_visualizing_individual_prizes_CO6-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Entries is a flat dataset with all the currently selected Nobel Prize winners.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO6-2" href="#co_visualizing_individual_prizes_CO6-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Creates the first key for our nested array. You can use the <code>key</code> method multiple times to create deeper nested data. See <a href="http://bl.ocks.org/phoebebright/raw/3176159/">this handy bl.ocks.org</a> for some examples and a tutorial.</p></dd>
</dl></div>

<p>As discussed in <a data-type="xref" href="ch15.html#d3build_sect_components">“Basic Data Flow”</a>, the <code>onDataChange</code> function uses the <code>nestDataByYear</code> function to convert the array of selected winners into the data needed by this component’s <code>updateTimeChartMethod</code>.</p>

<p><a data-type="indexterm" data-primary="hierarchy layouts (D3 library)" id="idm140319393516944"></a>Data nesting is the basis for many of the D3 network examples and the creation of the <em>flare</em> data structures used by D3’s very cool <a href="https://github.com/mbostock/d3/wiki/Hierarchy-Layout">hierarchy layouts</a>. In the nesting terminology, we want each branch of our simple tree to represent a Nobel Prize year and each leaf one of the prizes won in that year.</p>

<p>Now that we’ve seen how to turn our dataset into the required nested form, let’s see how we use two data entry steps to turn that data into our prize indicators.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Adding the Winners with a Nested Data-Join"><div class="sect1" id="idm140319393884432">
<h1>Adding the Winners with a Nested Data-Join</h1>

<p><a data-type="indexterm" data-primary="D3 library" data-secondary="timeline charts" data-tertiary="nested data-join" id="D3timenest17"></a><a data-type="indexterm" data-primary="timeline charts" data-secondary="nested data-join" id="timenest17"></a>The update pattern used in our time chart is similar to that explained in <a data-type="xref" href="ch16.html#d3bar_update">“The Update Pattern”</a> but with an added element. Whereas with our bar chart we were creating simple SVG <code>rect</code> rectangles for each country, here we are creating a group of prizes for each year. This requires an extra data-join to our update cycle (using the <code>data</code>, <code>enter</code>, and <code>exit</code> methods).</p>

<p>The nested data is first passed from <code>onDataChange</code> to our time-chart’s <code>updateTimeChart</code> method. We then create the year groups using our ordinal <code>xScale</code> to position them horizontally (see <a data-type="xref" href="#d3nobels_first_enter_code">Example 17-5</a>).</p>
<div id="d3nobels_first_enter_code" data-type="example">
<h5><span class="label">Example 17-5. </span>Creating the year groups with a data-join</h5>

<pre data-type="programlisting" data-code-language="js"><code class="nx">nbviz</code><code class="p">.</code><code class="nx">updateTimeChart</code><code> </code><code class="o">=</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">data</code><code class="p">)</code><code> </code><code class="p">{</code><code>

    </code><code class="kd">var</code><code> </code><code class="nx">years</code><code> </code><code class="o">=</code><code> </code><code class="nx">svg</code><code class="p">.</code><code class="nx">selectAll</code><code class="p">(</code><code class="s2">".year"</code><code class="p">)</code><code>
            </code><code class="p">.</code><code class="nx">data</code><code class="p">(</code><code class="nx">data</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">)</code><code> </code><code class="p">{</code><code>
                </code><code class="k">return</code><code> </code><code class="nx">d</code><code class="p">.</code><code class="nx">key</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO7-1" href="#callout_visualizing_individual_prizes_CO7-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
            </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>

    </code><code class="nx">years</code><code class="p">.</code><code class="nx">enter</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'g'</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">classed</code><code class="p">(</code><code class="s1">'year'</code><code class="p">,</code><code> </code><code class="kc">true</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'name'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">)</code><code> </code><code class="p">{</code><code> </code><code class="k">return</code><code> </code><code class="nx">d</code><code class="p">.</code><code class="nx">key</code><code class="p">;</code><code class="p">}</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s2">"transform"</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">year</code><code class="p">)</code><code> </code><code class="p">{</code><code>
            </code><code class="k">return</code><code> </code><code class="s2">"translate("</code><code> </code><code class="o">+</code><code> </code><code class="nx">xScale</code><code class="p">(</code><code class="o">+</code><code class="nx">year</code><code class="p">.</code><code class="nx">key</code><code class="p">)</code><code> </code><code class="o">+</code><code> </code><code class="s2">",0)"</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO7-2" href="#callout_visualizing_individual_prizes_CO7-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
        </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>

    </code><code class="nx">years</code><code class="p">.</code><code class="nx">exit</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">remove</code><code class="p">(</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO7-3" href="#callout_visualizing_individual_prizes_CO7-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
    </code><code class="c1">// ...</code></pre></div>
<dl class="calloutlist pagebreak-before">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO7-1" href="#co_visualizing_individual_prizes_CO7-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>We want to join the year data to its respective column by its year key, not the default array index, which will change if there are year gaps in our nested array, as there often will be for the user-selected datasets.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO7-2" href="#co_visualizing_individual_prizes_CO7-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Position our year column according to its year key. We use <code>+year</code> to convert the string to an integer.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO7-3" href="#co_visualizing_individual_prizes_CO7-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Removes any year columns not bound to the new dataset.</p></dd>
</dl>

<p>Let’s use Chrome’s Elements tab to see the changes we’ve made from this first data-join. <a data-type="xref" href="#d3nobels_first_enter">Figure 17-3</a> shows our year groups nestled nicely in their parent chart group.</p>

<figure><div id="d3nobels_first_enter" class="figure">
<img src="dvpj_1703.png" alt="dvpj 1703" width="1259" height="990">
<h6><span class="label">Figure 17-3. </span>The result of creating our year groups during the first data-join</h6>
</div></figure>

<p>Let’s also do a sanity check to make sure our nested data has been bound correctly to its respective year groups. In <a data-type="xref" href="#d3nobels_firstpass_data">Figure 17-4</a>, we select a group element by its year name and inspect it. As required, the correct data has been bound by year, showing an array of data objects for the six Nobel Prize winners of 1901.</p>

<figure><div id="d3nobels_firstpass_data" class="figure">
<img src="dvpj_1704.png" alt="dvpj 1704" width="1166" height="559">
<h6><span class="label">Figure 17-4. </span>Checking the results of our first data-join with Chrome’s console</h6>
</div></figure>

<p>Having bound our year data to their respective groups, we will use a second pass to select the <em>winner</em> groups, enter the data, and use it to append the circle indicators.</p>

<p>The full code is shown in <a data-type="xref" href="#d3nobels_second_enter_code">Example 17-6</a>. Note that the circles’ x-coordinates are fixed relative to their respective year groups and that each circle is bound to its data object by the <code>name</code> field.<sup><a data-type="noteref" id="idm140319393328928-marker" href="ch17.html#idm140319393328928">3</a></sup> This means that after a circle indicator is appended to its group, the only dynamic attribute is its y-coordinate. This y-value is set by the index of the circle in its year-group’s <code>values</code> array (containing its winners), and this can change as the user applies selection filters and the size of <code>values</code> changes.</p>
<div id="d3nobels_second_enter_code" data-type="example">
<h5><span class="label">Example 17-6. </span>A second data-join to produce the prizes’ circle indicators</h5>

<pre data-type="programlisting" data-code-language="js"><code class="kd">var</code><code> </code><code class="nx">winners</code><code> </code><code class="o">=</code><code> </code><code class="nx">years</code><code class="p">.</code><code class="nx">selectAll</code><code class="p">(</code><code class="s2">".winner"</code><code class="p">)</code><code>
        </code><code class="p">.</code><code class="nx">data</code><code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">)</code><code> </code><code class="p">{</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO8-1" href="#callout_visualizing_individual_prizes_CO8-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
            </code><code class="k">return</code><code> </code><code class="nx">d</code><code class="p">.</code><code class="nx">values</code><code class="p">;</code><code>
        </code><code class="p">}</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">)</code><code> </code><code class="p">{</code><code>
            </code><code class="k">return</code><code> </code><code class="nx">d</code><code class="p">.</code><code class="nx">name</code><code class="p">;</code><code>
        </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>

</code><code class="nx">winners</code><code class="p">.</code><code class="nx">enter</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'circle'</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">classed</code><code class="p">(</code><code class="s1">'winner'</code><code class="p">,</code><code> </code><code class="kc">true</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'fill'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">)</code><code> </code><code class="p">{</code><code>
        </code><code class="k">return</code><code> </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">categoryFill</code><code class="p">(</code><code class="nx">d</code><code class="p">.</code><code class="nx">category</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO8-2" href="#callout_visualizing_individual_prizes_CO8-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
    </code><code class="p">}</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'cx'</code><code class="p">,</code><code> </code><code class="nx">xScale</code><code class="p">.</code><code class="nx">rangeBand</code><code class="p">(</code><code class="p">)</code><code class="o">/</code><code class="mi">2</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO8-3" href="#callout_visualizing_individual_prizes_CO8-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'r'</code><code class="p">,</code><code> </code><code class="nx">xScale</code><code class="p">.</code><code class="nx">rangeBand</code><code class="p">(</code><code class="p">)</code><code class="o">/</code><code class="mi">2</code><code class="p">)</code><code class="p">;</code><code>

</code><code class="nx">winners</code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'cy'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">,</code><code> </code><code class="nx">i</code><code class="p">)</code><code> </code><code class="p">{</code><code>
        </code><code class="k">return</code><code> </code><code class="nx">yScale</code><code class="p">(</code><code class="nx">i</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO8-4" href="#callout_visualizing_individual_prizes_CO8-4"><img src="4.png" alt="4" width="12" height="12"></a><code>
    </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>

</code><code class="nx">winners</code><code class="p">.</code><code class="nx">exit</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">remove</code><code class="p">(</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO8-5" href="#callout_visualizing_individual_prizes_CO8-5"><img src="5.png" alt="5" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO8-1" href="#co_visualizing_individual_prizes_CO8-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>This <code>data</code> call first binds the year’s prizes (the <code>values</code> array) to the year group and then sets the winner’s name as a key to his or her indicator.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO8-2" href="#co_visualizing_individual_prizes_CO8-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Uses our shared <code>categoryFill</code> method (defined in <em>nbviz_core.js</em>) to color the indicators by prize category.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO8-3" href="#co_visualizing_individual_prizes_CO8-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Places the center circle on the group’s y-axis by adjusting its x-position by half the indicator’s radius.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO8-4" href="#co_visualizing_individual_prizes_CO8-4"><img src="4.png" alt="4" width="12" height="12"></a></dt>
<dd><p>Places the indicator vertically by array index of prize using the ordinal <code>yScale</code>.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO8-5" href="#co_visualizing_individual_prizes_CO8-5"><img src="5.png" alt="5" width="12" height="12"></a></dt>
<dd><p>Removes any indicators (keyed by the winner’s name) without bound data in the new dataset.</p></dd>
</dl></div>

<p>The code in <a data-type="xref" href="#d3nobels_second_enter_code">Example 17-6</a> does the job of building our Prize time chart, creating new indicator circles if required and placing them, along with any existing ones, at their correct position, as designated by their array index (see <a data-type="xref" href="#timeline_second_pass">Figure 17-5</a>).</p>

<figure><div id="timeline_second_pass" class="figure">
<img src="dvpj_1705.png" alt="dvpj 1705" width="1565" height="576">
<h6><span class="label">Figure 17-5. </span>The result of our successful second data-join</h6>
</div></figure>

<p>Although we have produced a perfectly usable timeline, which will respond to user-driven changes in the data, the transition is a little stark and  unengaging.<sup><a data-type="noteref" id="idm140319393086816-marker" href="ch17.html#idm140319393086816">4</a></sup> Let’s now see a great demonstration of D3’s power: how the addition of two lines of code can buy a rather cool visual effect as our timeline changes state.<a data-type="indexterm" data-primary="" data-startref="timenest17" id="idm140319393085104"></a><a data-type="indexterm" data-primary="" data-startref="D3timenest17" id="idm140319393084256"></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="A Little Transitional Sparkle"><div class="sect1" id="idm140319393678688">
<h1>A Little Transitional Sparkle</h1>

<p><a data-type="indexterm" data-primary="D3 library" data-secondary="timeline charts" data-tertiary="transitions" id="D3timetran17"></a><a data-type="indexterm" data-primary="timeline charts" data-secondary="transitions" id="TCtran17"></a>As things stand, when the user selects a new dataset,<sup><a data-type="noteref" id="idm140319393079424-marker" href="ch17.html#idm140319393079424">5</a></sup> the update pattern in <a data-type="xref" href="#d3nobels_second_enter_code">Example 17-6</a>  instantly sets the position of the relevant circles. What we now want to do is to animate this repositioning, smoothing it out over a couple of seconds.</p>

<p>Any user-driven filtering will either leave some existing indicators (e.g., when we select only the Chemistry prizes from all categories), add some new ones (e.g., changing our category from Physics to Chemistry), or do both. An edge case is when the filtering leaves nothing (e.g., selecting female Economics winners). This means we need to decide what existing indicators should do and how to animate the positioning of new indicators.</p>

<p><a data-type="xref" href="#d3nobels_transition_less">Figure 17-6</a>  shows what we want to happen on selecting a subset of the existing data, in this case filtering all Nobel Prizes to include only those Physics winners. On the user’s selection of the Physics category, all indicators except the Physics ones are removed by the <code>exit</code> and <code>remove</code> methods. Meanwhile, the existing Physics indicators begin a two-second transition from their current position to an end position, dictated by their array index.</p>

<figure><div id="d3nobels_transition_less" class="figure">
<img src="dvpj_1706.png" alt="dvpj 1706" width="498" height="404">
<h6><span class="label">Figure 17-6. </span>Transition on selecting a subset of the existing data</h6>
</div></figure>

<p>Achieving this effect requires the addition of a single line of code to our update pattern, adding a transition of duration 2,000 ms to our update of the circles’ <code>cy</code> attribute:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// ...
</code><code class="nx">winners</code><code>
    </code><code class="p">.</code><code class="nx">transition</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">duration</code><code class="p">(</code><code class="mi">2000</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO9-1" href="#callout_visualizing_individual_prizes_CO9-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'cy'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">,</code><code> </code><code class="nx">i</code><code class="p">)</code><code> </code><code class="p">{</code><code>
      </code><code class="k">return</code><code> </code><code class="nx">yScale</code><code class="p">(</code><code class="nx">i</code><code class="p">)</code><code class="p">;</code><code>
    </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>

</code><code class="nx">winners</code><code class="p">.</code><code class="nx">exit</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">remove</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO9-1" href="#co_visualizing_individual_prizes_CO9-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Moves the circle from its current position to the new one over a two-second interval.</p></dd>
</dl>

<p>For newly appended indicators, a nice visual effect is to <em>grow</em> them from the bottom of the chart to their index-specified positions.  <a data-type="xref" href="#d3nobels_transition_more">Figure 17-7</a> shows an example, as the user increases the dataset by selecting All Categories after a Physics selection. The new circles are added to bottom of the chart and then all indicators proceed to their (new) positions over a two-second interval.</p>

<figure><div id="d3nobels_transition_more" class="figure">
<img src="dvpj_1707.png" alt="dvpj 1707" width="498" height="404">
<h6><span class="label">Figure 17-7. </span>Transition on selecting a superset of the existing data</h6>
</div></figure>

<p>Once again, we can achieve this visual effect by adding a single line of code to our update pattern:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// ...
</code><code>
</code><code class="nx">winners</code><code class="p">.</code><code class="nx">enter</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">append</code><code class="p">(</code><code class="s1">'circle'</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">classed</code><code class="p">(</code><code class="s1">'winner'</code><code class="p">,</code><code> </code><code class="kc">true</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'fill'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">)</code><code> </code><code class="p">{</code><code>
        </code><code class="k">return</code><code> </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">categoryFill</code><code class="p">(</code><code class="nx">d</code><code class="p">.</code><code class="nx">category</code><code class="p">)</code><code class="p">;</code><code>
    </code><code class="p">}</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'cy'</code><code class="p">,</code><code> </code><code class="nx">height</code><code class="p">)</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO10-1" href="#callout_visualizing_individual_prizes_CO10-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'cx'</code><code class="p">,</code><code> </code><code class="nx">xScale</code><code class="p">.</code><code class="nx">rangeBand</code><code class="p">(</code><code class="p">)</code><code class="o">/</code><code class="mi">2</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'r'</code><code class="p">,</code><code> </code><code class="nx">xScale</code><code class="p">.</code><code class="nx">rangeBand</code><code class="p">(</code><code class="p">)</code><code class="o">/</code><code class="mi">2</code><code class="p">)</code><code class="p">;</code><code>

</code><code class="nx">winners</code><code>
    </code><code class="p">.</code><code class="nx">transition</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">duration</code><code class="p">(</code><code class="mi">2000</code><code class="p">)</code><code>
    </code><code class="p">.</code><code class="nx">attr</code><code class="p">(</code><code class="s1">'cy'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="nx">d</code><code class="p">,</code><code> </code><code class="nx">i</code><code class="p">)</code><code> </code><code class="p">{</code><code>
    </code><code class="k">return</code><code> </code><code class="nx">yScale</code><code class="p">(</code><code class="nx">i</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_visualizing_individual_prizes_CO10-2" href="#callout_visualizing_individual_prizes_CO10-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
    </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>

</code><code class="nx">winners</code><code class="p">.</code><code class="nx">exit</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="nx">remove</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_visualizing_individual_prizes_CO10-1" href="#co_visualizing_individual_prizes_CO10-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>We first place the new circles at the bottom of the chart.</p></dd>
<dt><a class="co" id="callout_visualizing_individual_prizes_CO10-2" href="#co_visualizing_individual_prizes_CO10-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Then we move them to their new positions over two seconds.</p></dd>
</dl>

<p>As you can see, D3 makes it really easy to add cool visual effects to your data transitions. This is a testimony to its solid theoretical core.</p>

<p>We now have our complete timeline chart, which transitions smoothly in response to data changes initiated by the user.<a data-type="indexterm" data-primary="" data-startref="TCtran17" id="idm140319392852112"></a><a data-type="indexterm" data-primary="" data-startref="D3timetran17" id="idm140319392851136"></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idm140319393082816">
<h1>Summary</h1>

<p>Following on from the bar chart in <a data-type="xref" href="ch16.html#chapter_d3_intro">Chapter 16</a>, this chapter extended the update pattern, showing how to use a second data-join on nested data to create a novel chart. It’s important to emphasize that this ability to create novel visualizations is D3’s great strength: you are not tied to the particular functionality of a conventional charting library but can achieve unique transformations of your data. As our Nobel Prize bar chart showed, it’s easy to build conventional dynamic charts, but D3 allows for so much more.</p>

<p>We also saw how easy it is to liven up your visualizations with engaging transformations once a solid update pattern is in place.</p>

<p>In the next chapter, we will build the map component of our Nobel-viz using D3’s impressive topographic library.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm140319394437664"><sup><a href="ch17.html#idm140319394437664-marker">1</a></sup> D3 has some handy brushes that make selecting portions of the x- or y-axis easy. Combined with transitions, this can make for an engaging and intuitive way to increase the resolution of large datasets. See <a href="http://bl.ocks.org/mbostock/1667367">this bl.ocks.org</a> for a good example.</p><p data-type="footnote" id="idm140319393983680"><sup><a href="ch17.html#idm140319393983680-marker">2</a></sup> See the <a href="https://github.com/mbostock/d3/wiki/Colors#hsl">D3 GitHub</a> for details.</p><p data-type="footnote" id="idm140319393328928"><sup><a href="ch17.html#idm140319393328928-marker">3</a></sup> In other words, the Albert Einstein circle indicator will always have the Physics category and be colored green.</p><p data-type="footnote" id="idm140319393086816"><sup><a href="ch17.html#idm140319393086816-marker">4</a></sup> As discussed in <a data-type="xref" href="ch16.html#sect_transitions">“Transitions”</a>, the visual transition from one dataset to another can be both informative and lend a sense of continuity to the visualization, making it more appealing.</p><p data-type="footnote" id="idm140319393079424"><sup><a href="ch17.html#idm140319393079424-marker">5</a></sup> For example, filtering the prizes by category to show only the Physics winners.</p></div></div></section></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch16.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">16. Introducing D3—The Story of a Bar Chart</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch18.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">18. Mapping with D3</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag">
        
        
          
          

          
            <p>You have 7 days left in your trial, Flankpeter. Subscribe today. <a href="/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          
        
        

      </div>

    
    



        
      </div>
      




  <footer class="pagefoot t-pagefoot">
    <a href="#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class='js-footer-nav'>
      
        <li><a class="t-recommendations-footer" href="/r/">Recommended</a></li>
      
      <li>
      
      <a class="t-queue-footer" href="/playlists/">Playlists</a>
      
      </li>
      
        <li><a class="t-recent-footer" href="/history/">History</a></li>
        <li><a class="t-topics-footer" href="/topics?q=*&limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="/u/">Settings</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">&#169; 2018 <a href="https://www.safaribooksonline.com" target="_blank">Safari</a>.</span>
    <a href="/terms/">Terms of Service</a> /
    <a href="/privacy/">Privacy Policy</a>
  </footer>




    

    <script src="/jsi18n/web/" charset="utf-8"></script>
    <script src="/library/jsi18n/appcache/" charset="utf-8"></script>
  </body>
</html>
