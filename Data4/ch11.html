<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/ch11.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch11.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/ch11.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch11.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><!--<![endif]--><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="author" content="Safari Books Online" /><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491920565"/><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"/><meta property="twitter:account_id" content="4503599627559754" /><link rel="apple-touch-icon" href="/static/images/apple-touch-icon.0c29511d2d72.png"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'><title>11. Exploring Data with Pandas - Data Visualization with Python and JavaScript</title><link rel="stylesheet" href="/static/CACHE/css/a04cd81b09cd.css" type="text/css" /><link rel="stylesheet" type="text/css" href="/static/css/annotator.ef38b0457d7b.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td,#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content canvas,#sbo-rt-content details,#sbo-rt-content embed,#sbo-rt-content figure,#sbo-rt-content figcaption,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content output,#sbo-rt-content ruby,#sbo-rt-content section,#sbo-rt-content summary,#sbo-rt-content time,#sbo-rt-content mark,#sbo-rt-content audio,#sbo-rt-content video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content details,#sbo-rt-content figcaption,#sbo-rt-content figure,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content section{display:block}#sbo-rt-content div{line-height:1}#sbo-rt-content ol,#sbo-rt-content ul{list-style:none}#sbo-rt-content blockquote,#sbo-rt-content q{quotes:none}#sbo-rt-content blockquote:before,#sbo-rt-content blockquote:after,#sbo-rt-content q:before,#sbo-rt-content q:after{content:none}#sbo-rt-content table{border-collapse:collapse;border-spacing:0}@page{margin:5px !important}#sbo-rt-content p{margin:10px 0 0;line-height:125%;text-align:left}#sbo-rt-content p.byline{text-align:left;margin:-33px auto 35px;font-style:italic;font-weight:bold}#sbo-rt-content div.preface p+p.byline{margin:1em 0 0}#sbo-rt-content div.preface p.byline+p.byline{margin:0}#sbo-rt-content div.sect1>p.byline{margin:-.25em 0 1em}#sbo-rt-content div.sect1>p.byline+p.byline{margin-top:-1em}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content span.lineannotation{font-style:italic;color:#a62a2a;font-family:serif}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#fff}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content span.label,#sbo-rt-content span.keep-together{font-size:inherit;font-weight:inherit}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center !important;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;border:1px solid #DCDCDC;background-color:#F7F7F7;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content div.sidebar ul,#sbo-rt-content aside[data-type="sidebar"] ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:1.25em !important}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div[data-type="tip"],#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div[data-type="note"],#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div[data-type="warning"],#sbo-rt-content div.sidebar div[data-type="caution"],#sbo-rt-content div.sidebar div[data-type="important"]{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content aside[data-type="sidebar"] p.byline{font-size:90%;font-weight:bold;font-style:italic;text-align:center;text-indent:0;margin:5px auto 6px;page-break-after:avoid}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;text-align:left !important;text-transform:none !important;font-family:serif !important;margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:2em;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"] h2,#sbo-rt-content section[data-type="titlepage"] p.subtitle,#sbo-rt-content section[data-type="titlepage"] p[data-type="subtitle"]{font-size:1.3em;font-weight:normal;text-align:center;margin-top:.5em;color:#555}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"],#sbo-rt-content section[data-type="titlepage"] p.author{font-size:1.3em;font-family:serif !important;font-weight:bold;margin:50px 0 !important;text-align:center}#sbo-rt-content section[data-type="titlepage"] p.edition{text-align:center;text-transform:uppercase;margin-top:2em}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content ul.stafflist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.stafflist li{list-style-type:none;padding:5px 0}#sbo-rt-content ul.printings li{list-style-type:none}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif !important;font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif !important;margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10px}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif !important}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-style:italic;margin:.75em 0 0 !important}#sbo-rt-content blockquote div.attribution,#sbo-rt-content blockquote p[data-type="attribution"]{margin:5px 0 10px 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p,#sbo-rt-content blockquote p[data-type="attribution"]{font-style:normal;margin-top:5px}#sbo-rt-content blockquote div.attribution p:before,#sbo-rt-content blockquote p[data-type="attribution"]:before{font-style:normal;content:"—";-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div[data-type="footnotes"]{border-top:1px solid black;margin-top:1.5em}#sbo-rt-content sub,#sbo-rt-content sup{font-size:75%;line-height:0;position:relative}#sbo-rt-content sup{top:-.5em}#sbo-rt-content sub{bottom:-.25em}#sbo-rt-content div.refentry p.refname{font-size:1em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin-bottom:5px;overflow:auto;width:100%}#sbo-rt-content div.refentry{width:100%;display:block;margin-top:2em}#sbo-rt-content div.refsynopsisdiv{display:block;clear:both}#sbo-rt-content div.refentry header{page-break-inside:avoid !important;display:block;break-inside:avoid !important;padding-top:0;border-bottom:1px solid #000}#sbo-rt-content div.refsect1 h6{font-size:.9em;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content div.refsect1{margin-top:3em}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dd{margin-left:1.5em !important;margin-bottom:.25em}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ul{list-style-type:disc}#sbo-rt-content ul ul{list-style-type:square}#sbo-rt-content ul ul ul{list-style-type:circle}#sbo-rt-content ol{list-style-type:decimal}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ol ul{list-style-type:disc}#sbo-rt-content ol ul ol{list-style-type:decimal}#sbo-rt-content ul ol{list-style-type:decimal}#sbo-rt-content ul ol ul{list-style-type:disc}#sbo-rt-content ol,#sbo-rt-content ul{list-style-position:outside;margin:15px 0 15px 1.25em}#sbo-rt-content ol li,#sbo-rt-content ul li{margin:.5em 0 .65em;line-height:125%}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist,#sbo-rt-content ul.simplelist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.simplelist li{list-style-type:none;padding:5px 0}#sbo-rt-content table.simplelist td{border:none}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img,#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip ol,#sbo-rt-content div.tip ul,#sbo-rt-content div[data-type="tip"] ol,#sbo-rt-content div[data-type="tip"] ul,#sbo-rt-content div.note ol,#sbo-rt-content div.note ul,#sbo-rt-content div[data-type="note"] ol,#sbo-rt-content div[data-type="note"] ul,#sbo-rt-content div.warning ol,#sbo-rt-content div.warning ul,#sbo-rt-content div[data-type="warning"] ol,#sbo-rt-content div[data-type="warning"] ul,#sbo-rt-content div[data-type="caution"] ol,#sbo-rt-content div[data-type="caution"] ul,#sbo-rt-content div[data-type="important"] ol,#sbo-rt-content div[data-type="important"] ul{margin-left:1.5em !important}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1,#sbo-rt-content div[data-type="important"] h6{font-weight:bold;font-size:110%;font-family:sans-serif !important;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div[data-type="note"] h1{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3,#sbo-rt-content div.safarienabled h6{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px 0 30px 0 !important;max-width:95%;border:none !important;background:none;display:table !important}#sbo-rt-content div.table,#sbo-rt-content div.informaltable,#sbo-rt-content table{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{display:table-cell;padding:.3em;text-align:left;vertical-align:middle;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif;font-size:1em;margin:10px 0 10px 0 !important;padding:0;page-break-after:avoid;text-align:left !important}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation,#sbo-rt-content div[data-type="equation"]{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title,#sbo-rt-content div[data-type="equation"] h5{font-style:italic;font-weight:normal;font-family:serif !important;font-size:90%;margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul,#sbo-rt-content div[data-type="index"] ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:1em}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif;text-align:left}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content span.gray{color:#4C4C4C}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781491920565/chapter/ch11.html",
          "book_id": "9781491920565",
          "chapter_uri": "ch11.html",
          "position": 0,
          "user_uuid": "fee1bd59-4e02-48a4-a7b4-152ec4c157ac",
          "next_chapter_uri": "/library/view/data-visualization-with/9781491920565/part04.html"
        
      },
      title: "Data Visualization with Python and JavaScript",
      author_list: "Kyran Dale",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false,
      show_ios_app_teaser: false
    };
    // ]]></script><script src="/static/js/src/modernizr.js"></script><script>
    
      
       window.PUBLIC_ANNOTATIONS = false;
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

    
      window.PRIVACY_CONTROL_SWITCH = true;
    

    
      window.PUBLISHER_PAGES = true;
    

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "https://www.safaribooksonline.com/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://www.safaribooksonline.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch11.html"/><meta name="description" content=" Chapter 11. Exploring Data with Pandas In the previous chapter, we cleaned the Nobel Prize dataset that we scraped from Wikipedia in Chapter 6. Now it’s time to start ... "><meta property="og:title" content="11. Exploring Data with Pandas" /><meta itemprop="isPartOf" content="/library/view/data-visualization-with/9781491920565/" /><meta itemprop="name" content="11. Exploring Data with Pandas" /><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch11.html" /><meta property="og:site_name" content="Safari" /><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491920565/" /><meta property="og:description" itemprop="description" content=" Chapter 11. Exploring Data with Pandas In the previous chapter, we cleaned the Nobel Prize dataset that we scraped from Wikipedia in Chapter 6. Now it’s time to start ... "><meta itemprop="inLanguage" content="en" /><meta itemprop="publisher" content="O&#39;Reilly Media, Inc." /><meta property="og:type" content="book" /><meta property="og:book:isbn" itemprop="isbn" content="9781491920510" /><meta property="og:book:author" itemprop="author" content="Kyran Dale" /><meta property="og:book:tag" itemprop="about" content="JavaScript" /><meta property="og:book:tag" itemprop="about" content="Python" /><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><script>
    window.ENABLE_BOWERBIRD_COLLECTIONS = true;
  </script><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script type="text/javascript">
    (function(i,s,o,g,r,a,m) {
      i['GoogleAnalyticsObject']=r;
      i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
      a=s.createElement(o),m=s.getElementsByTagName(o)[0];
      a.async=1;
      a.src=g;
      m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    var matches = document.cookie.match(/BrowserCookie\s*=\s*([a-f0-9\-]{36})/),
      user_uuid = null;

    if (matches && matches.length === 2) {
      user_uuid = matches[1];
    }

  
    ga('create', 'UA-39299553-7', {'userId': 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac' });
  

  
    
      ga('set', 'dimension1', 'Trial');
    
  

  ga('set', 'dimension6', user_uuid);

  
    ga('set', 'dimension2', 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac');
    
  

  

  

  //enable enhanced link tracking
  ga('require', 'linkid', 'linkid.js');

  // reading interface will track pageviews itself
  if (document.location.pathname.indexOf("/library/view") !== 0) {
    ga('send', 'pageview');
  }
  </script><script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
  </script><script defer src="/static/js/build/vendor.e2e622a103f9.js"></script><script defer src="/static/js/build/reader.84feb506aa44.js"></script></head>


<body class="reading sidenav nav-collapsed  scalefonts">

    
  
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        





<a href="#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"/><rect x="10" y="12" width="3" height="7"/><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"/><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"/></g></svg><span>Safari Home</span></a></li><li><a href="/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z"/></g></svg><span>Recommended</span></a></li><li><a href="/playlists/" class="t-queue-nav l0 nav-icn None"><?xml version="1.0" encoding="UTF-8"?><svg width="21px" height="17px" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --><title>icon_Playlist_sml</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon_Playlist_sml" fill-rule="nonzero" fill="#000000"><g id="playlist-icon"><g id="Group-6"><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle></g><g id="Group-5" transform="translate(0.000000, 7.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g><g id="Group-5-Copy" transform="translate(0.000000, 14.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g></g></g></g></svg><span>
                 Playlists
              </span></a></li><li class="search"><a href="#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"/></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"/></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z"/></g></svg><span>History</span></a></li><li><a href="/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" width="20" height="20" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z"/></g></svg><span>Topics</span></a></li><li><a href="/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z"/></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>offers icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M35.9 20.6L27 15.5C26.1 15 24.7 15 23.7 15.5L14.9 20.6C13.9 21.1 13.2 22.4 13.2 23.4L13.2 41.4C13.2 42.4 13.9 43.7 14.9 44.2L23.3 49C24.2 49.5 25.6 49.5 26.6 49L35.9 43.6C36.8 43.1 37.6 41.8 37.6 40.8L37.6 23.4C37.6 22.4 36.8 21.1 35.9 20.6L35.9 20.6ZM40 8.2C39.1 7.6 37.6 7.6 36.7 8.2L30.2 11.9C29.3 12.4 29.3 13.2 30.2 13.8L39.1 18.8C40 19.4 40.7 20.6 40.7 21.7L40.7 39C40.7 40.1 41.4 40.5 42.4 40L48.2 36.6C49.1 36.1 49.8 34.9 49.8 33.8L49.8 15.6C49.8 14.6 49.1 13.3 48.2 12.8L40 8.2 40 8.2ZM27 10.1L33.6 6.4C34.5 5.9 34.5 5 33.6 4.5L26.6 0.5C25.6 0 24.2 0 23.3 0.5L16.7 4.2C15.8 4.7 15.8 5.6 16.7 6.1L23.7 10.1C24.7 10.6 26.1 10.6 27 10.1ZM10.1 21.7C10.1 20.6 10.8 19.4 11.7 18.8L20.6 13.8C21.5 13.2 21.5 12.4 20.6 11.9L13.6 7.9C12.7 7.4 11.2 7.4 10.3 7.9L1.6 12.8C0.7 13.3 0 14.6 0 15.6L0 33.8C0 34.9 0.7 36.1 1.6 36.6L8.4 40.5C9.3 41 10.1 40.6 10.1 39.6L10.1 21.7 10.1 21.7Z"/></g></svg><span>Offers & Deals</span></a><ul class="flyout"><li><a href="https://get.oreilly.com/email-signup.html" target="_blank" class="l2 nav-icn"><span>Newsletters</span></a></li></ul></li><li class="nav-highlights"><a href="/u/fee1bd59-4e02-48a4-a7b4-152ec4c157ac/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" width="20" height="20" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z"/></g></svg><span>Highlights</span></a></li><li><a href="/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a></li><li><a href="https://www.safaribooksonline.com/public/support" class="l1 no-icon">Support</a></li><li><a href="/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a><span class="l2 t-nag-notification"  id="nav-nag" ><strong class="trial-green">7</strong> days left in your trial.
  
  

  
    
      

<a class="" href="/subscribe/">Subscribe</a>.


    
  

  

</span></li><li><a href="https://www.safaribooksonline.com/public/support" class="l2">Support</a></li><li><a href="/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Data Visualization with Python and JavaScript
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781491920565/chapter/ch11.html"><div class="js-collections-dropdown collections-dropdown menu-bit-cards"></div></div></li><li class="js-font-control-panel font-control-activator"><a href="#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a
        class="twitter share-button t-twitter"
        target="_blank"
        aria-label="Share this section on Twitter"
        title="Share this section on Twitter"
      
        href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch11.html&text=Data%20Visualization%20with%20Python%20and%20JavaScript&via=safari"
      ><span>Twitter</span></a></li><li><a
        class="facebook share-button t-facebook"
        target="_blank"
        aria-label="Share this section on Facebook"
        title="Share this section on Facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch11.html"
      ><span>Facebook</span></a></li><li><a
        class="googleplus share-button t-googleplus"
        target="_blank"
        aria-label="Share this secton on Google Plus"
        title="Share this secton on Google Plus"
        href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch11.html"
      ><span>Google Plus</span></a></li><li><a
        class="email share-button t-email"
        aria-label="Share this section via email"
        title="Share this section via email"
      
        href="mailto:?subject=Safari: 11.%20Exploring%20Data%20with%20Pandas&body=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch11.html%0D%0Afrom Data%20Visualization%20with%20Python%20and%20JavaScript%0D%0A"
      ><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
        
        



 <!--[if lt IE 9]>
  
<![endif]-->



  <script defer src="/static/js/build/djangoMessagesPage.893631b34e7a.js"></script>


        
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch10.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">10. Visualizing Data with Matplotlib</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/part04.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">IV. Delivering the Data</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 11. Exploring Data with Pandas"><div class="chapter" id="chapter_pandas_exploring">
<h1><span class="label">Chapter 11. </span>Exploring Data with Pandas</h1>


<p><a data-type="indexterm" data-primary="Pandas" data-secondary="exploring data with" id="Pexplore11"></a>In the previous chapter, we cleaned the Nobel Prize dataset that we scraped from Wikipedia in <a data-type="xref" href="ch06.html#chapter_heavy_scraping">Chapter 6</a>. Now it’s time to start exploring our shiny new dataset, looking for interesting patterns, stories to tell, and anything else that could form the basis for an interesting visualization.</p>

<p><a data-type="indexterm" data-primary="data exploration" data-secondary="discovering stories" id="idm140319409755808"></a>First off, let’s try to clear our minds and take a long, hard look at the data to hand to get a broad idea of the visualizations suggested. <a data-type="xref" href="#explore_JSON">Example 11-1</a> shows the form of the Nobel dataset, with categorical, temporal, and geographical data.</p>
<div id="explore_JSON" data-type="example">
<h5><span class="label">Example 11-1. </span>Our cleaned Nobel Prize dataset</h5>

<pre data-type="programlisting" data-code-language="python"><code class="p">[{</code>
 <code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Physiology or Medicine'</code><code class="p">,</code>
 <code class="s1">'date_of_birth'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'8 October 1927'</code><code class="p">,</code>
 <code class="s1">'date_of_death'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'24 March 2002'</code><code class="p">,</code>
 <code class="s1">'gender'</code><code class="p">:</code> <code class="s1">'male'</code><code class="p">,</code>
 <code class="s1">'link'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'http://en.wikipedia.org/wiki/C%C3%A9sar_Milstein'</code><code class="p">,</code>
 <code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'C</code><code class="se">\xe9</code><code class="s1">sar Milstein'</code><code class="p">,</code>
 <code class="s1">'country'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Argentina'</code><code class="p">,</code>
 <code class="s1">'place_of_birth'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Bah</code><code class="se">\xed</code><code class="s1">a Blanca ,  Argentina'</code><code class="p">,</code>
 <code class="s1">'place_of_death'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Cambridge , England'</code><code class="p">,</code>
 <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1984</code>
 <code class="p">},</code>
 <code class="o">...</code>
 <code class="p">}]</code></pre></div>

<p class="pagebreak-before"><a data-type="indexterm" data-primary="stories, discovering" id="idm140319409750928"></a>The data in <a data-type="xref" href="#explore_JSON">Example 11-1</a> suggests a number of <em>stories</em> we might want to investigate, among them:</p>

<ul>
<li>
<p>Gender disparities among the prize winners</p>
</li>
<li>
<p>National trends (e.g., which country has most prizes in Economics)</p>
</li>
<li>
<p>Details about individual winners, such as their average age on receiving the prize or life expectancy</p>
</li>
<li>
<p>Geographical journey from place of birth to adopted country using the <code>born_in</code> and <code>country</code> fields</p>
</li>
</ul>

<p>These investigative lines form the basis for the coming sections, which will probe the dataset by asking questions of it, such as “How many women other than Marie Curie have won the Nobel Prize for Physics?”, “Which countries have the most prizes per capita
rather than absolute?”, and “Is there a historical trend to prizes by nation, a changing of the guard from old (science) world (big European
nations) to new (US and upcoming Asians)?”
Before beginning our explorations, let’s set up IPython and load our Nobel Prize dataset.</p>






<section data-type="sect1" data-pdf-bookmark="Starting to Explore"><div class="sect1" id="idm140319409687856">
<h1>Starting to Explore</h1>

<p><a data-type="indexterm" data-primary="data exploration" data-secondary="environment set up" id="DEenv11"></a><a data-type="indexterm" data-primary="IPython" data-secondary="environment set up" id="IPenv11"></a><a data-type="indexterm" data-primary="Notebook (IPython)" id="idm140319409683920"></a><a data-type="indexterm" data-primary="Qt console (IPython)" id="idm140319409683248"></a>Before starting our exploration, we need to set up our IPython environment. First fire up an IPython Notebook or Qt console session from the Nobel work directory:</p>

<pre data-type="programlisting">$ ipython [notebook | qt]</pre>

<p>If using the latest IPython Jupyter Notebook, you’ll need to run this:</p>

<pre data-type="programlisting">$ jupyter notebook</pre>

<p>In your IPython Qt console or Notebook, use the <em>magic</em> <code>matplotlib</code> command to enable inline plotting:</p>

<pre data-type="programlisting" data-code-language="python"><code class="o">%</code><code class="n">matplotlib</code> <code class="n">inline</code></pre>

<p>Then import the standard set of data exploration modules:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code><code> </code><code class="nn">pandas</code><code> </code><code class="kn">as</code><code> </code><code class="nn">pd</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">numpy</code><code> </code><code class="kn">as</code><code> </code><code class="nn">np</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">matplotlib.pyplot</code><code> </code><code class="kn">as</code><code> </code><code class="nn">plt</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">json</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">seaborn</code><code> </code><code class="kn">as</code><code> </code><code class="nn">sb</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO1-1" href="#callout_exploring_data_with_pandas_CO1-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">rcParams</code><code class="p">[</code><code class="s1">'</code><code class="s1">figure.figsize</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">4</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO1-2" href="#callout_exploring_data_with_pandas_CO1-2"><img src="2.png" alt="2" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO1-1" href="#co_exploring_data_with_pandas_CO1-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Importing Seaborn will apply its arguably superior looks to all the plots, not just the Seaborn-specific.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO1-2" href="#co_exploring_data_with_pandas_CO1-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Sets the default plotting size to eight inches by four.</p></dd>
</dl>

<p>At the end of <a data-type="xref" href="ch09.html#chapter_cleaning">Chapter 9</a>, we saved our clean dataset to MongoDB using a utility function (see <a data-type="xref" href="ch08.html#mongo_to_dataframe">“MongoDB”</a>). Let’s load the clean data into a Pandas <code>DataFrame</code>, ready to begin exploring.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code> <code class="o">=</code> <code class="n">mongo_to_dataframe</code><code class="p">(</code><code class="s1">'nobel_prize'</code><code class="p">,</code> <code class="s1">'winners_clean'</code><code class="p">)</code></pre>

<p>Let’s get some basic information about our dataset’s structure:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="o">.</code><code class="n">info</code><code class="p">()</code>

<code class="o">&lt;</code><code class="k">class</code> <code class="err">'</code><code class="nc">pandas</code><code class="o">.</code><code class="n">core</code><code class="o">.</code><code class="n">frame</code><code class="o">.</code><code class="n">DataFrame</code><code class="s1">'&gt;</code>
<code class="n">Int64Index</code><code class="p">:</code> <code class="mi">858</code> <code class="n">entries</code><code class="p">,</code> <code class="mi">0</code> <code class="n">to</code> <code class="mi">857</code>
<code class="n">Data</code> <code class="n">columns</code> <code class="p">(</code><code class="n">total</code> <code class="mi">12</code> <code class="n">columns</code><code class="p">):</code>
<code class="n">award_age</code>         <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="n">int64</code>
<code class="n">category</code>          <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">country</code>           <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">date_of_birth</code>     <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">date_of_death</code>     <code class="mi">559</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">gender</code>            <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">link</code>              <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">name</code>              <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">place_of_birth</code>    <code class="mi">831</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">place_of_death</code>    <code class="mi">524</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">text</code>              <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="nb">object</code>
<code class="n">year</code>              <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="n">int64</code>
<code class="n">dtypes</code><code class="p">:</code> <code class="n">int64</code><code class="p">(</code><code class="mi">2</code><code class="p">),</code> <code class="nb">object</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>
<code class="n">memory</code> <code class="n">usage</code><code class="p">:</code> <code class="mf">87.1</code><code class="o">+</code> <code class="n">KB</code></pre>

<p>Note that our dates of birth and death columns have the standard Pandas datatype of <code>object</code>. In order to make date comparisons, we’ll need to convert those to the datetime type, <code>datetime64</code>. We can use Pandas’ <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html"><code>to_datetime</code></a> method to achieve this conversion:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="o">.</code><code class="n">date_of_birth</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">to_datetime</code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">date_of_birth</code><code class="p">)</code>
<code class="n">df</code><code class="o">.</code><code class="n">date_of_death</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">to_datetime</code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">date_of_death</code><code class="p">)</code></pre>

<p>Running <code>df.info()</code> should now show two datetime columns:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="o">.</code><code class="n">info</code><code class="p">()</code>

<code class="o">...</code>
<code class="n">date_of_birth</code>     <code class="mi">858</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="n">datetime64</code><code class="p">[</code><code class="n">ns</code><code class="p">]</code>
<code class="n">date_of_death</code>     <code class="mi">559</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code> <code class="n">datetime64</code><code class="p">[</code><code class="n">ns</code><code class="p">]</code>
<code class="o">...</code></pre>

<p><code>to_datetime</code> usually works without needing extra arguments, but it’s worth checking the converted columns to make sure. In the case of our Nobel Prize dataset, everything checks out.<a data-type="indexterm" data-primary="" data-startref="DEenv11" id="idm140319409356016"></a><a data-type="indexterm" data-primary="" data-startref="IPenv11" id="idm140319409355136"></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Plotting with Pandas"><div class="sect1" id="idm140319409687360">
<h1>Plotting with Pandas</h1>

<p><a data-type="indexterm" data-primary="data exploration" data-secondary="integrated plotting" id="idm140319409183328"></a><a data-type="indexterm" data-primary="integrated plotting" id="idm140319409182352"></a><a data-type="indexterm" data-primary="Pandas" data-secondary="integrated plotting in" id="idm140319409181680"></a>Both Pandas <code>Series</code> and <code>DataFrame</code>s have integrated plotting, which wraps the most common Matplotlib charts, a few of which we explored in the last chapter. This makes it easy to get quick visual feedback as you interact with your <code>DataFrame</code>. And if you want to visualize something a little more complicated, the Pandas containers will play nicely with vanilla Matplotlib. You can also adapt the plots produced by Pandas using standard Matplotlib customizations.</p>

<p>Let’s look at an example of Pandas’ integrated plotting, starting with a basic plot of gender disparity in Nobel Prize wins.
Notoriously, the Nobel Prize has been distributed unequally among the sexes. Let’s get a quick feel for that disparity by using a bar plot on the <em>gender</em> category. <a data-type="xref" href="#explore_gender_code">Example 11-2</a> produces <a data-type="xref" href="#explore_gender">Figure 11-1</a>, showing the huge difference, with men receiving 811 of the 858 prizes in our dataset.</p>
<div id="explore_gender_code" data-type="example">
<h5><span class="label">Example 11-2. </span>Using Pandas’ integrated plotting to see gender disparities</h5>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_gender</code> <code class="o">=</code> <code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="s1">'gender'</code><code class="p">)</code>
<code class="n">by_gender</code><code class="o">.</code><code class="n">size</code><code class="p">()</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'bar'</code><code class="p">)</code></pre></div>

<figure><div id="explore_gender" class="figure">
<img src="dvpj_1101.png" alt="dvpj 1101" width="1600" height="800">
<h6><span class="label">Figure 11-1. </span>Prize counts by gender</h6>
</div></figure>

<p>In <a data-type="xref" href="#explore_gender_code">Example 11-2</a>, the <code>Series</code> produced by the gender group’s <code>size</code> method has its own integrated <code>plot</code> method, which turns the raw numbers into a chart:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_gender</code><code class="o">.</code><code class="n">size</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">gender</code>
<code class="n">female</code>     <code class="mi">47</code>
<code class="n">male</code>      <code class="mi">811</code>
<code class="n">dtype</code><code class="p">:</code> <code class="n">int64</code></pre>

<p>In addition to the default line plot, the Pandas <code>plot</code> method takes a <code>kind</code> argument to select among other possible plots. Among the more commonly used are:</p>

<ul>
<li>
<p><code>bar</code> or <code>barh</code> (<em>h</em> for horizontal) for bar plots</p>
</li>
<li>
<p><code>hist</code> for a histogram</p>
</li>
<li>
<p><code>box</code> for a box plot</p>
</li>
<li>
<p><code>scatter</code> for scatter plots</p>
</li>
</ul>

<p>You can find a full list of Panda’s integrated plots  <a href="http://pandas.pydata.org/pandas-docs/stable/visualization.html#other-plots">in the docs</a> as well as some Pandas plotting functions that take <code>DataFrame</code>s and <code>Series</code> as arguments.</p>

<p>Let’s extend our investigation into gender disparities and start extending our plotting know-how.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Gender Disparities"><div class="sect1" id="idm140319409184176">
<h1>Gender Disparities</h1>

<p><a data-type="indexterm" data-primary="data exploration" data-secondary="gender disparities" id="DEgender11"></a><a data-type="indexterm" data-primary="Pandas" data-secondary="groupby method" id="idm140319409136704"></a>Let’s break down the gender numbers shown in <a data-type="xref" href="#explore_gender">Figure 11-1</a> by category of prize. Pandas’ <code>groupby</code> method can take a list of columns to group by, with each group being accessed by multiple keys.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_cat_gen</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="p">[</code><code class="s1">'</code><code class="s1">category</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">gender</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>
</code><code>
</code><code class="n">by_cat_gen</code><code class="o">.</code><code class="n">get_group</code><code class="p">(</code><code class="p">(</code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">female</code><code class="s1">'</code><code class="p">)</code><code class="p">)</code><code class="p">[</code><code class="p">[</code><code class="s1">'</code><code class="s1">name</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">]</code><code class="p">]</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO2-1" href="#callout_exploring_data_with_pandas_CO2-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code>                       </code><code class="n">name</code><code>  </code><code class="n">year</code><code>
</code><code class="mi">268</code><code>    </code><code class="n">Maria</code><code> </code><code class="n">Goeppert</code><code class="o">-</code><code class="n">Mayer</code><code>  </code><code class="mi">1963</code><code>
</code><code class="mi">613</code><code>  </code><code class="n">Marie</code><code> </code><code class="n">Sk</code><code class="err">ł</code><code class="n">odowska</code><code class="o">-</code><code class="n">Curie</code><code>  </code><code class="mi">1903</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO2-1" href="#co_exploring_data_with_pandas_CO2-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Gets a group using a <code>category</code> and <code>gender</code> key.</p></dd>
</dl>

<p>Using the <code>size</code> method to get the size of these groups returns a <code>Series</code> with a <code>MultiIndex</code> that labels the values by both category and gender:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_cat_gen</code><code class="o">.</code><code class="n">size</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">category</code>                <code class="n">gender</code>
<code class="n">Chemistry</code>               <code class="n">female</code>      <code class="mi">4</code>
                        <code class="n">male</code>      <code class="mi">167</code>
<code class="n">Economics</code>               <code class="n">female</code>      <code class="mi">1</code>
                        <code class="n">male</code>       <code class="mi">74</code>
<code class="o">...</code>
<code class="n">Physiology</code> <code class="ow">or</code> <code class="n">Medicine</code>  <code class="n">female</code>     <code class="mi">11</code>
                        <code class="n">male</code>      <code class="mi">191</code>
<code class="n">dtype</code><code class="p">:</code> <code class="n">int64</code></pre>

<p>We can plot this multi-indexed <code>Series</code> directly, using <code>hbar</code> as the <code>kind</code> argument to produce a horizontal bar chart. This code produces <a data-type="xref" href="#explore_cat_gen">Figure 11-2</a>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_cat_gen</code><code class="o">.</code><code class="n">size</code><code class="p">()</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'barh'</code><code class="p">)</code></pre>

<figure><div id="explore_cat_gen" class="figure">
<img src="dvpj_1102.png" alt="dvpj 1102" width="1600" height="800">
<h6><span class="label">Figure 11-2. </span>Plotting multikey groups</h6>
</div></figure>

<p><a data-type="xref" href="#explore_cat_gen">Figure 11-2</a> is a little crude and makes comparing gender disparities harder than it should be. Let’s go about refining our charts to make those disparities clearer.</p>








<section data-type="sect2" class="pagebreak-before" data-pdf-bookmark="Unstacking Groups"><div class="sect2" id="idm140319408862576">
<h2>Unstacking Groups</h2>

<p><a data-type="xref" href="#explore_cat_gen">Figure 11-2</a> <a data-type="indexterm" data-primary="Pandas" data-secondary="unstacking groups in" id="Punstack11"></a>isn’t the easiest chart to read, even were we to improve the sorting of the bars. Handily, Pandas <code>Series</code> have a cool <code>unstack</code> method that takes the multiple indices—in this case, gender and category—and uses them as columns and indices, respectively, to create a new <code>DataFrame</code>. Plotting this <code>DataFrame</code> gives a much more usable plot, as it compares prize wins by gender. The following code produces <a data-type="xref" href="#explore_cat_gen_unstack">Figure 11-3</a>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_cat_gen</code><code class="o">.</code><code class="n">size</code><code class="p">()</code><code class="o">.</code><code class="n">unstack</code><code class="p">()</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'barh'</code><code class="p">)</code></pre>

<figure><div id="explore_cat_gen_unstack" class="figure">
<img src="dvpj_1103.png" alt="dvpj 1103" width="1600" height="800">
<h6><span class="label">Figure 11-3. </span>Unstacked Series of group sizes</h6>
</div></figure>

<p>Let’s improve <a data-type="xref" href="#explore_cat_gen_unstack">Figure 11-3</a> by ordering the bar groups by number of female winners (low to high) and adding a total winners bar group for comparison. <a data-type="xref" href="#explore_cat_gen_sort_code">Example 11-3</a> produces the chart in <a data-type="xref" href="#explore_cat_gen_sort">Figure 11-4</a>.</p>
<div id="explore_cat_gen_sort_code" data-type="example">
<h5><span class="label">Example 11-3. </span>Sorting and summing our gender groups</h5>

<pre data-type="programlisting" data-code-language="python"><code class="n">cat_gen_sz</code><code> </code><code class="o">=</code><code> </code><code class="n">by_cat_gen</code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">unstack</code><code class="p">(</code><code class="p">)</code><code>
</code><code class="n">cat_gen_sz</code><code class="p">[</code><code class="s1">'</code><code class="s1">total</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="n">cat_gen_sz</code><code class="o">.</code><code class="n">sum</code><code class="p">(</code><code class="n">axis</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO3-1" href="#callout_exploring_data_with_pandas_CO3-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">cat_gen_sz</code><code> </code><code class="o">=</code><code> </code><code class="n">cat_gen_sz</code><code class="o">.</code><code class="n">sort_values</code><code class="p">(</code><code class="n">by</code><code class="o">=</code><code class="s1">'</code><code class="s1">female</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">ascending</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO3-2" href="#callout_exploring_data_with_pandas_CO3-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code class="n">cat_gen_sz</code><code class="p">[</code><code class="p">[</code><code class="s1">'</code><code class="s1">female</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">total</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">]</code><code class="p">]</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'</code><code class="s1">barh</code><code class="s1">'</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO3-1" href="#co_exploring_data_with_pandas_CO3-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Sums the male and female totals. The <code>axis</code> argument is <code>0</code> for index sum, <code>1</code> for columns.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO3-2" href="#co_exploring_data_with_pandas_CO3-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Sorts the rows using the <code>female</code> field, from low to high.</p></dd>
</dl></div>

<figure><div id="explore_cat_gen_sort" class="figure">
<img src="dvpj_1104.png" alt="dvpj 1104" width="1200" height="800">
<h6><span class="label">Figure 11-4. </span>Bars ordered by number of female winners</h6>
</div></figure>

<p>Ignoring Economics, a recent and contentious addition to the Nobel Prize categories, <a data-type="xref" href="#explore_cat_gen_sort">Figure 11-4</a> shows that the largest discrepancy in the number of male and female prize winners is in Physics, with only two female winners. Let’s remind ourselves who they are:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="p">[(</code><code class="n">df</code><code class="o">.</code><code class="n">category</code> <code class="o">==</code> <code class="s1">'Physics'</code><code class="p">)</code> <code class="o">&amp;</code> <code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">gender</code> <code class="o">==</code> <code class="s1">'female'</code><code class="p">)]</code>\
    <code class="p">[[</code><code class="s1">'name'</code><code class="p">,</code> <code class="s1">'country'</code><code class="p">,</code><code class="s1">'year'</code><code class="p">]]</code>

<code class="n">Out</code><code class="p">:</code>
                       <code class="n">name</code>    <code class="n">country</code>  <code class="n">year</code>
<code class="mi">267</code>    <code class="n">Maria</code> <code class="n">Goeppert</code><code class="o">-</code><code class="n">Mayer</code>  <code class="n">United</code> <code class="n">States</code>  <code class="mi">1963</code>
<code class="mi">611</code>  <code class="n">Marie</code> <code class="n">Sk</code><code class="err">ł</code><code class="n">odowska</code><code class="o">-</code><code class="n">Curie</code>         <code class="n">Poland</code>  <code class="mi">1903</code></pre>

<p>While most people will have heard of Marie Curie, who is actually one of the four illustrious winners of two Nobel Prizes, few have heard of Maria Goeppert-Mayer.<sup><a data-type="noteref" id="idm140319408767376-marker" href="ch11.html#idm140319408767376">1</a></sup> This ignorance is surprising, given the drive to encourage women into science. I would want my visualization to enable people to discover and learn a little about Maria Goeppert-Mayer.<a data-type="indexterm" data-primary="" data-startref="Punstack11" id="idm140319408723728"></a></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Historical Trends"><div class="sect2" id="idm140319408861984">
<h2>Historical Trends</h2>

<p><a data-type="indexterm" data-primary="historical trends" id="historical11"></a>It would be interesting to see if there has been any increase in female prize allocation in recent years. One way to visualize this would be as grouped bars over time. Let’s run up a quick plot, using <code>unstack</code> as in <a data-type="xref" href="#explore_cat_gen_unstack">Figure 11-3</a> but using the year and gender columns.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_year_gender</code> <code class="o">=</code> <code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">([</code><code class="s1">'year'</code><code class="p">,</code><code class="s1">'gender'</code><code class="p">])</code>
<code class="n">year_gen_sz</code> <code class="o">=</code> <code class="n">by_year_gender</code><code class="o">.</code><code class="n">size</code><code class="p">()</code><code class="o">.</code><code class="n">unstack</code><code class="p">()</code>
<code class="n">year_gen_sz</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'bar'</code><code class="p">,</code> <code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">16</code><code class="p">,</code><code class="mi">4</code><code class="p">))</code></pre>

<p><a data-type="xref" href="#explore_year_gen">Figure 11-5</a>, the hard-to-read plot produced, is only functional. The trend of female prize distributions can be observed, but the plot has many problems. Let’s use Matplotlib’s and Pandas’ eminent flexibility to fix them.</p>

<figure><div id="explore_year_gen" class="figure">
<img src="dvpj_1105.png" alt="dvpj 1105" width="3200" height="800">
<h6><span class="label">Figure 11-5. </span>Prizes by year and gender</h6>
</div></figure>

<p>The first thing we need to do is reduce the number of x-axis labels. By default, Matplotlib will label each bar or bar group of a bar plot, which in the case of our hundred years of prizes creates a mess of labels. What we need is the ability to thin out the number of axis labels as desired. There are various ways to do this in Matplotlib; I’ll demonstrate the one I’ve found to be most reliable. It’s the sort of thing you’re going to want to reuse, so it makes sense to stick it in a dedicated function. <a data-type="xref" href="#explore_thin_axis">Example 11-4</a> shows a function to reduce the number of ticks on our x-axis.</p>
<div id="explore_thin_axis" data-type="example">
<h5><span class="label">Example 11-4. </span>Reducing the number of x-axis labels</h5>

<pre data-type="programlisting" data-code-language="python"><code class="k">def</code><code> </code><code class="nf">thin_xticks</code><code class="p">(</code><code class="n">ax</code><code class="p">,</code><code> </code><code class="n">tick_gap</code><code class="o">=</code><code class="mi">10</code><code class="p">,</code><code> </code><code class="n">rotation</code><code class="o">=</code><code class="mi">45</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="sd">""" Thin x-ticks and adjust rotation """</code><code>
</code><code>    </code><code class="n">ticks</code><code> </code><code class="o">=</code><code> </code><code class="n">ax</code><code class="o">.</code><code class="n">xaxis</code><code class="o">.</code><code class="n">get_ticklocs</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO4-1" href="#callout_exploring_data_with_pandas_CO4-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="n">ticklabels</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="n">l</code><code class="o">.</code><code class="n">get_text</code><code class="p">(</code><code class="p">)</code><code>\
</code><code>                  </code><code class="k">for</code><code> </code><code class="n">l</code><code> </code><code class="ow">in</code><code> </code><code class="n">ax</code><code class="o">.</code><code class="n">xaxis</code><code class="o">.</code><code class="n">get_ticklabels</code><code class="p">(</code><code class="p">)</code><code class="p">]</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO4-2" href="#callout_exploring_data_with_pandas_CO4-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">xaxis</code><code class="o">.</code><code class="n">set_ticks</code><code class="p">(</code><code class="n">ticks</code><code class="p">[</code><code class="p">:</code><code class="p">:</code><code class="n">tick_gap</code><code class="p">]</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO4-3" href="#callout_exploring_data_with_pandas_CO4-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">xaxis</code><code class="o">.</code><code class="n">set_ticklabels</code><code class="p">(</code><code class="n">ticklabels</code><code class="p">[</code><code class="p">:</code><code class="p">:</code><code class="n">tick_gap</code><code class="p">]</code><code class="p">,</code><code>\</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO4-4" href="#callout_exploring_data_with_pandas_CO4-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>                            </code><code class="n">rotation</code><code class="o">=</code><code class="n">rotation</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO4-5" href="#callout_exploring_data_with_pandas_CO4-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">figure</code><code class="o">.</code><code class="n">show</code><code class="p">(</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO4-1" href="#co_exploring_data_with_pandas_CO4-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Gets the existing locations and labels of the x-ticks, currently one per bar.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO4-2" href="#co_exploring_data_with_pandas_CO4-3"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Sets the new tick locations and labels at an interval of <code>tick_gap</code> (default <code>10</code>).</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO4-3" href="#co_exploring_data_with_pandas_CO4-5"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Rotates the labels for readability, by default on an upward <span class="keep-together">diagonal</span>.</p></dd>
</dl></div>

<p>As well as needing to reduce the number of ticks, the x-axis in <a data-type="xref" href="#explore_year_gen">Figure 11-5</a> has a discontinuous range, missing the years 1939–1945 of WWII, during which no Nobel Prizes were presented. We want to see such gaps, so we need to set the x-axis range manually to include all years from the start of the Nobel Prize to the current day.</p>

<p>The current unstacked group sizes use an automatic year index:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_year_gender</code> <code class="o">=</code> <code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">([</code><code class="s1">'year'</code><code class="p">,</code> <code class="s1">'gender'</code><code class="p">])</code>
<code class="n">by_year_gender</code><code class="o">.</code><code class="n">size</code><code class="p">()</code><code class="o">.</code><code class="n">unstack</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">gender</code>  <code class="n">female</code>  <code class="n">male</code>
<code class="n">year</code>
<code class="mi">1901</code>       <code class="n">NaN</code>     <code class="mi">6</code>
<code class="mi">1902</code>       <code class="n">NaN</code>     <code class="mi">7</code>
<code class="o">...</code>
<code class="mi">2014</code>         <code class="mi">2</code>    <code class="mi">11</code>
<code class="p">[</code><code class="mi">111</code> <code class="n">rows</code> <code class="n">x</code> <code class="mi">2</code> <code class="n">columns</code><code class="p">]</code></pre>

<p>In order to see any gaps in the prize distribution, all we have to do is reindex this <code>Series</code> with one containing the full range of years:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">new_index</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">Index</code><code class="p">(</code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="mi">1901</code><code class="p">,</code><code> </code><code class="mi">2015</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">name</code><code class="o">=</code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO5-1" href="#callout_exploring_data_with_pandas_CO5-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">by_year_gender</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="p">[</code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">gender</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>
</code><code class="n">year_gen_sz</code><code> </code><code class="o">=</code><code> </code><code class="n">by_year_gender</code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">unstack</code><code class="p">(</code><code class="p">)</code><code>
</code><code>  </code><code class="o">.</code><code class="n">reindex</code><code class="p">(</code><code class="n">new_index</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO5-2" href="#callout_exploring_data_with_pandas_CO5-2"><img src="2.png" alt="2" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO5-1" href="#co_exploring_data_with_pandas_CO5-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Here we create a full-range index named <code>year</code>, covering all the Nobel Prize years.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO5-2" href="#co_exploring_data_with_pandas_CO5-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>We replace our discontinuous index with the new continuous one.</p></dd>
</dl>

<p class="pagebreak-before">Another problem with <a data-type="xref" href="#explore_year_gen">Figure 11-5</a> is the excessive number of bars. Although we do get male and female bars side by side, it looks messy and has aliasing artifacts too. It’s better to have dedicated male and female plots but stacked so as to allow easy comparison. We can achieve this using the subplotting method we saw in <a data-type="xref" href="ch10.html#mpl_axes_subplots">“Axes and Subplots”</a>, using the Pandas data but customizing the plot using our Matplotlib know-how. <a data-type="xref" href="#explore_year_gen_stack_code">Example 11-5</a> shows how to do this, producing the plot in <a data-type="xref" href="#explore_year_gen_stack">Figure 11-6</a>.</p>
<div id="explore_year_gen_stack_code" data-type="example">
<h5><span class="label">Example 11-5. </span>Stacked gender prizes by year</h5>

<pre data-type="programlisting" data-code-language="python"><code class="n">new_index</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">Index</code><code class="p">(</code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="mi">1901</code><code class="p">,</code><code> </code><code class="mi">2015</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">name</code><code class="o">=</code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">by_year_gender</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="p">[</code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">gender</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>
</code><code>
</code><code class="n">year_gen_sz</code><code> </code><code class="o">=</code><code> </code><code class="n">by_year_gender</code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">unstack</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">reindex</code><code class="p">(</code><code class="n">new_index</code><code class="p">)</code><code>
</code><code>
</code><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">axes</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">nrows</code><code class="o">=</code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">ncols</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO6-1" href="#callout_exploring_data_with_pandas_CO6-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>            </code><code class="n">sharex</code><code class="o">=</code><code class="bp">True</code><code class="p">,</code><code> </code><code class="n">sharey</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO6-2" href="#callout_exploring_data_with_pandas_CO6-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>
</code><code class="n">ax_f</code><code> </code><code class="o">=</code><code> </code><code class="n">axes</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code>
</code><code class="n">ax_m</code><code> </code><code class="o">=</code><code> </code><code class="n">axes</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code>
</code><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">suptitle</code><code class="p">(</code><code class="s1">'</code><code class="s1">Nobel Prize-winners by gender</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">fontsize</code><code class="o">=</code><code class="mi">16</code><code class="p">)</code><code>
</code><code>
</code><code class="n">ax_f</code><code class="o">.</code><code class="n">bar</code><code class="p">(</code><code class="n">year_gen_sz</code><code class="o">.</code><code class="n">index</code><code class="p">,</code><code> </code><code class="n">year_gen_sz</code><code class="o">.</code><code class="n">female</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO6-3" href="#callout_exploring_data_with_pandas_CO6-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
</code><code class="n">ax_f</code><code class="o">.</code><code class="n">set_ylabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Female winners</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>
</code><code class="n">ax_m</code><code class="o">.</code><code class="n">bar</code><code class="p">(</code><code class="n">year_gen_sz</code><code class="o">.</code><code class="n">index</code><code class="p">,</code><code> </code><code class="n">year_gen_sz</code><code class="o">.</code><code class="n">male</code><code class="p">)</code><code>
</code><code class="n">ax_m</code><code class="o">.</code><code class="n">set_ylabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Male winners</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>
</code><code class="n">ax_m</code><code class="o">.</code><code class="n">set_xlabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Year</code><code class="s1">'</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO6-1" href="#co_exploring_data_with_pandas_CO6-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Creates two axes, on a two (row) by one (column) grid.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO6-2" href="#co_exploring_data_with_pandas_CO6-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>We’ll share the x- and y-axes, which will make comparisons between the two plots sensible.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO6-3" href="#co_exploring_data_with_pandas_CO6-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>We provide the axis’s bar chart (<code>bar</code>) method with the continuous year index and the unstacked gender columns.</p></dd>
</dl></div>

<figure><div id="explore_year_gen_stack" class="figure">
<img src="dvpj_1106.png" alt="dvpj 1106" width="1600" height="800">
<h6><span class="label">Figure 11-6. </span>Prizes by year and gender, on two stacked axes</h6>
</div></figure>

<p>So the take-home from our investigation into gender distributions is that there is a huge discrepancy but, as shown by <a data-type="xref" href="#explore_year_gen_stack">Figure 11-6</a>, a slight improvement in recent years. Moreover, with Economics being an outlier, the difference is greatest in the sciences. Given the fairly small number of female prize winners, there’s not a lot more to be seen here.</p>

<p>Let’s now take a look at national trends in prize wins and see if there are any interesting nuggets for visualization.<a data-type="indexterm" data-primary="" data-startref="DEgender11" id="idm140319408078832"></a><a data-type="indexterm" data-primary="" data-startref="historical11" id="idm140319408077856"></a></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="National Trends"><div class="sect1" id="idm140319409139056">
<h1>National Trends</h1>

<p><a data-type="indexterm" data-primary="data exploration" data-secondary="national trends" id="DEnational11"></a><a data-type="indexterm" data-primary="national trends" id="nat11"></a>The obvious starting point in looking at national trends is to plot the absolute number of prize winners. This is easily done in one line of Pandas, broken up here for ease of reading:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="s1">'country'</code><code class="p">)</code><code class="o">.</code><code class="n">size</code><code class="p">()</code><code class="o">.</code><code class="n">order</code><code class="p">(</code><code class="n">ascending</code><code class="o">=</code><code class="bp">False</code><code class="p">)</code>\
        <code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'bar'</code><code class="p">,</code> <code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">12</code><code class="p">,</code><code class="mi">4</code><code class="p">))</code></pre>

<p>This produces <a data-type="xref" href="#explore_nat_abs">Figure 11-7</a>, showing the United States with the lion’s share of prizes.</p>

<p>The absolute number of prizes will be bound to favor countries with large populations. Let’s look at a fairer comparison, visualizing prizes per capita.</p>

<figure><div id="explore_nat_abs" class="figure">
<img src="dvpj_1107.png" alt="dvpj 1107" width="1600" height="800">
<h6><span class="label">Figure 11-7. </span>Absolute prize wins by country</h6>
</div></figure>








<section data-type="sect2" data-pdf-bookmark="Prize Winners per Capita"><div class="sect2" id="idm140319408034496">
<h2>Prize Winners per Capita</h2>

<p>The absolute number of prize winners is bound to favor larger countries, which raises the question, how do the numbers stack up if we account for population sizes? In order to test prize haul per capita, we need to divide the absolute prize numbers by population size. In <a data-type="xref" href="ch05.html#country_data">“Getting Country Data for the Nobel Dataviz”</a>, we downloaded some country data from the Web and stored it to MongoDB. Let’s retrieve it now and use it to produce a plot of prizes relative to population size.</p>

<p>First let’s get the national group sizes, with country names as index labels:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">nat_group</code> <code class="o">=</code> <code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="s1">'country'</code><code class="p">)</code>
<code class="n">ngsz</code> <code class="o">=</code> <code class="n">nat_group</code><code class="o">.</code><code class="n">size</code><code class="p">()</code>
<code class="n">ngsz</code><code class="o">.</code><code class="n">index</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">Index</code><code class="p">([</code><code class="s-Affix">u</code><code class="s1">'Argentina'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Australia'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Austria'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Azerbaijan'</code><code class="p">,</code><code class="o">...</code></pre>

<p>Now let’s load our country data into a <code>DataFrame</code> using our utility function <code>mongo_to_dataframe</code> and remind ourselves of the data it contains:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df_countries</code> <code class="o">=</code> <code class="n">mongo_to_dataframe</code><code class="p">(</code><code class="s1">'nobel_prize'</code><code class="p">,</code> <code class="s1">'countries'</code><code class="p">)</code>
<code class="n">df_countries</code><code class="o">.</code><code class="n">ix</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="c1"># selects the first row by position</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">alpha3Code</code>               <code class="n">ARG</code>
<code class="n">area</code>              <code class="mf">2.7804e+06</code>
<code class="n">capital</code>         <code class="n">Buenos</code> <code class="n">Aires</code>
<code class="n">gini</code>                    <code class="mf">44.5</code>
<code class="n">latlng</code>        <code class="p">[</code><code class="o">-</code><code class="mf">34.0</code><code class="p">,</code> <code class="o">-</code><code class="mf">64.0</code><code class="p">]</code>
<code class="n">name</code>               <code class="n">Argentina</code>
<code class="n">population</code>          <code class="mi">42669500</code>
<code class="n">Name</code><code class="p">:</code> <code class="n">Argentina</code><code class="p">,</code> <code class="n">dtype</code><code class="p">:</code> <code class="nb">object</code></pre>

<p>If we set the index of our country dataset to its <code>name</code> column and add the <code>ngsz</code> national group-size <code>Series</code>, which also has a country name index, the two will combine on the shared indices, giving our country data a new <code>nobel_wins</code> column. We can then use this new column to create a <code>nobel_wins_per_capita</code> by dividing it by population size:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df_countries</code> <code class="o">=</code> <code class="n">df_countries</code><code class="o">.</code><code class="n">set_index</code><code class="p">(</code><code class="s1">'name'</code><code class="p">)</code>
<code class="n">df_countries</code><code class="p">[</code><code class="s1">'nobel_wins'</code><code class="p">]</code> <code class="o">=</code> <code class="n">ngsz</code>
<code class="n">df_countries</code><code class="p">[</code><code class="s1">'nobel_wins_per_capita'</code><code class="p">]</code> <code class="o">=</code>\
    <code class="n">df_countries</code><code class="o">.</code><code class="n">nobel_wins</code> <code class="o">/</code> <code class="n">df_countries</code><code class="o">.</code><code class="n">population</code></pre>

<p>We now need only sort the <code>df_countries</code> <code>DataFrame</code> by its new <code>nobel_wins_per_cap</code> column and plot the Nobel Prize wins per capita, producing <a data-type="xref" href="#explore_per_cap">Figure 11-8</a>.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="o">.</code><code class="n">countries</code><code class="o">.</code><code class="n">sort_values</code><code class="p">(</code><code class="n">by</code><code class="o">=</code><code class="s1">'nobel_wins_per_capita'</code><code class="p">,</code>\
    <code class="n">ascending</code><code class="o">=</code><code class="bp">False</code><code class="p">)</code><code class="o">.</code><code class="n">nobel_per_capita</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'bar'</code><code class="p">)</code></pre>

<figure><div id="explore_per_cap" class="figure">
<img src="dvpj_1108.png" alt="dvpj 1108" width="1600" height="800">
<h6><span class="label">Figure 11-8. </span>National prize numbers per capita</h6>
</div></figure>

<p>This shows the Caribbean Island of Saint Lucia taking top place. Home to the Nobel Prize–winning poet <a href="https://en.wikipedia.org/wiki/Derek_Walcott">Derek Walcott</a>, its small population of 175,000 gives it a high Nobel Prizes per capita.</p>

<p>Let’s see how things stack up with the larger countries by filtering the results for countries that have won more than two Nobel Prizes:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df_countries</code><code class="p">[</code><code class="n">df_countries</code><code class="o">.</code><code class="n">nobel_wins</code> <code class="o">&gt;</code> <code class="mi">2</code><code class="p">]</code>\
        <code class="o">.</code><code class="n">sort_values</code><code class="p">(</code><code class="n">by</code><code class="o">=</code><code class="s1">'nobel_wins_per_capita'</code><code class="p">,</code> <code class="n">ascending</code><code class="o">=</code><code class="bp">False</code><code class="p">)</code>\
        <code class="o">.</code><code class="n">nobel_wins_per_capita</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'bar'</code><code class="p">)</code></pre>

<p>The results in <a data-type="xref" href="#explore_per_cap_filter">Figure 11-9</a> show the Scandinavian countries and Switzerland punching above their weight.</p>

<figure><div id="explore_per_cap_filter" class="figure">
<img src="dvpj_1109.png" alt="dvpj 1109" width="1600" height="800">
<h6><span class="label">Figure 11-9. </span>National prize numbers per capita, filtered for three or more wins</h6>
</div></figure>

<p>Changing the metric for national prize counts from absolute to per capita makes a big difference. Let’s now refine our search a little and focus on the prize categories, looking for interesting nuggets there.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Prizes by Category"><div class="sect2" id="idm140319408033872">
<h2>Prizes by Category</h2>

<p>Let’s drill down a bit into the absolute prize data and look at wins by category. This will require grouping by country and category columns, getting the size of those groups, unstacking the resulting <code>Series</code> and then plotting the columns of the resulting <code>DataFrame</code>. First we get our categories with country group sizes:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">nat_cat_sz</code> <code class="o">=</code> <code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">([</code><code class="s1">'country'</code><code class="p">,</code> <code class="s1">'category'</code><code class="p">])</code><code class="o">.</code><code class="n">size</code><code class="p">()</code>
<code class="o">.</code><code class="n">unstack</code><code class="p">()</code>
<code class="n">nat_cat_sz</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">category</code>     <code class="n">Chemistry</code>  <code class="n">Economics</code>  <code class="n">Literature</code>  <code class="n">Peace</code>  \<code class="o">...</code>
<code class="n">country</code>
<code class="n">Argentina</code>            <code class="mi">2</code>        <code class="n">NaN</code>         <code class="n">NaN</code>      <code class="mi">4</code>
<code class="n">Australia</code>          <code class="n">NaN</code>          <code class="mi">2</code>           <code class="mi">2</code>    <code class="n">NaN</code>
<code class="n">Austria</code>              <code class="mi">6</code>        <code class="n">NaN</code>           <code class="mi">2</code>      <code class="mi">4</code>
<code class="n">Azerbaijan</code>         <code class="n">NaN</code>        <code class="n">NaN</code>         <code class="n">NaN</code>    <code class="n">NaN</code>
<code class="n">Bangladesh</code>         <code class="n">NaN</code>        <code class="n">NaN</code>         <code class="n">NaN</code>      <code class="mi">2</code></pre>

<p class="pagebreak-before">We then use the <code>nat_cat_sz</code> <code>DataFrame</code> to produce subplots for the six Nobel Prize categories:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">COL_NUM</code><code> </code><code class="o">=</code><code> </code><code class="mi">2</code><code>
</code><code class="n">ROW_NUM</code><code> </code><code class="o">=</code><code> </code><code class="mi">3</code><code>
</code><code>
</code><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">axes</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">ROW_NUM</code><code class="p">,</code><code> </code><code class="n">COL_NUM</code><code class="p">,</code><code> </code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">12</code><code class="p">,</code><code class="mi">12</code><code class="p">)</code><code class="p">)</code><code>
</code><code>
</code><code class="k">for</code><code> </code><code class="n">i</code><code class="p">,</code><code> </code><code class="p">(</code><code class="n">label</code><code class="p">,</code><code> </code><code class="n">col</code><code class="p">)</code><code> </code><code class="ow">in</code><code> </code><code class="nb">enumerate</code><code class="p">(</code><code class="n">nat_cat_sz</code><code class="o">.</code><code class="n">iteritems</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO7-1" href="#callout_exploring_data_with_pandas_CO7-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">axes</code><code class="p">[</code><code class="n">i</code><code class="o">/</code><code class="n">COL_NUM</code><code class="p">,</code><code> </code><code class="n">i</code><code class="o">%</code><code class="n">COL_NUM</code><code class="p">]</code><code>
</code><code>    </code><code class="n">col</code><code> </code><code class="o">=</code><code> </code><code class="n">col</code><code class="o">.</code><code class="n">order</code><code class="p">(</code><code class="n">ascending</code><code class="o">=</code><code class="bp">False</code><code class="p">)</code><code class="p">[</code><code class="p">:</code><code class="mi">10</code><code class="p">]</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO7-2" href="#callout_exploring_data_with_pandas_CO7-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="n">col</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">kind</code><code class="o">=</code><code class="s1">'</code><code class="s1">barh</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">ax</code><code class="o">=</code><code class="n">ax</code><code class="p">)</code><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">set_title</code><code class="p">(</code><code class="n">label</code><code class="p">)</code><code>
</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">tight_layout</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO7-3" href="#callout_exploring_data_with_pandas_CO7-3"><img src="3.png" alt="3" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO7-1" href="#co_exploring_data_with_pandas_CO7-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p><code>iteritems</code> returns an iterator for the <code>DataFrames</code> columns in form of (column_label, column) tuples.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO7-2" href="#co_exploring_data_with_pandas_CO7-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p><code>order</code> orders the column’s <code>Series</code> by first making a copy. It is the equivalent of <code>sort(inplace=False)</code>.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO7-3" href="#co_exploring_data_with_pandas_CO7-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p><code>tight_layout</code> should prevent label overlaps among the subplots. If you have any problems with <code>tight_layout</code>, see the end of <a data-type="xref" href="ch10.html#sect_mpl_titles">“Titles and Axes Labels”</a>.</p></dd>
</dl>

<p>This produces the plots in <a data-type="xref" href="#explore_nat_cat">Figure 11-10</a>.</p>

<p>A couple of interesting nuggets from <a data-type="xref" href="#explore_nat_cat">Figure 11-10</a> are the United States’ overwhelming dominance of the Economics prize, reflecting a post-WWII economic consensus, and France’s leadership of the Literature prize.</p>

<figure><div id="explore_nat_cat" class="figure">
<img src="dvpj_1110.png" alt="dvpj 1110" width="2000" height="2000">
<h6><span class="label">Figure 11-10. </span>Prizes by country and category</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Historical Trends in Prize Distribution"><div class="sect2" id="idm140319407440960">
<h2>Historical Trends in Prize Distribution</h2>

<p>Now that we know the aggregate prize stats by country, are there any interesting historical trends to the prize distribution? Let’s explore this with some line plots.</p>

<p>First, let’s increase the default font size to 20 points to make the plot labels more legible:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plt</code><code class="o">.</code><code class="n">rcParams</code><code class="p">[</code><code class="s1">'font.size'</code><code class="p">]</code> <code class="o">=</code> <code class="mi">20</code></pre>

<p>We’re going to be looking at prize distribution by year and country, so we’ll need a new unstacked <code>DataFrame</code> based on these two columns. As previously, we add a <code>new_index</code> to give continuous years:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">new_index</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">Index</code><code class="p">(</code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="mi">1901</code><code class="p">,</code> <code class="mi">2015</code><code class="p">),</code> <code class="n">name</code><code class="o">=</code><code class="s1">'year'</code><code class="p">)</code>

<code class="n">by_year_nat_sz</code> <code class="o">=</code> <code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">([</code><code class="s1">'year'</code><code class="p">,</code> <code class="s1">'country'</code><code class="p">])</code>\
    <code class="o">.</code><code class="n">size</code><code class="p">()</code><code class="o">.</code><code class="n">unstack</code><code class="p">()</code><code class="o">.</code><code class="n">reindex</code><code class="p">(</code><code class="n">new_index</code><code class="p">)</code></pre>

<p>The trend we’re interested in is the cumulative sum of Nobel Prizes by country over its history. We can further explore trends in individual categories, but for now we’ll look at the total for all. Pandas has a handy <code>cumsum</code> method for just this. Let’s take the United States column and plot it:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="s1">'United States'</code><code class="p">]</code><code class="o">.</code><code class="n">cumsum</code><code class="p">()</code><code class="o">.</code><code class="n">plot</code><code class="p">()</code></pre>

<p>This produces the chart in <a data-type="xref" href="#explore_cumsum_us">Figure 11-11</a>.</p>

<figure><div id="explore_cumsum_us" class="figure">
<img src="dvpj_1111.png" alt="dvpj 1111" width="1600" height="800">
<h6><span class="label">Figure 11-11. </span>Cumulative sum of US prize winners over time</h6>
</div></figure>

<p>The gaps in the line plot are where the fields are <code>NaN</code>, years when the US won no prizes. The <code>cumsum</code> algorithm returns <code>NaN</code> here. Let’s fill those in with a zero to remove the gaps:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="s1">'United States'</code><code class="p">]</code><code class="o">.</code><code class="n">fillna</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code>
    <code class="o">.</code><code class="n">cumsum</code><code class="p">()</code><code class="o">.</code><code class="n">plot</code><code class="p">()</code></pre>

<p>This produces the cleaner chart shown in <a data-type="xref" href="#explore_cumsum_us_gapless">Figure 11-12</a>.</p>

<figure><div id="explore_cumsum_us_gapless" class="figure">
<img src="dvpj_1112.png" alt="dvpj 1112" width="1600" height="800">
<h6><span class="label">Figure 11-12. </span>Cumulative sum of US prize winners over time</h6>
</div></figure>

<p>Let’s compare the US prize rate with that of the rest of the world:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_year_nat_sz</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="p">[</code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">country</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>
</code><code>    </code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">unstack</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">fillna</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code><code>
</code><code>
</code><code class="n">not_US</code><code> </code><code class="o">=</code><code> </code><code class="n">by_year_nat_sz</code><code class="o">.</code><code class="n">columns</code><code class="o">.</code><code class="n">tolist</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO8-1" href="#callout_exploring_data_with_pandas_CO8-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">not_US</code><code class="o">.</code><code class="n">remove</code><code class="p">(</code><code class="s1">'</code><code class="s1">United States</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>
</code><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="s1">'</code><code class="s1">Not US</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="n">not_US</code><code class="p">]</code><code class="o">.</code><code class="n">sum</code><code class="p">(</code><code class="n">axis</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO8-2" href="#callout_exploring_data_with_pandas_CO8-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="p">[</code><code class="s1">'</code><code class="s1">United States</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Not US</code><code class="s1">'</code><code class="p">]</code><code class="p">]</code><code>\
</code><code>    </code><code class="o">.</code><code class="n">cumsum</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO8-1" href="#co_exploring_data_with_pandas_CO8-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Gets the list of country column names and removes United States.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO8-2" href="#co_exploring_data_with_pandas_CO8-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Uses our list of non-US country names to create a <code>'Not_US'</code> column, the sum of all the prizes for countries in the <code>not_US</code> list.</p></dd>
</dl>

<p>This code produces the chart shown in <a data-type="xref" href="#explore_cumsum_us_notus">Figure 11-13</a>.</p>

<figure><div id="explore_cumsum_us_notus" class="figure">
<img src="dvpj_1113.png" alt="dvpj 1113" width="1600" height="800">
<h6><span class="label">Figure 11-13. </span>United States versus rest of world prize hauls</h6>
</div></figure>

<p>Where the <code>'Not_US'</code> haul shows a steady increase over the years of the prize, the US shows a rapid increase around the end of World War II. Let’s investigate that further, looking at regional differences. We’ll focus on the two or three largest winners for North America, Europe, and Asia:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_year_nat_sz</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="p">[</code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">country</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>\
</code><code>    </code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">unstack</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">reindex</code><code class="p">(</code><code class="n">new_index</code><code class="p">)</code><code class="o">.</code><code class="n">fillna</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code><code>
</code><code>
</code><code class="n">regions</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO9-1" href="#callout_exploring_data_with_pandas_CO9-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="p">{</code><code class="s1">'</code><code class="s1">label</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">N. America</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>      </code><code class="s1">'</code><code class="s1">countries</code><code class="s1">'</code><code class="p">:</code><code class="p">[</code><code class="s1">'</code><code class="s1">United States</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Canada</code><code class="s1">'</code><code class="p">]</code><code class="p">}</code><code class="p">,</code><code>
</code><code>    </code><code class="p">{</code><code class="s1">'</code><code class="s1">label</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">Europe</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>     </code><code class="s1">'</code><code class="s1">countries</code><code class="s1">'</code><code class="p">:</code><code class="p">[</code><code class="s1">'</code><code class="s1">United Kingdom</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Germany</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">France</code><code class="s1">'</code><code class="p">]</code><code class="p">}</code><code class="p">,</code><code>
</code><code>    </code><code class="p">{</code><code class="s1">'</code><code class="s1">label</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">Asia</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>     </code><code class="s1">'</code><code class="s1">countries</code><code class="s1">'</code><code class="p">:</code><code class="p">[</code><code class="s1">'</code><code class="s1">Japan</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Russia</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">India</code><code class="s1">'</code><code class="p">]</code><code class="p">}</code><code>
</code><code class="p">]</code><code>
</code><code>
</code><code class="k">for</code><code> </code><code class="n">region</code><code> </code><code class="ow">in</code><code> </code><code class="n">regions</code><code class="p">:</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO9-2" href="#callout_exploring_data_with_pandas_CO9-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="n">region</code><code class="p">[</code><code class="s1">'</code><code class="s1">label</code><code class="s1">'</code><code class="p">]</code><code class="p">]</code><code> </code><code class="o">=</code><code>\
</code><code>        </code><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="n">region</code><code class="p">[</code><code class="s1">'</code><code class="s1">countries</code><code class="s1">'</code><code class="p">]</code><code class="p">]</code><code class="o">.</code><code class="n">sum</code><code class="p">(</code><code class="n">axis</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code><code>
</code><code>
</code><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="p">[</code><code class="n">r</code><code class="p">[</code><code class="s1">'</code><code class="s1">label</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="k">for</code><code> </code><code class="n">r</code><code> </code><code class="ow">in</code><code> </code><code class="n">regions</code><code class="p">]</code><code class="p">]</code><code class="o">.</code><code class="n">cumsum</code><code class="p">(</code><code class="p">)</code><code>\
</code><code>  </code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO9-3" href="#callout_exploring_data_with_pandas_CO9-3"><img src="3.png" alt="3" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO9-1" href="#co_exploring_data_with_pandas_CO9-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Our continental country list created by selecting the biggest two or three winners in the three continents compared.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO9-2" href="#co_exploring_data_with_pandas_CO9-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Creates a new column with a region label for each <code>dict</code> in the <code>regions</code> list, summing its <code>countries</code> members.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO9-3" href="#co_exploring_data_with_pandas_CO9-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Plots the cumulative sum of all the new region columns.</p></dd>
</dl>

<p>This gives us the plot in <a data-type="xref" href="#explore_cumsum_regions">Figure 11-14</a>. The rate of Asia’s prize haul has increased slightly over the years, but the main point of note is North America’s huge increase in prizes around the mid-1940s, overtaking a declining Europe in total prizes around the mid-1980s.</p>

<figure><div id="explore_cumsum_regions" class="figure">
<img src="dvpj_1114.png" alt="dvpj 1114" width="1600" height="800">
<h6><span class="label">Figure 11-14. </span>Historical prize trends by region</h6>
</div></figure>

<p>Let’s improve the resolution of the previous national plots by summarizing the prize rates for the 16 biggest winners, excluding the outlying United States:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">COL_NUM</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code>
</code><code class="n">ROW_NUM</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code>
</code><code>
</code><code class="n">by_nat_sz</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="s1">'</code><code class="s1">country</code><code class="s1">'</code><code class="p">)</code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code>
</code><code class="n">by_nat_sz</code><code class="o">.</code><code class="n">sort_values</code><code class="p">(</code><code class="n">ascending</code><code class="o">=</code><code class="bp">False</code><code class="p">,</code><code>\
</code><code>    </code><code class="n">inplace</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code><code>  </code><a class="co" id="co_exploring_data_with_pandas_CO10-1" href="#callout_exploring_data_with_pandas_CO10-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">axes</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">COL_NUM</code><code class="p">,</code><code> </code><code class="n">ROW_NUM</code><code class="p">,</code><code>\</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO10-2" href="#callout_exploring_data_with_pandas_CO10-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="n">sharex</code><code class="o">=</code><code class="bp">True</code><code class="p">,</code><code> </code><code class="n">sharey</code><code class="o">=</code><code class="bp">True</code><code class="p">,</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO10-3" href="#callout_exploring_data_with_pandas_CO10-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">12</code><code class="p">,</code><code class="mi">12</code><code class="p">)</code><code class="p">)</code><code>
</code><code>
</code><code class="k">for</code><code> </code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">nat</code><code> </code><code class="ow">in</code><code> </code><code class="nb">enumerate</code><code class="p">(</code><code class="n">by_nat</code><code class="o">.</code><code class="n">index</code><code class="p">[</code><code class="mi">1</code><code class="p">:</code><code class="mi">17</code><code class="p">]</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO10-4" href="#callout_exploring_data_with_pandas_CO10-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
</code><code>    </code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">axes</code><code class="p">[</code><code class="n">i</code><code class="o">/</code><code class="n">COL_NUM</code><code class="p">,</code><code> </code><code class="n">i</code><code class="o">%</code><code class="n">ROW_NUM</code><code class="p">]</code><code>
</code><code>    </code><code class="n">by_year_nat_sz</code><code class="p">[</code><code class="n">nat</code><code class="p">]</code><code class="o">.</code><code class="n">cumsum</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">ax</code><code class="o">=</code><code class="n">ax</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO10-5" href="#callout_exploring_data_with_pandas_CO10-4"><img src="4.png" alt="4" width="12" height="12"></a><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">set_title</code><code class="p">(</code><code class="n">nat</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO10-1" href="#co_exploring_data_with_pandas_CO10-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Sorts our country groups from highest to lowest win hauls.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO10-2" href="#co_exploring_data_with_pandas_CO10-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Gets a 4×4 grid of axes with shared x- and y-axes for normalized comparison.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO10-3" href="#co_exploring_data_with_pandas_CO10-4"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Enumerates over the sorted index from second row (1), excluding the US (0).</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO10-4" href="#co_exploring_data_with_pandas_CO10-5"><img src="4.png" alt="4" width="12" height="12"></a></dt>
<dd><p>Selects the <code>nat</code> country name column and plots its cumulative sum of prizes on the grid axis <code>ax</code>.</p></dd>
</dl>

<p>This produces <a data-type="xref" href="#explore_nat_grid">Figure 11-15</a>, which shows some nations like Japan, Australia, and Israel on the rise historically, while others flatten off.</p>

<figure><div id="explore_nat_grid" class="figure">
<img src="dvpj_1115.png" alt="dvpj 1115" width="2400" height="2400">
<h6><span class="label">Figure 11-15. </span>Prize rates for the 16 largest national winners after the US</h6>
</div></figure>

<p class="pagebreak-before">Another good way to summarize national prize rates over time is by using a heatmap and dividing the totals by decade. This division is also known as <a href="https://en.wikipedia.org/wiki/Data_binning"><em>binning</em></a>, as it creates <em>bins</em> of data. Pandas has a handy <code>cut</code> method for just this job, taking a column of continuous values—in our case, Nobel Prize years—and returning ranges of a specified size. You can supply the <code>DataFrame</code>’s <code>groupby</code> method with the result of <code>cut</code> and it will group by the range of indexed values. The following code produces <a data-type="xref" href="#explore_heatmap_nat_year">Figure 11-16</a>.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">bins</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">year</code><code class="o">.</code><code class="n">min</code><code class="p">(</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">year</code><code class="o">.</code><code class="n">max</code><code class="p">(</code><code class="p">)</code><code class="p">,</code><code> </code><code class="mi">10</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO11-1" href="#callout_exploring_data_with_pandas_CO11-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="n">by_year_nat_binned</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code>
</code><code>    </code><code class="p">[</code><code class="n">pd</code><code class="o">.</code><code class="n">cut</code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">year</code><code class="p">,</code><code> </code><code class="n">bins</code><code class="p">,</code><code> </code><code class="n">precision</code><code class="o">=</code><code class="mi">0</code><code class="p">)</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">country</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>\</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO11-2" href="#callout_exploring_data_with_pandas_CO11-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">unstack</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">fillna</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code><code>
</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">figure</code><code class="p">(</code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">8</code><code class="p">)</code><code class="p">)</code><code>
</code><code>
</code><code class="n">sns</code><code class="o">.</code><code class="n">heatmap</code><code class="p">(</code><code>\
</code><code>  </code><code class="n">by_year_nat_binned</code><code class="p">[</code><code class="n">by_year_nat_binned</code><code class="o">.</code><code class="n">sum</code><code class="p">(</code><code class="n">axis</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">2</code><code class="p">]</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO11-3" href="#callout_exploring_data_with_pandas_CO11-3"><img src="3.png" alt="3" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO11-1" href="#co_exploring_data_with_pandas_CO11-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Gets our bin ranges for the decades from 1901 (1901, 1911, 1921…).</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO11-2" href="#co_exploring_data_with_pandas_CO11-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Cuts our Nobel Prize years into decades using the <code>bins</code> ranges with <code>precision</code> set to <code>0</code>, to give integer years.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO11-3" href="#co_exploring_data_with_pandas_CO11-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Before heatmapping, we filter for those countries with over two Nobel Prizes.</p></dd>
</dl>

<p><a data-type="xref" href="#explore_heatmap_nat_year">Figure 11-16</a> captures some interesting trends, such as Russia’s brief flourishing in the 1950s, which petered out around the 1980s.</p>

<p>Now that we’ve investigated the Nobel Prize nations, let’s turn our attention to the individual winners. Are there any interesting things we can discover about them using the data at hand?<a data-type="indexterm" data-primary="" data-startref="nat11" id="idm140319406559264"></a><a data-type="indexterm" data-primary="" data-startref="NPVdist11" id="idm140319406558416"></a><a data-type="indexterm" data-primary="" data-startref="DEnational11" id="idm140319406516160"></a></p>

<figure><div id="explore_heatmap_nat_year" class="figure">
<img src="dvpj_1116.png" alt="dvpj 1116" width="1200" height="1200">
<h6><span class="label">Figure 11-16. </span>Nations’ Nobel Prize hauls by decade</h6>
</div></figure>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Age and Life Expectancy of Winners"><div class="sect1" id="idm140319407440048">
<h1>Age and Life Expectancy of Winners</h1>

<p><a data-type="indexterm" data-primary="data exploration" data-secondary="age/life expectancy" id="DEage11"></a>We have the date of birth for all our winners and the date of death for 559 of them. Combined with the year in which they won their prizes, we have a fair amount of individual data to mine. Let’s investigate the age distribution of winners and try to glean some idea of the winners’ longevity.</p>








<section data-type="sect2" data-pdf-bookmark="Age at Time of Award"><div class="sect2" id="idm140319406511088">
<h2>Age at Time of Award</h2>

<p>In <a data-type="xref" href="ch09.html#chapter_cleaning">Chapter 9</a> we added an <code>'award_age'</code> column to our Nobel Prize dataset by subtracting the winners’ ages from their prize years. A quick and easy win is to use Pandas’ histogram plot to assess this distribution:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="p">[</code><code class="s1">'award_age'</code><code class="p">]</code><code class="o">.</code><code class="n">hist</code><code class="p">(</code><code class="n">bins</code><code class="o">=</code><code class="mi">20</code><code class="p">)</code></pre>

<p>Here we require that the age data be divided into 20 bins. This produces <a data-type="xref" href="#explore_hist_award_age">Figure 11-17</a>, showing that the early 60s is a sweet spot for the prize and if you haven’t achieved it by 100, it probably isn’t going to happen. Note the outlier around 20, which is the recently awarded 17-year-old recipient of the Peace Prize, <a href="https://en.wikipedia.org/wiki/Malala_Yousafzai">Malala Yousafzai</a>.</p>

<figure><div id="explore_hist_award_age" class="figure">
<img src="dvpj_1117.png" alt="dvpj 1117" width="1600" height="800">
<h6><span class="label">Figure 11-17. </span>Distribution of ages at time of award</h6>
</div></figure>

<p>We can use Seaborn’s <code>distplot</code> to get a better feel for the distribution, adding a kernel density estimate (KDE)<sup><a data-type="noteref" id="idm140319406497792-marker" href="ch11.html#idm140319406497792">2</a></sup> to the histogram. The following one-liner produces <a data-type="xref" href="#explore_hist_award_age_kde">Figure 11-18</a>, showing that our sweet spot is around 60 years of age:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">sns</code><code class="o">.</code><code class="n">distplot</code><code class="p">(</code><code class="n">df</code><code class="p">[</code><code class="s1">'award_age'</code><code class="p">])</code></pre>

<figure><div id="explore_hist_award_age_kde" class="figure">
<img src="dvpj_1118.png" alt="dvpj 1118" width="1600" height="800">
<h6><span class="label">Figure 11-18. </span>Distribution of ages at time of award with KDE superimposed</h6>
</div></figure>

<p>A <a href="https://en.wikipedia.org/wiki/Box_plot">box plot</a> is a good way of visualizing continuous data, showing the quartiles, the first and third marking the edges of the box and the second quartile (or median average) marking the line in the box. Generally, as in <a data-type="xref" href="#explore_boxplot_age_gen">Figure 11-19</a>, the horizontal end lines (known as the whisker ends) indicate the max and min of the data.  Let’s use a Seaborn box plot and divide the prizes by gender:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">sns</code><code class="o">.</code><code class="n">boxplot</code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">gender</code><code class="p">,</code> <code class="n">df</code><code class="o">.</code><code class="n">award_age</code><code class="p">)</code></pre>

<p>This produces <a data-type="xref" href="#explore_boxplot_age_gen">Figure 11-19</a>, which shows that the distributions by gender are similar, with women having a slightly lower average age. Note that with far fewer female prize winners, their statistics are subject to a good deal more uncertainty.</p>

<figure><div id="explore_boxplot_age_gen" class="figure">
<img src="dvpj_1119.png" alt="dvpj 1119" width="1600" height="800">
<h6><span class="label">Figure 11-19. </span>Ages of prize winners by gender</h6>
</div></figure>

<p>Seaborn’s rather nice violinplot combines the conventional box plot with a kernel density estimation to give a more refined view of the breakdown by age and gender. The following code produces <a data-type="xref" href="#explore_violin_age_gen">Figure 11-20</a>.<a data-type="indexterm" data-primary="" data-startref="NPVagetime11" id="idm140319406356496"></a></p>

<pre data-type="programlisting" data-code-language="python"><code class="n">sns</code><code class="o">.</code><code class="n">violinplot</code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">gender</code><code class="p">,</code> <code class="n">df</code><code class="o">.</code><code class="n">award_age</code><code class="p">)</code></pre>

<figure><div id="explore_violin_age_gen" class="figure">
<img src="dvpj_1120.png" alt="dvpj 1120" width="1600" height="800">
<h6><span class="label">Figure 11-20. </span>Violinplots of prize-age distribution by gender</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Life Expectancy of Winners"><div class="sect2" id="idm140319406510464">
<h2>Life Expectancy of Winners</h2>

<p>Now let’s look at the longevity of Nobel Prize winners, by subtracting the available dates of death from their respective dates of birth. We’ll store this data in a new <code>'age_at_death'</code> column:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="p">[</code><code class="s1">'</code><code class="s1">age_at_death</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">date_of_death</code><code> </code><code class="o">-</code><code> </code><code class="n">df</code><code class="o">.</code><code class="n">date_of_birth</code><code class="p">)</code><code>\
</code><code>                     </code><code class="o">.</code><code class="n">dt</code><code class="o">.</code><code class="n">days</code><code class="o">/</code><code class="mi">365</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO12-1" href="#callout_exploring_data_with_pandas_CO12-1"><img src="1.png" alt="1" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO12-1" href="#co_exploring_data_with_pandas_CO12-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p><code>datetime64</code> data can be added and subtracted in a sensible fashion, producing a Pandas <code>timedelta</code> column. We can use its <code>dt</code> method to get the interval in days, dividing this by 365 to get the age at death as a float.</p></dd>
</dl>

<p>We make a copy of the <code>'age_at_death'</code> column,<sup><a data-type="noteref" id="idm140319406326176-marker" href="ch11.html#idm140319406326176">3</a></sup> removing all empty <code>NaN</code> rows.  This can then be used to make the histogram and KDE shown in <a data-type="xref" href="#explore_hist_aad">Figure 11-21</a>.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">age_at_death</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="p">[</code><code class="n">df</code><code class="o">.</code><code class="n">age_at_death</code><code class="o">.</code><code class="n">notnull</code><code class="p">(</code><code class="p">)</code><code class="p">]</code><code class="o">.</code><code class="n">age_at_death</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO13-1" href="#callout_exploring_data_with_pandas_CO13-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="n">sns</code><code class="o">.</code><code class="n">distplot</code><code class="p">(</code><code class="n">age_at_death</code><code class="p">,</code><code> </code><code class="n">bins</code><code class="o">=</code><code class="mi">40</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO13-1" href="#co_exploring_data_with_pandas_CO13-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Removes all <code>NaN</code>s to clean the data and reduce plotting errors (e.g., <code>distplot</code> fails with <code>NaN</code>s).</p></dd>
</dl>

<figure><div id="explore_hist_aad" class="figure">
<img src="dvpj_1121.png" alt="dvpj 1121" width="1600" height="800">
<h6><span class="label">Figure 11-21. </span>Life expectancy of the Nobel Prize winners</h6>
</div></figure>

<p><a data-type="xref" href="#explore_hist_aad">Figure 11-21</a> shows the Nobel Prize winners to be a remarkably long-lived bunch, with an average age in the early 80s. This is all the more impressive given that the large majority of winners are men, who have considerably lower average life expectancies in the general population than women. One contributary factor to this longevity is the selection bias we saw earlier. Nobel Prize winners aren’t generally honored until they’re in their late 50s and 60s, which removes the subpopulation who died before having the chance to be acknowledged, pushing up the longevity figures.</p>

<p><a data-type="xref" href="#explore_hist_aad">Figure 11-21</a> shows some centenarians among the prize winners. Let’s find them:</p>

<pre data-type="programlisting">df[df.age_at_death &gt; 100][['name', 'category', 'year']]
Out:
                     name                category  year
68   Rita Levi-Montalcini  Physiology or Medicine  1986
103          Ronald Coase               Economics  1991</pre>

<p>Now let’s superimpose a couple of KDEs to show differences in mortality for male and female recipients:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df2</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="p">[</code><code class="n">df</code><code class="o">.</code><code class="n">age_at_death</code><code class="o">.</code><code class="n">notnull</code><code class="p">(</code><code class="p">)</code><code class="p">]</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO14-1" href="#callout_exploring_data_with_pandas_CO14-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">sns</code><code class="o">.</code><code class="n">kdeplot</code><code class="p">(</code><code class="n">df2</code><code class="p">[</code><code class="n">df2</code><code class="o">.</code><code class="n">gender</code><code> </code><code class="o">==</code><code> </code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">]</code><code>
</code><code>    </code><code class="o">.</code><code class="n">age_at_death</code><code class="p">,</code><code> </code><code class="n">shade</code><code class="o">=</code><code class="bp">True</code><code class="p">,</code><code> </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">sns</code><code class="o">.</code><code class="n">kdeplot</code><code class="p">(</code><code class="n">df2</code><code class="p">[</code><code class="n">df2</code><code class="o">.</code><code class="n">gender</code><code> </code><code class="o">==</code><code> </code><code class="s1">'</code><code class="s1">female</code><code class="s1">'</code><code class="p">]</code><code>
</code><code>    </code><code class="o">.</code><code class="n">age_at_death</code><code class="p">,</code><code> </code><code class="n">shade</code><code class="o">=</code><code class="bp">True</code><code class="p">,</code><code> </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">female</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">legend</code><code class="p">(</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO14-1" href="#co_exploring_data_with_pandas_CO14-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Creates a <code>DataFrame</code> with only valid <code>'age_at_death'</code> fields.</p></dd>
</dl>

<p>This produces <a data-type="xref" href="#explore_aad_kde">Figure 11-22</a>, which, allowing for the small number of female winners and flatter distribution, shows the male and female averages to be close. Female Nobel Prize winners seem to live relatively shorter lives than their counterparts in the general population.</p>

<figure><div id="explore_aad_kde" class="figure">
<img src="dvpj_1122.png" alt="dvpj 1122" width="1600" height="800">
<h6><span class="label">Figure 11-22. </span>Nobel Prize winner life expectancies by gender</h6>
</div></figure>

<p>A violinplot provides another perspective, shown in <a data-type="xref" href="#explore_aad_violin">Figure 11-23</a>.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">sns</code><code class="o">.</code><code class="n">violinplot</code><code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">gender</code><code class="p">,</code> <code class="n">age_at_death</code><code class="p">)</code></pre>

<figure><div id="explore_aad_violin" class="figure">
<img src="dvpj_1123.png" alt="dvpj 1123" width="1600" height="800">
<h6><span class="label">Figure 11-23. </span>Winner life expectancies by gender</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Increasing Life Expectancies over Time"><div class="sect2" id="idm140319406414160">
<h2>Increasing Life Expectancies over Time</h2>

<p>Let’s do a little historical demographic analysis by seeing if there’s a correlation between the date of birth of our Nobel Prize winners and their life expectancy. We’ll use one of Seaborn’s <code>lmplot</code>s to provide a scatter plot and line-fitting with confidence intervals (see <a data-type="xref" href="ch10.html#mpl_seaborn">“Seaborn”</a>).</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df_temp</code><code class="o">=</code><code class="n">df</code><code class="p">[</code><code class="n">df</code><code class="o">.</code><code class="n">age_at_death</code><code class="o">.</code><code class="n">notnull</code><code class="p">(</code><code class="p">)</code><code class="p">]</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO15-1" href="#callout_exploring_data_with_pandas_CO15-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">DataFrame</code><code class="p">(</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO15-2" href="#callout_exploring_data_with_pandas_CO15-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="p">{</code><code class="s1">'</code><code class="s1">age at death</code><code class="s1">'</code><code class="p">:</code><code class="n">df_temp</code><code class="o">.</code><code class="n">age_at_death</code><code class="p">,</code><code>
</code><code>     </code><code class="s1">'</code><code class="s1">date of birth</code><code class="s1">'</code><code class="p">:</code><code class="n">df_temp</code><code class="o">.</code><code class="n">date_of_birth</code><code class="o">.</code><code class="n">dt</code><code class="o">.</code><code class="n">year</code><code class="p">}</code><code class="p">)</code><code>
</code><code class="n">sns</code><code class="o">.</code><code class="n">lmplot</code><code class="p">(</code><code class="s1">'</code><code class="s1">date of birth</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">age at death</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">data</code><code class="p">,</code><code>\
</code><code>  </code><code class="n">size</code><code class="o">=</code><code class="mi">6</code><code class="p">,</code><code> </code><code class="n">aspect</code><code class="o">=</code><code class="mf">1.5</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO15-1" href="#co_exploring_data_with_pandas_CO15-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Creates a temporary <code>DataFrame</code>, removing all the rows with no <code>'age_at_death'</code> field.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO15-2" href="#co_exploring_data_with_pandas_CO15-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Creates a new <code>DataFrame</code> with only the two columns of interest from the refined <code>df_temp</code>. We grab only the year from the <code>date_of_birth</code>, using its <a href="http://pandas.pydata.org/pandas-docs/stable/basics.html#basics-dt-accessors"><code>dt</code> accessor</a>.</p></dd>
</dl>

<p>This produces <a data-type="xref" href="#explore_birth_death">Figure 11-24</a>, showing an increase in life expectancy of a decade or so over the prize’s duration.<a data-type="indexterm" data-primary="" data-startref="DEage11" id="idm140319406002192"></a><a data-type="indexterm" data-primary="" data-startref="NPVexpect11" id="idm140319405987872"></a></p>

<figure><div id="explore_birth_death" class="figure">
<img src="dvpj_1124.png" alt="dvpj 1124" width="1800" height="1200">
<h6><span class="label">Figure 11-24. </span>Correlating date of birth with age at death</h6>
</div></figure>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="The Nobel Diaspora"><div class="sect1" id="idm140319405985152">
<h1>The Nobel Diaspora</h1>

<p><a data-type="indexterm" data-primary="data exploration" data-secondary="birth vs. current country" id="DEbirth11"></a>While cleaning our Nobel Prize dataset in <a data-type="xref" href="ch09.html#chapter_cleaning">Chapter 9</a>, we found duplicate entries recording the winner’s place of birth and country at time of winning. We preserved these, giving us 104 winners whose country at time of winning was different from their country of birth. Is there a story to tell here?</p>

<p>A good way to visualize the movement patterns from the winners’ country of birth to their adopted country is by using a heatmap to show all <code>born_in</code>/<code>country</code> pairs. The following code produces the heatmap in <a data-type="xref" href="#explore_diaspora">Figure 11-25</a>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">by_bornin_nat</code><code> </code><code class="o">=</code><code> </code><code class="n">df</code><code class="p">[</code><code class="n">df</code><code class="o">.</code><code class="n">born_in</code><code class="o">.</code><code class="n">notnull</code><code class="p">(</code><code class="p">)</code><code class="p">]</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code>\</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO16-1" href="#callout_exploring_data_with_pandas_CO16-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="p">[</code><code class="s1">'</code><code class="s1">born_in</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">country</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code class="o">.</code><code class="n">size</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">unstack</code><code class="p">(</code><code class="p">)</code><code>
</code><code class="n">by_bornin_nat</code><code class="o">.</code><code class="n">index</code><code class="o">.</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">Born in</code><code class="s1">'</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO16-2" href="#callout_exploring_data_with_pandas_CO16-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code class="n">by_bornin_nat</code><code class="o">.</code><code class="n">columns</code><code class="o">.</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">Moved to</code><code class="s1">'</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">figure</code><code class="p">(</code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">8</code><code class="p">)</code><code class="p">)</code><code>
</code><code>
</code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">sns</code><code class="o">.</code><code class="n">heatmap</code><code class="p">(</code><code class="n">by_bornin_nat</code><code class="p">,</code><code> </code><code class="n">vmin</code><code class="o">=</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="n">vmax</code><code class="o">=</code><code class="mi">8</code><code class="p">)</code><code> </code><a class="co" id="co_exploring_data_with_pandas_CO16-3" href="#callout_exploring_data_with_pandas_CO16-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_title</code><code class="p">(</code><code class="s1">'</code><code class="s1">The Nobel Diaspora</code><code class="s1">'</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_exploring_data_with_pandas_CO16-1" href="#co_exploring_data_with_pandas_CO16-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Selects all rows with a <code>'born_in'</code> field, and forms groups on this and the country column.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO16-2" href="#co_exploring_data_with_pandas_CO16-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>We rename the row index and column  names to make them more descriptive.</p></dd>
<dt><a class="co" id="callout_exploring_data_with_pandas_CO16-3" href="#co_exploring_data_with_pandas_CO16-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Seaborn’s <code>heatmap</code> attempts to set the correct bounds for the data, but in this case, we must manually adjust the limits (<code>vmin</code> and <code>vmax</code>) to see all the cells.</p></dd>
</dl>

<p><a data-type="xref" href="#explore_diaspora">Figure 11-25</a> shows some interesting patterns, which tell a tale of persecution and sanctuary. First, the United States is the overwhelming recipient of relocated Nobel winners, followed by the United Kingdom. Note that the biggest contingents for both (except cross-border traffic from Canada) are from Germany. Italy, Hungary, and Austria are the next largest groups. Examining the individuals in these groups shows that the majority were displaced as a result of the rise of antisemitic fascist regimes in the run-up to World War II and the increasing persecution of Jewish minorities.</p>

<figure><div id="explore_diaspora" class="figure">
<img src="dvpj_1125.png" alt="dvpj 1125" width="1600" height="1600">
<h6><span class="label">Figure 11-25. </span>The Nobel Prize diaspora</h6>
</div></figure>

<p>To take an example, all four of the Nobel winners who moved from Germany to the United Kingdom were German research scientists with Jewish ancestry who moved in response to the Nazis’ rise to power:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">df</code><code class="p">[(</code><code class="n">df</code><code class="o">.</code><code class="n">born_in</code> <code class="o">==</code> <code class="s1">'Germany'</code><code class="p">)</code> <code class="o">&amp;</code> <code class="p">(</code><code class="n">df</code><code class="o">.</code><code class="n">country</code> <code class="o">==</code> <code class="s1">'United Kingdom'</code><code class="p">)]</code>
    <code class="p">[[</code><code class="s1">'name'</code><code class="p">,</code> <code class="s1">'date_of_birth'</code><code class="p">,</code> <code class="s1">'category'</code><code class="p">]]</code>

<code class="n">Out</code><code class="p">:</code>
                  <code class="n">name</code> <code class="n">date_of_birth</code>                <code class="n">category</code>
<code class="mi">976</code>   <code class="n">Ernst</code> <code class="n">Boris</code> <code class="n">Chain</code>    <code class="mi">1906</code><code class="o">-</code><code class="mo">06</code><code class="o">-</code><code class="mi">19</code>  <code class="n">Physiology</code> <code class="ow">or</code> <code class="n">Medicine</code>
<code class="mi">1342</code>   <code class="n">Hans</code> <code class="n">Adolf</code> <code class="n">Krebs</code>    <code class="mi">1900</code><code class="o">-</code><code class="mi">08</code><code class="o">-</code><code class="mi">25</code>  <code class="n">Physiology</code> <code class="ow">or</code> <code class="n">Medicine</code>
<code class="mi">1344</code>           <code class="n">Max</code> <code class="n">Born</code>    <code class="mi">1882</code><code class="o">-</code><code class="mi">12</code><code class="o">-</code><code class="mi">11</code>                 <code class="n">Physics</code>
<code class="mi">1360</code>       <code class="n">Bernard</code> <code class="n">Katz</code>    <code class="mi">1911</code><code class="o">-</code><code class="mo">03</code><code class="o">-</code><code class="mi">26</code>  <code class="n">Physiology</code> <code class="ow">or</code> <code class="n">Medicine</code></pre>

<p>Ernst Chain pioneered the industrial production of penicillin. Hans Krebs discovered the Krebs cycle, one of the most important discoveries in biochemistry, which regulates the energy production of cells. Max Born was one of the pioneers of quantum mechanics, and Bernard Katz uncovered the fundamental properties of synaptic junctions in neurons.</p>

<p>There are many such illustrious names among the winning emigrants. One interesting discovery is the number of prize winners who were part of the famous <a href="https://en.wikipedia.org/wiki/Kindertransport">Kindertransport</a>, an organized rescue effort that took place nine months before the outbreak of WWII and saw 10,000 Jewish children from Germany, Austria, Czechoslovakia, and Poland transported to the United Kingdom. Of these children, four went on to win a Nobel Prize.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idm140319405984560">
<h1>Summary</h1>

<p>In this chapter, we explored our Nobel Prize dataset, probing the key fields of gender, category, country, and year (of prize) looking for interesting trends and stories we can tell or enable visually. We used a fair number of Matplotlib (by way of Pandas) and Seaborn’s plots, from basic bar charts to more complicated statistical summaries like violinplots and heatmaps. Mastery of these tools and the others in the Python chart armory will allow you to quickly get the feel of your datasets, which is a prerequisite to building a visualization around them. We found more than enough stories in the data to suggest a web visualization. In the next chapter we will imagine and design just such a Nobel Prize winner visualization, cherry-picking the nuggets gained in this chapter.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm140319408767376"><sup><a href="ch11.html#idm140319408767376-marker">1</a></sup> Anecdotally, no one I have asked in person or in talk audiences has known the name of the <em>other</em> female Nobel Prize winner for Physics.</p><p data-type="footnote" id="idm140319406497792"><sup><a href="ch11.html#idm140319406497792-marker">2</a></sup> See <a href="https://en.wikipedia.org/wiki/Kernel_density_estimation">Wikipedia</a> for details. Essentially the data is smoothed and a probability density function derived.</p><p data-type="footnote" id="idm140319406326176"><sup><a href="ch11.html#idm140319406326176-marker">3</a></sup> We are ignoring leap years and other subtle, complicating factors in deriving years from days.</p></div></div></section></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch10.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">10. Visualizing Data with Matplotlib</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/part04.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">IV. Delivering the Data</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag">
        
        
          
          

          
            <p>You have 7 days left in your trial, Flankpeter. Subscribe today. <a href="/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          
        
        

      </div>

    
    



        
      </div>
      




  <footer class="pagefoot t-pagefoot">
    <a href="#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class='js-footer-nav'>
      
        <li><a class="t-recommendations-footer" href="/r/">Recommended</a></li>
      
      <li>
      
      <a class="t-queue-footer" href="/playlists/">Playlists</a>
      
      </li>
      
        <li><a class="t-recent-footer" href="/history/">History</a></li>
        <li><a class="t-topics-footer" href="/topics?q=*&limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="/u/">Settings</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">&#169; 2018 <a href="https://www.safaribooksonline.com" target="_blank">Safari</a>.</span>
    <a href="/terms/">Terms of Service</a> /
    <a href="/privacy/">Privacy Policy</a>
  </footer>




    

    <script src="/jsi18n/web/" charset="utf-8"></script>
    <script src="/library/jsi18n/appcache/" charset="utf-8"></script>
  </body>
</html>
