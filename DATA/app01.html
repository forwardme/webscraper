<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/app01.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="app01.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/app01.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="app01.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><!--<![endif]--><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="author" content="Safari Books Online" /><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491920565"/><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"/><meta property="twitter:account_id" content="4503599627559754" /><link rel="apple-touch-icon" href="/static/images/apple-touch-icon.0c29511d2d72.png"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'><title>A. Moving from Development to Production - Data Visualization with Python and JavaScript</title><link rel="stylesheet" href="/static/CACHE/css/a04cd81b09cd.css" type="text/css" /><link rel="stylesheet" type="text/css" href="/static/css/annotator.ef38b0457d7b.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td,#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content canvas,#sbo-rt-content details,#sbo-rt-content embed,#sbo-rt-content figure,#sbo-rt-content figcaption,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content output,#sbo-rt-content ruby,#sbo-rt-content section,#sbo-rt-content summary,#sbo-rt-content time,#sbo-rt-content mark,#sbo-rt-content audio,#sbo-rt-content video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content details,#sbo-rt-content figcaption,#sbo-rt-content figure,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content section{display:block}#sbo-rt-content div{line-height:1}#sbo-rt-content ol,#sbo-rt-content ul{list-style:none}#sbo-rt-content blockquote,#sbo-rt-content q{quotes:none}#sbo-rt-content blockquote:before,#sbo-rt-content blockquote:after,#sbo-rt-content q:before,#sbo-rt-content q:after{content:none}#sbo-rt-content table{border-collapse:collapse;border-spacing:0}@page{margin:5px !important}#sbo-rt-content p{margin:10px 0 0;line-height:125%;text-align:left}#sbo-rt-content p.byline{text-align:left;margin:-33px auto 35px;font-style:italic;font-weight:bold}#sbo-rt-content div.preface p+p.byline{margin:1em 0 0}#sbo-rt-content div.preface p.byline+p.byline{margin:0}#sbo-rt-content div.sect1>p.byline{margin:-.25em 0 1em}#sbo-rt-content div.sect1>p.byline+p.byline{margin-top:-1em}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content span.lineannotation{font-style:italic;color:#a62a2a;font-family:serif}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#fff}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content span.label,#sbo-rt-content span.keep-together{font-size:inherit;font-weight:inherit}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center !important;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;border:1px solid #DCDCDC;background-color:#F7F7F7;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content div.sidebar ul,#sbo-rt-content aside[data-type="sidebar"] ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:1.25em !important}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div[data-type="tip"],#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div[data-type="note"],#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div[data-type="warning"],#sbo-rt-content div.sidebar div[data-type="caution"],#sbo-rt-content div.sidebar div[data-type="important"]{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content aside[data-type="sidebar"] p.byline{font-size:90%;font-weight:bold;font-style:italic;text-align:center;text-indent:0;margin:5px auto 6px;page-break-after:avoid}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;text-align:left !important;text-transform:none !important;font-family:serif !important;margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:2em;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"] h2,#sbo-rt-content section[data-type="titlepage"] p.subtitle,#sbo-rt-content section[data-type="titlepage"] p[data-type="subtitle"]{font-size:1.3em;font-weight:normal;text-align:center;margin-top:.5em;color:#555}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"],#sbo-rt-content section[data-type="titlepage"] p.author{font-size:1.3em;font-family:serif !important;font-weight:bold;margin:50px 0 !important;text-align:center}#sbo-rt-content section[data-type="titlepage"] p.edition{text-align:center;text-transform:uppercase;margin-top:2em}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content ul.stafflist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.stafflist li{list-style-type:none;padding:5px 0}#sbo-rt-content ul.printings li{list-style-type:none}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif !important;font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif !important;margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10px}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif !important}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-style:italic;margin:.75em 0 0 !important}#sbo-rt-content blockquote div.attribution,#sbo-rt-content blockquote p[data-type="attribution"]{margin:5px 0 10px 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p,#sbo-rt-content blockquote p[data-type="attribution"]{font-style:normal;margin-top:5px}#sbo-rt-content blockquote div.attribution p:before,#sbo-rt-content blockquote p[data-type="attribution"]:before{font-style:normal;content:"—";-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div[data-type="footnotes"]{border-top:1px solid black;margin-top:1.5em}#sbo-rt-content sub,#sbo-rt-content sup{font-size:75%;line-height:0;position:relative}#sbo-rt-content sup{top:-.5em}#sbo-rt-content sub{bottom:-.25em}#sbo-rt-content div.refentry p.refname{font-size:1em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin-bottom:5px;overflow:auto;width:100%}#sbo-rt-content div.refentry{width:100%;display:block;margin-top:2em}#sbo-rt-content div.refsynopsisdiv{display:block;clear:both}#sbo-rt-content div.refentry header{page-break-inside:avoid !important;display:block;break-inside:avoid !important;padding-top:0;border-bottom:1px solid #000}#sbo-rt-content div.refsect1 h6{font-size:.9em;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content div.refsect1{margin-top:3em}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dd{margin-left:1.5em !important;margin-bottom:.25em}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ul{list-style-type:disc}#sbo-rt-content ul ul{list-style-type:square}#sbo-rt-content ul ul ul{list-style-type:circle}#sbo-rt-content ol{list-style-type:decimal}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ol ul{list-style-type:disc}#sbo-rt-content ol ul ol{list-style-type:decimal}#sbo-rt-content ul ol{list-style-type:decimal}#sbo-rt-content ul ol ul{list-style-type:disc}#sbo-rt-content ol,#sbo-rt-content ul{list-style-position:outside;margin:15px 0 15px 1.25em}#sbo-rt-content ol li,#sbo-rt-content ul li{margin:.5em 0 .65em;line-height:125%}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist,#sbo-rt-content ul.simplelist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.simplelist li{list-style-type:none;padding:5px 0}#sbo-rt-content table.simplelist td{border:none}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img,#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip ol,#sbo-rt-content div.tip ul,#sbo-rt-content div[data-type="tip"] ol,#sbo-rt-content div[data-type="tip"] ul,#sbo-rt-content div.note ol,#sbo-rt-content div.note ul,#sbo-rt-content div[data-type="note"] ol,#sbo-rt-content div[data-type="note"] ul,#sbo-rt-content div.warning ol,#sbo-rt-content div.warning ul,#sbo-rt-content div[data-type="warning"] ol,#sbo-rt-content div[data-type="warning"] ul,#sbo-rt-content div[data-type="caution"] ol,#sbo-rt-content div[data-type="caution"] ul,#sbo-rt-content div[data-type="important"] ol,#sbo-rt-content div[data-type="important"] ul{margin-left:1.5em !important}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1,#sbo-rt-content div[data-type="important"] h6{font-weight:bold;font-size:110%;font-family:sans-serif !important;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div[data-type="note"] h1{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3,#sbo-rt-content div.safarienabled h6{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px 0 30px 0 !important;max-width:95%;border:none !important;background:none;display:table !important}#sbo-rt-content div.table,#sbo-rt-content div.informaltable,#sbo-rt-content table{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{display:table-cell;padding:.3em;text-align:left;vertical-align:middle;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif;font-size:1em;margin:10px 0 10px 0 !important;padding:0;page-break-after:avoid;text-align:left !important}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation,#sbo-rt-content div[data-type="equation"]{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title,#sbo-rt-content div[data-type="equation"] h5{font-style:italic;font-weight:normal;font-family:serif !important;font-size:90%;margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul,#sbo-rt-content div[data-type="index"] ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:1em}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif;text-align:left}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content span.gray{color:#4C4C4C}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781491920565/chapter/app01.html",
          "book_id": "9781491920565",
          "chapter_uri": "app01.html",
          "position": 41.8511659231,
          "user_uuid": "fee1bd59-4e02-48a4-a7b4-152ec4c157ac",
          "next_chapter_uri": "/library/view/data-visualization-with/9781491920565/ix01.html"
        
      },
      title: "Data Visualization with Python and JavaScript",
      author_list: "Kyran Dale",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false,
      show_ios_app_teaser: false
    };
    // ]]></script><script src="/static/js/src/modernizr.js"></script><script>
    
      
       window.PUBLIC_ANNOTATIONS = false;
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

    
      window.PRIVACY_CONTROL_SWITCH = true;
    

    
      window.PUBLISHER_PAGES = true;
    

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "https://www.safaribooksonline.com/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://www.safaribooksonline.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/app01.html"/><meta name="description" content=" Appendix A. Moving from Development to Production In this appendix, we’ll skim the surface of some big subjects and hopefully provide a good starting point and some sensible directions ... "><meta property="og:title" content="A. Moving from Development to Production" /><meta itemprop="isPartOf" content="/library/view/data-visualization-with/9781491920565/" /><meta itemprop="name" content="A. Moving from Development to Production" /><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/app01.html" /><meta property="og:site_name" content="Safari" /><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491920565/" /><meta property="og:description" itemprop="description" content=" Appendix A. Moving from Development to Production In this appendix, we’ll skim the surface of some big subjects and hopefully provide a good starting point and some sensible directions ... "><meta itemprop="inLanguage" content="en" /><meta itemprop="publisher" content="O&#39;Reilly Media, Inc." /><meta property="og:type" content="book" /><meta property="og:book:isbn" itemprop="isbn" content="9781491920510" /><meta property="og:book:author" itemprop="author" content="Kyran Dale" /><meta property="og:book:tag" itemprop="about" content="JavaScript" /><meta property="og:book:tag" itemprop="about" content="Python" /><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><script>
    window.ENABLE_BOWERBIRD_COLLECTIONS = true;
  </script><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script type="text/javascript">
    (function(i,s,o,g,r,a,m) {
      i['GoogleAnalyticsObject']=r;
      i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
      a=s.createElement(o),m=s.getElementsByTagName(o)[0];
      a.async=1;
      a.src=g;
      m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    var matches = document.cookie.match(/BrowserCookie\s*=\s*([a-f0-9\-]{36})/),
      user_uuid = null;

    if (matches && matches.length === 2) {
      user_uuid = matches[1];
    }

  
    ga('create', 'UA-39299553-7', {'userId': 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac' });
  

  
    
      ga('set', 'dimension1', 'Trial');
    
  

  ga('set', 'dimension6', user_uuid);

  
    ga('set', 'dimension2', 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac');
    
  

  

  

  //enable enhanced link tracking
  ga('require', 'linkid', 'linkid.js');

  // reading interface will track pageviews itself
  if (document.location.pathname.indexOf("/library/view") !== 0) {
    ga('send', 'pageview');
  }
  </script><script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
  </script><script defer src="/static/js/build/vendor.e2e622a103f9.js"></script><script defer src="/static/js/build/reader.84feb506aa44.js"></script></head>


<body class="reading sidenav nav-collapsed  scalefonts">

    
  
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        





<a href="#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"/><rect x="10" y="12" width="3" height="7"/><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"/><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"/></g></svg><span>Safari Home</span></a></li><li><a href="/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z"/></g></svg><span>Recommended</span></a></li><li><a href="/playlists/" class="t-queue-nav l0 nav-icn None"><?xml version="1.0" encoding="UTF-8"?><svg width="21px" height="17px" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --><title>icon_Playlist_sml</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon_Playlist_sml" fill-rule="nonzero" fill="#000000"><g id="playlist-icon"><g id="Group-6"><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle></g><g id="Group-5" transform="translate(0.000000, 7.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g><g id="Group-5-Copy" transform="translate(0.000000, 14.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g></g></g></g></svg><span>
                 Playlists
              </span></a></li><li class="search"><a href="#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"/></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"/></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z"/></g></svg><span>History</span></a></li><li><a href="/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" width="20" height="20" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z"/></g></svg><span>Topics</span></a></li><li><a href="/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z"/></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>offers icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M35.9 20.6L27 15.5C26.1 15 24.7 15 23.7 15.5L14.9 20.6C13.9 21.1 13.2 22.4 13.2 23.4L13.2 41.4C13.2 42.4 13.9 43.7 14.9 44.2L23.3 49C24.2 49.5 25.6 49.5 26.6 49L35.9 43.6C36.8 43.1 37.6 41.8 37.6 40.8L37.6 23.4C37.6 22.4 36.8 21.1 35.9 20.6L35.9 20.6ZM40 8.2C39.1 7.6 37.6 7.6 36.7 8.2L30.2 11.9C29.3 12.4 29.3 13.2 30.2 13.8L39.1 18.8C40 19.4 40.7 20.6 40.7 21.7L40.7 39C40.7 40.1 41.4 40.5 42.4 40L48.2 36.6C49.1 36.1 49.8 34.9 49.8 33.8L49.8 15.6C49.8 14.6 49.1 13.3 48.2 12.8L40 8.2 40 8.2ZM27 10.1L33.6 6.4C34.5 5.9 34.5 5 33.6 4.5L26.6 0.5C25.6 0 24.2 0 23.3 0.5L16.7 4.2C15.8 4.7 15.8 5.6 16.7 6.1L23.7 10.1C24.7 10.6 26.1 10.6 27 10.1ZM10.1 21.7C10.1 20.6 10.8 19.4 11.7 18.8L20.6 13.8C21.5 13.2 21.5 12.4 20.6 11.9L13.6 7.9C12.7 7.4 11.2 7.4 10.3 7.9L1.6 12.8C0.7 13.3 0 14.6 0 15.6L0 33.8C0 34.9 0.7 36.1 1.6 36.6L8.4 40.5C9.3 41 10.1 40.6 10.1 39.6L10.1 21.7 10.1 21.7Z"/></g></svg><span>Offers & Deals</span></a><ul class="flyout"><li><a href="https://get.oreilly.com/email-signup.html" target="_blank" class="l2 nav-icn"><span>Newsletters</span></a></li></ul></li><li class="nav-highlights"><a href="/u/fee1bd59-4e02-48a4-a7b4-152ec4c157ac/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" width="20" height="20" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z"/></g></svg><span>Highlights</span></a></li><li><a href="/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a></li><li><a href="https://www.safaribooksonline.com/public/support" class="l1 no-icon">Support</a></li><li><a href="/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a><span class="l2 t-nag-notification"  id="nav-nag" ><strong class="trial-green">6</strong> days left in your trial.
  
  

  
    
      

<a class="" href="/subscribe/">Subscribe</a>.


    
  

  

</span></li><li><a href="https://www.safaribooksonline.com/public/support" class="l2">Support</a></li><li><a href="/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Data Visualization with Python and JavaScript
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781491920565/chapter/app01.html"><div class="js-collections-dropdown collections-dropdown menu-bit-cards"></div></div></li><li class="js-font-control-panel font-control-activator"><a href="#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a
        class="twitter share-button t-twitter"
        target="_blank"
        aria-label="Share this section on Twitter"
        title="Share this section on Twitter"
      
        href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/app01.html&text=Data%20Visualization%20with%20Python%20and%20JavaScript&via=safari"
      ><span>Twitter</span></a></li><li><a
        class="facebook share-button t-facebook"
        target="_blank"
        aria-label="Share this section on Facebook"
        title="Share this section on Facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/app01.html"
      ><span>Facebook</span></a></li><li><a
        class="googleplus share-button t-googleplus"
        target="_blank"
        aria-label="Share this secton on Google Plus"
        title="Share this secton on Google Plus"
        href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/app01.html"
      ><span>Google Plus</span></a></li><li><a
        class="email share-button t-email"
        aria-label="Share this section via email"
        title="Share this section via email"
      
        href="mailto:?subject=Safari: A.%20Moving%20from%20Development%20to%20Production&body=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/app01.html%0D%0Afrom Data%20Visualization%20with%20Python%20and%20JavaScript%0D%0A"
      ><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
        
        



 <!--[if lt IE 9]>
  
<![endif]-->



  <script defer src="/static/js/build/djangoMessagesPage.893631b34e7a.js"></script>


        
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch21.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">21. Conclusion</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ix01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Index</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><section data-type="appendix" epub:type="appendix" data-pdf-bookmark="Appendix A. Moving from Development to Production"><div class="appendix" id="idm140319386348416">
<h1><span class="label">Appendix A. </span>Moving from Development <span class="keep-together">to Production</span></h1>


<p><a data-type="indexterm" data-primary="production environment" data-secondary="moving to from development" id="idm140319386346352"></a>In this appendix, we’ll skim the surface of some big subjects and hopefully provide a good starting point and some sensible directions to follow. How far you need to develop these skills will depend on the scope of your job or projects. Hopefully you won’t be required to extend your authentication or deployment skills too far, or you’ll quickly find yourself doing more webdev and systems admin than dataviz. But testing is a generic programming skill for life and you probably want to be strengthening that core as you go. Decent project configuration skills are a very dependable asset, too. Using the following sections, I’d recommend taking your first Flask app with JavaScript project and making sure you can serve it on Apache with basic authentication, some unit tests, and at least two configuration states (e.g., production and development).</p>

<p>In covering the webdev sections of this book, the aim has been to give you a lightweight, pared-down starting point so that you can learn anything else you require on a need-to-know basis. In this sense, it’s been set in a development environment. Sometimes, if you’re working on a fast and dirty prototype, you won’t need to stray too far from your development setup. But often, out there in the real world, you’ll be working on a project that demands different environments for development and production (and maybe one for tests as well). Although both environments use testing, things like authentication and deployment usually have an end user in sight.</p>

<p>In the following sections, I’ll give a brief overview of some of the key things you should be aware of on a project when you’re moving to a production environment, using our development Nobel Prize visualization (Nobel-viz) single-page app as a starting point.</p>






<section data-type="sect1" data-pdf-bookmark="The Starting Directory"><div class="sect1" id="idm140319386342496">
<h1>The Starting Directory</h1>

<p><a data-type="indexterm" data-primary="Flask" data-secondary="production environment" data-tertiary="starting directory" id="idm140319386341296"></a><a data-type="indexterm" data-primary="production environment" data-secondary="starting directory" id="idm140319386340048"></a>Let’s remind ourselves of our Nobel-viz’s development files. <a data-type="xref" href="#nviz_files_appendix">Example A-1</a> shows the basic Flask directory structure we’re starting with. We also have an <em>api</em> subdirectory containing our Flask-based Eve web API; this could be anywhere on your system or, as is often the case, deployed to the cloud (see <a data-type="xref" href="#sect_flask_deploy">“Deploying Flask Apps”</a>).</p>
<div id="nviz_files_appendix" data-type="example">
<h5><span class="label">Example A-1. </span>Our project’s file structure</h5>

<pre data-type="programlisting" data-code-language="bash"><code>nobel_viz</code><code>
</code><code>├──</code><code> </code><code>templates</code><code>
</code><code>│</code><code>   </code><code>└──</code><code> </code><code>index.html</code><code>
</code><code>├──</code><code> </code><code>notes.md</code><code>
</code><code>├──</code><code> </code><code>api</code><code>
</code><code>│</code><code>   </code><code>├──</code><code> </code><code>server_eve.py</code><code>
</code><code>│</code><code>   </code><code>└──</code><code> </code><code>settings.py</code><code>
</code><code>├──</code><code> </code><code>nobel_viz.py</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO1-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO1-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>└──</code><code> </code><code>static</code><code>
    </code><code>├──</code><code> </code><code>css</code><code>
    </code><code>│  </code><code> </code><code>└──</code><code> </code><code>style.css</code><code>
    </code><code>├──</code><code> </code><code>data</code><code>
    </code><code>├──</code><code> </code><code>images</code><code>
    </code><code>├──</code><code> </code><code>js</code><code>
    </code><code>│  </code><code> </code><code>├──</code><code> </code><code>nbviz_bar.js</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO1-2" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO1-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
    </code><code>│  </code><code> </code><code>├──</code><code> </code><code>...</code><code>
    </code><code>└──</code><code> </code><code>lib</code><code>
        </code><code>├──</code><code> </code><code>crossfilter.min.js</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO1-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO1-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Our main Flask server, providing the entry point to our Nobel-viz single-page app.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO1-2" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO1-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Our JavaScript files.</p></dd>
</dl></div>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Configuration"><div class="sect1" id="idm140319386278160">
<h1>Configuration</h1>

<p><a data-type="indexterm" data-primary="production environment" data-secondary="configuration" id="PEconfig22"></a><a data-type="indexterm" data-primary="Flask" data-secondary="production environment" data-tertiary="configuration" id="Fpeconfig22"></a>As projects start to grow from the small-scale, prototyping phase, they often start to need different configurations for development and production (and testing, too, for that matter). These configurations may use different databases, web APIs, and URLs. You won’t want to be doing development using the same database as your production server. Flask-based projects can take advantage of Flask’s flexible configuration system to create these different environments.</p>








<section data-type="sect2" data-pdf-bookmark="Configuring Flask"><div class="sect2" id="idm140319386273520">
<h2>Configuring Flask</h2>

<p>You can configure Flask through the <code>apps</code> <code>config</code> object (essentially a dictionary). This can be accessed through the Flask app created in <em>nobel_viz.py</em>. Here, we set the <code>DEBUG</code> variable to <code>True</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># nobel_viz/nobel_viz.py</code>
<code class="n">app</code> <code class="o">=</code> <code class="n">Flask</code><code class="p">(</code><code class="nv-Magic">__name__</code><code class="p">)</code>
<code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="p">[</code><code class="s1">'DEBUG'</code><code class="p">]</code> <code class="o">=</code> <code class="bp">True</code></pre>

<p>Flask provides a number of ways to initialize the <code>config</code> instance. For example, you can use an environment variable that points to the location of a <em>settings.cfg</em> file:</p>

<pre data-type="programlisting" data-code-language="python"><code class="o">//</code> <code class="n">ENV_NBIZ_SETTINGS</code> <code class="o">=</code> <code class="o">/</code> <code class="n">path</code> <code class="o">/</code> <code class="n">to</code> <code class="o">/</code> <code class="n">settings</code><code class="o">.</code><code class="n">cfg</code>
<code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="o">.</code><code class="n">from_envvar</code><code class="p">(</code><code class="s1">'ENV_NBVIZ_SETTINGS'</code><code class="p">]</code></pre>

<p>This <em>.cfg</em> config file is actually a Python file, which will be processed to seed the <code>config</code> dictionary. Setting our configuration from an environment variable means we only need to change the path it defines to change our Flask setup. So setting <code>ENV_NBIZ_SETTINGS</code> to point to <code>settings_debug.cfg</code> gives us a debug environment:<sup><a data-type="noteref" id="idm140319386222960-marker" href="app01.html#idm140319386222960">1</a></sup></p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># settings_debug.cfg</code>
<code class="c1"># Debug config</code>
<code class="n">DEBUG</code> <code class="o">=</code> <code class="bp">True</code>
<code class="n">EVE_API</code> <code class="o">=</code> <code class="s1">'http://localhost:5000/api/'</code>
<code class="o">...</code></pre>

<p>Note that only fully uppercase variables will be used to create values in <code>config</code>; everything else will be ignored.</p>

<p>The way I configure Flask is through the class-inheritance model, which makes it easy to build from default settings. To do this we create a <em>config.py</em> file in our root directory with a <code>Config</code> class and its subclasses:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># nobel_viz/config.py</code>
<code class="k">class</code> <code class="nc">Config</code><code class="p">(</code><code class="nb">object</code><code class="p">):</code>
    <code class="n">DEBUG</code> <code class="o">=</code> <code class="bp">False</code>
    <code class="n">TESTING</code> <code class="o">=</code> <code class="bp">False</code>
    <code class="n">DATABASE_URI</code> <code class="o">=</code> <code class="s1">'sqlite://:memory:'</code>
    <code class="n">EVE_API</code> <code class="o">=</code> <code class="s1">'http://localhost:5000/api/'</code>

<code class="k">class</code> <code class="nc">ProductionConfig</code><code class="p">(</code><code class="n">Config</code><code class="p">):</code>
    <code class="n">DATABASE_URI</code> <code class="o">=</code> <code class="s1">'mysql://user@localhost/prod_db'</code>
    <code class="n">EVE_API</code> <code class="o">=</code> <code class="s1">'http://foo.com:5000/api/'</code>

<code class="k">class</code> <code class="nc">DevelopmentConfig</code><code class="p">(</code><code class="n">Config</code><code class="p">):</code>
    <code class="n">DEBUG</code> <code class="o">=</code> <code class="bp">True</code>

<code class="k">class</code> <code class="nc">TestingConfig</code><code class="p">(</code><code class="n">Config</code><code class="p">):</code>
    <code class="n">TESTING</code> <code class="o">=</code> <code class="bp">True</code></pre>

<p>With this config file in the same directory as the Flask server file (<em>nobel_viz.py</em>), you can update the app’s <code>config</code> from the required class using its <code>from_object</code> method like so:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># nobel_viz/nobel_viz.py</code>
<code class="c1"># ...</code>
<code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="o">.</code><code class="n">from_object</code><code class="p">(</code><code class="s1">'config.DevelopmentConfig'</code><code class="p">)</code></pre>

<p>So we could set our project’s  configuration with an environment variable and use Python’s <code>os</code> module to read it and configure accordingly. In OS X or Linux, we use the following command to set the environment variable:</p>

<pre data-type="programlisting">$ export NBVIZ_CONFIG=config.DevelopmentConfig</pre>

<p>In Windows, we use <code>set</code> instead of <code>export</code>:</p>

<pre data-type="programlisting">&gt; set NBVIZ_CONFIG=config.DevelopmentConfig</pre>

<p>To configure our project based on <code>NBVIZ_CONFIG</code>, we can use Python’s  <code>os</code> (operating system) module to get its value and use that with the <code>config.from_object</code> method:</p>

<pre data-type="programlisting" data-code-language="python"><code class="o">...</code>
<code class="n">app</code> <code class="o">=</code> <code class="n">Flask</code><code class="p">(</code><code class="nv-Magic">__name__</code><code class="p">)</code>

<code class="kn">import</code> <code class="nn">os</code>

<code class="n">cfg_var</code> <code class="o">=</code> <code class="n">os</code><code class="o">.</code><code class="n">environ</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s1">'NBVIZ_CONFIG'</code><code class="p">)</code>
<code class="k">if</code> <code class="ow">not</code> <code class="n">cfg_var</code><code class="p">:</code>
    <code class="k">raise</code> <code class="ne">RuntimeError</code><code class="p">(</code><code class="s1">'The environment variable NBVIZ_CONFIG'</code>\
              <code class="s1">' is not set. Please set to enable configuration'</code>
                       <code class="p">)</code>

<code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="o">.</code><code class="n">from_object</code><code class="p">(</code><code class="n">cfg_var</code><code class="p">)</code>
<code class="o">...</code></pre>

<p>Now that we can configure our app by setting a single environment variable, let’s see how we can pass configuration variables to the app.<a data-type="indexterm" data-primary="" data-startref="PEconfig22" id="idm140319385969328"></a><a data-type="indexterm" data-primary="" data-startref="Fpeconfig22" id="idm140319386013344"></a></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Configuring the JavaScript App"><div class="sect2" id="idm140319386251024">
<h2>Configuring the JavaScript App</h2>

<p><a data-type="indexterm" data-primary="JavaScript" data-secondary="configuring apps" id="JSconfig22"></a>There are a number of ways we can pass configuration settings to our JavaScript app. We could initiate a web session and configure based on user authentication (as described later in this appendix) or use a configuration JSON file mirroring the current environments<sup><a data-type="noteref" id="idm140319386009232-marker" href="app01.html#idm140319386009232">2</a></sup> (e.g., production or development). One simple method, which suffices for many jobs, is to use Flask’s templating system to pass variables from Python to JavaScript. Let’s cover that now.</p>

<p>Although we have a templated <em>index.html</em> file, we haven’t up to now been making use of Flask’s templating library, Jinja2 (see <a data-type="xref" href="ch12.html#side_jinja2">“Templating with Jinja2”</a>).</p>

<p>Let’s use a little template now to pass the configuration-dependent address of our RESTful Eve API. This is defined in our Flask <span class="keep-together"><em>config.py</em></span> file:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># config.py</code>

<code class="k">class</code> <code class="nc">Config</code><code class="p">(</code><code class="nb">object</code><code class="p">):</code>
    <code class="c1">#...</code>
    <code class="n">EVE_API</code> <code class="o">=</code> <code class="s1">'http://localhost:5000/api/'</code>

<code class="k">class</code> <code class="nc">ProductionConfig</code><code class="p">(</code><code class="n">Config</code><code class="p">):</code>
    <code class="n">DATABASE_URI</code> <code class="o">=</code> <code class="s1">'mysql://user@localhost/prod_db'</code>
    <code class="n">EVE_API</code> <code class="o">=</code> <code class="s1">'http://foo.com:5000/api/'</code></pre>

<p>We’ll pass the value of <code>EVE_API</code> to JavaScript by using a little templating to set a global <code>$EVE_API</code> variable in our <em>index.html</em> file, declaring the variable before our Nobel-viz scripts:</p>

<pre data-type="programlisting" data-code-language="html"><code class="c">&lt;!--</code><code class="c"> index.html </code><code class="c">--&gt;</code><code>
...
  </code><code class="nt">&lt;script</code><code class="nt">&gt;</code><code>
    </code><code class="nx">$EVE_API</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code class="p">{</code><code> </code><code class="nx">config</code><code class="p">.</code><code class="nx">EVE_API</code><code class="o">|</code><code class="nx">tojson</code><code class="o">|</code><code class="nx">safe</code><code> </code><code class="p">}</code><code class="p">}</code><code class="p">;</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO2-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO2-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
  </code><code class="nt">&lt;/script&gt;</code><code>

  </code><code class="nt">&lt;script </code><code class="na">src=</code><code class="s">"static/js/nbviz_core.js"</code><code> </code><code class="nt">&gt;</code><code class="nt">&lt;/script&gt;</code><code>
  ...</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO2-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO2-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>The <code>config</code> object is available to templates. Here we pass the <code>EVE_API</code> variable through a couple of filters to first convert it to JSON representation, and then mark the value <code>safe</code> to send through to HTML without escaping.</p></dd>
</dl>

<p>We can now use the <code>$EVE_API</code> variable in our <code>getDataFromAPI</code> method to use different API addresses dependent on our Flask <span class="keep-together">configuration</span>:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// nbviz_core.js</code>
<code class="c1">//...</code>
<code class="c1">// var API_URL = 'http://localhost:5000/api/';</code>
<code class="nx">nbviz</code><code class="p">.</code><code class="nx">getDataFromAPI</code> <code class="o">=</code> <code class="kd">function</code><code class="p">(</code><code class="nx">resource</code><code class="p">,</code> <code class="nx">data</code><code class="p">,</code> <code class="nx">callback</code><code class="p">){</code>
    <code class="nx">$</code><code class="p">.</code><code class="nx">getJSON</code><code class="p">(</code><code class="nx">$EVE_API</code> <code class="o">+</code> <code class="nx">resource</code><code class="p">,</code> <code class="nx">data</code><code class="p">)</code>
        <code class="p">.</code><code class="nx">done</code><code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">resp_data</code><code class="p">){</code>
        <code class="c1">//...</code></pre>

<p>By using Jinja2’s <code>tojson</code> filter, you can pass whole dictionaries from Python to JavaScript, allowing for as much configurability as you need.</p>

<p>Using templates, we can alter aspects of the visualization on an environment (dev or prod) by environment basis. But what if we wished to restrict use of our app to certain users or change the dataset visualized according to individuals or members of a group. For example, a dashboard may reveal specific information for administrators that should be hidden from normal users. At this point, we need to start dealing with the issues of user authentication.<a data-type="indexterm" data-primary="" data-startref="JSconfig22" id="idm140319385783664"></a></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Authentication"><div class="sect1" id="idm140319385782624">
<h1>Authentication</h1>

<p><a data-type="indexterm" data-primary="production environment" data-secondary="authentication" id="PEauth22"></a><a data-type="indexterm" data-primary="authentication" id="auth22"></a>Often we want to limit access to a particular web page (in our case, a visual single-page app) to particular users, or change the look and feel based on the user’s status (e.g., a user versus admin view). Generally this requires creating a login page through which users must pass (with the correct password) before being delivered the right <span class="keep-together">visualization</span>.</p>

<p><a data-type="indexterm" data-primary="basic authentication" id="idm140319385777328"></a><a data-type="indexterm" data-primary="OAuth" id="idm140319385776624"></a>There are lots of ways for a website to authenticate users, from the old but not particularly safe<sup><a data-type="noteref" id="idm140319385775712-marker" href="app01.html#idm140319385775712">3</a></sup>   <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">basic authentication</a> to more modern types such as <a href="https://en.wikipedia.org/wiki/OAuth">OAuth</a>, a not altogether successful attempt to impose some open standards for authorization. As you’d expect, Flask offers a number of plugins to provide authentication, the most popular of which is Flask-login, which we’ll cover in brief now.</p>

<p>Before adding a login stage to our visualization, we need to install Flask-login with a call to <code>pip</code>:</p>

<pre data-type="programlisting">$ pip install flask-login</pre>

<p>With Flask-login installed, the first thing you need to do is create a login manager. We’ll add the login code to our <em>nobel_viz.py</em> module for simplicity, but as authentication gets more involved it’s worth parceling it off to a separate module. So, after declaring our Flask app, we use it to initialize a login manager:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># nobel_viz.py</code><code>
</code><code>
</code><code class="c1"># ...</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">flask.ext.login</code><code> </code><code class="kn">as</code><code> </code><code class="nn">flask_login</code><code>
</code><code>
</code><code class="n">app</code><code> </code><code class="o">=</code><code> </code><code class="n">Flask</code><code class="p">(</code><code class="nv-Magic">__name__</code><code class="p">)</code><code>
</code><code class="c1"># ...</code><code>
</code><code class="n">login_manager</code><code> </code><code class="o">=</code><code> </code><code class="n">flask_login</code><code class="o">.</code><code class="n">LoginManager</code><code class="p">(</code><code class="p">)</code><code>
</code><code class="n">login_manager</code><code class="o">.</code><code class="n">init_app</code><code class="p">(</code><code class="n">app</code><code class="p">)</code><code>
</code><code class="n">login_manager</code><code class="o">.</code><code class="n">login_view</code><code> </code><code class="o">=</code><code> </code><code class="s2">"</code><code class="s2">login</code><code class="s2">"</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO3-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO3-1"><img src="1.png" alt="1" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO3-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO3-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>The <code>login_view</code> variable tells Flask-login where the login page is, which in our case is at the address <code>/login</code>.</p></dd>
</dl>

<p>Now that we have our login manager, we need a little code for user handling:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># FOR DEMO ONLY!!! NEVER STORE PASSWORDS IN PLAIN TEXT</code><code>
</code><code class="n">users</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code class="s1">'</code><code class="s1">groucho</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="p">{</code><code class="s1">'</code><code class="s1">pw</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">swordfish</code><code class="s1">'</code><code class="p">}</code><code class="p">}</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO4-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO4-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="k">class</code><code> </code><code class="nc">User</code><code class="p">(</code><code class="n">flask_login</code><code class="o">.</code><code class="n">UserMixin</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO4-2" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO4-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="k">pass</code><code>
</code><code>
</code><code>
</code><code class="nd">@login_manager.user_loader</code><code>
</code><code class="k">def</code><code> </code><code class="nf">user_loader</code><code class="p">(</code><code class="n">name</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO4-3" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO4-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="n">name</code><code> </code><code class="ow">not</code><code> </code><code class="ow">in</code><code> </code><code class="n">users</code><code class="p">:</code><code> </code><code class="c1"># only groucho may pass</code><code>
</code><code>        </code><code class="k">return</code><code>
</code><code>
</code><code>    </code><code class="n">user</code><code> </code><code class="o">=</code><code> </code><code class="n">User</code><code class="p">(</code><code class="p">)</code><code>
</code><code>    </code><code class="n">user</code><code class="o">.</code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="n">name</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO4-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO4-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>We’ll use this little dictionary for user lookup, but you would normally retrieve these details using a database call. Flask-login allows full flexibility here.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO4-2" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO4-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>We subclass the basic Flask-login <code>UserMixin</code> class, which provides some <a href="http://bit.ly/1Qccba1">sensible defaults</a>. Note that we don’t have to inherit from <code>UserMixin</code> but would then need to implement some basic properties or methods (e.g., <code>is_authenticated</code>).</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO4-3" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO4-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Called after a user submits a login form with the user’s id (here we’re using a name to identify the user).</p></dd>
</dl>

<p>Unauthorized users trying to access one of our protected pages will be sent to the login view. For a standard GET request, this login method will return a login page, rendered from a template. A POST request will see the form processed; if the passwords match, the user will be logged in to the session. Here’s the code for the login route:</p>

<pre data-type="programlisting" data-code-language="python"><code class="nd">@app.route</code><code class="p">(</code><code class="s1">'</code><code class="s1">/login</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">methods</code><code class="o">=</code><code class="p">[</code><code class="s1">'</code><code class="s1">GET</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">POST</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>
</code><code class="k">def</code><code> </code><code class="nf">login</code><code class="p">(</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="n">flask</code><code class="o">.</code><code class="n">request</code><code class="o">.</code><code class="n">method</code><code> </code><code class="o">==</code><code> </code><code class="s1">'</code><code class="s1">GET</code><code class="s1">'</code><code class="p">:</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">render_template</code><code class="p">(</code><code class="s1">'</code><code class="s1">login.html</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO5-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO5-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code>    </code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="n">flask</code><code class="o">.</code><code class="n">request</code><code class="o">.</code><code class="n">form</code><code class="p">[</code><code class="s1">'</code><code class="s1">name</code><code class="s1">'</code><code class="p">]</code><code>
</code><code>    </code><code class="c1"># FOR DEMO PURPOSES ONLY:</code><code>
</code><code>    </code><code class="c1"># password should never be in plaintext!</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="n">users</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="n">name</code><code class="p">)</code><code> </code><code class="ow">and</code><code>\
</code><code>    </code><code class="n">flask</code><code class="o">.</code><code class="n">request</code><code class="o">.</code><code class="n">form</code><code class="p">[</code><code class="s1">'</code><code class="s1">pw</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">users</code><code class="p">[</code><code class="n">name</code><code class="p">]</code><code class="p">[</code><code class="s1">'</code><code class="s1">pw</code><code class="s1">'</code><code class="p">]</code><code class="p">:</code><code>
</code><code>        </code><code class="n">user</code><code> </code><code class="o">=</code><code> </code><code class="n">User</code><code class="p">(</code><code class="p">)</code><code>
</code><code>        </code><code class="n">user</code><code class="o">.</code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="n">name</code><code>
</code><code>        </code><code class="c1"># Authenticate the user session</code><code>
</code><code>        </code><code class="n">flask_login</code><code class="o">.</code><code class="n">login_user</code><code class="p">(</code><code class="n">user</code><code class="p">)</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">flask</code><code class="o">.</code><code class="n">redirect</code><code class="p">(</code><code class="n">flask</code><code class="o">.</code><code class="n">url_for</code><code class="p">(</code><code class="s1">'</code><code class="s1">root</code><code class="s1">'</code><code class="p">)</code><code class="p">)</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO5-2" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO5-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="s1">'</code><code class="s1">&lt;h2&gt;A Bad Login Attempt&lt;/h2&gt;</code><code class="s1">'</code><code> </code><code>\
</code><code>    </code><code class="s1">'</code><code class="s1">&lt;p&gt;Wrong name and/or password given&lt;/p&gt;</code><code class="s1">'</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO5-3" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO5-3"><img src="3.png" alt="3" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO5-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO5-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>If the request is a GET, then direct the user to our login page; otherwise, we’ll be processing the contents of the posted login form.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO5-2" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO5-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>On logging in the user, we’ll redirect them to the root of our single-page visualization.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO5-3" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO5-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>The login POST has failed with incorrect form fields. We’ll return this placeholder; normally you’d probably return a proper failed login template with suitable failure warnings.</p></dd>
</dl>

<p>The <em>login.html</em> template is a simple form with input fields for password and name:</p>

<pre data-type="programlisting" data-code-language="html"><code class="cp">&lt;!DOCTYPE html&gt;</code>
<code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"utf-8"</code><code class="nt">&gt;</code>
<code class="c">&lt;!-- IMPORT THE VISUALIZATIONS CSS STYLING --&gt;</code>
<code class="nt">&lt;link</code> <code class="na">rel=</code><code class="s">"stylesheet"</code> <code class="na">href=</code><code class="s">"static/css/style.css"</code><code class="nt">&gt;</code>

<code class="nt">&lt;style </code><code class="na">type=</code><code class="s">"text/css"</code> <code class="na">media=</code><code class="s">"screen"</code><code class="nt">&gt;</code>
  <code class="nt">div</code><code class="nf">#login</code> <code class="p">{</code><code class="k">text-align</code><code class="o">:</code> <code class="nb">center</code><code class="p">;}</code>
<code class="nt">&lt;/style&gt;</code>

<code class="nt">&lt;body&gt;</code>
  <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"login"</code><code class="nt">&gt;</code>
    <code class="nt">&lt;h2&gt;</code>Login with name and password:<code class="nt">&lt;/h2&gt;</code>
    <code class="nt">&lt;form</code> <code class="na">action=</code><code class="s">'login'</code> <code class="na">method=</code><code class="s">'POST'</code><code class="nt">&gt;</code>
      <code class="nt">&lt;input</code>
      <code class="na">type=</code><code class="s">'text'</code> <code class="na">name=</code><code class="s">'name'</code> <code class="na">id=</code><code class="s">'name'</code> <code class="na">placeholder=</code><code class="s">'name'</code><code class="nt">&gt;</code>
      <code class="nt">&lt;/input&gt;</code>
      <code class="nt">&lt;input</code>
      <code class="na">type=</code><code class="s">'password'</code> <code class="na">name=</code><code class="s">'pw'</code> <code class="na">id=</code><code class="s">'pw'</code> <code class="na">placeholder=</code><code class="s">'password'</code><code class="nt">&gt;</code>
      <code class="nt">&lt;/input&gt;</code>
      <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">'submit'</code> <code class="na">name=</code><code class="s">'submit'</code><code class="nt">&gt;&lt;/input&gt;</code>
    <code class="nt">&lt;/form&gt;</code>
  <code class="nt">&lt;/div&gt;</code>
<code class="nt">&lt;/body&gt;</code></pre>

<p>To login-protect a route (in this case our Nobel-viz address), we add Flask-login’s <code>login_required</code> decorator:</p>

<pre data-type="programlisting" data-code-language="python"><code class="nd">@app.route</code><code class="p">(</code><code class="s1">'/'</code><code class="p">)</code>
<code class="nd">@flask_login.login_required</code>
<code class="k">def</code> <code class="nf">root</code><code class="p">():</code>
    <code class="k">return</code> <code class="n">render_template</code><code class="p">(</code><code class="s1">'index.html'</code><code class="p">)</code></pre>

<p>Putting all the login elements together means that when you visit the Nobel-viz for the first time, you will be directed to a login page like  <a data-type="xref" href="#dev2prod_login">Figure A-1</a>. Filling in the correct name and password (name: Groucho; password: swordfish) will redirect you to the visualization.</p>

<figure><div id="dev2prod_login" class="figure">
<img src="dvpj_aa01.png" alt="dvpj aa01" width="693" height="151">
<h6><span class="label">Figure A-1. </span>A simple Flask-login page</h6>
</div></figure>

<p>Flask-login is an eminently extensible and fairly unopinionated login framework. It’s easy to override and customize various stages of the login process. For example, by default, unauthorized users will be redirected to the login page. You can specialize this handling by defining your own <code>unauthorized_handler</code>. Here we follow the default and redirect to a login page, adding a little debug output message.</p>

<pre data-type="programlisting" data-code-language="python"><code class="nd">@login_manager.unauthorized_handler</code>
<code class="k">def</code> <code class="nf">unauthorized_callback</code><code class="p">():</code>

    <code class="n">app</code><code class="o">.</code><code class="n">logger</code><code class="o">.</code><code class="n">debug</code><code class="p">(</code><code class="s1">'An unauthorized user!'</code><code class="p">)</code>
    <code class="k">return</code> <code class="n">redirect</code><code class="p">(</code><code class="s1">'/login'</code><code class="p">)</code></pre>

<p>You can easily customize Flask-login through the set of  <a href="http://bit.ly/1WRONB0">callbacks and configuration variables</a>.  A nice example of a such tailoring is found in Miguel Grinberg’s <a href="http://bit.ly/1Xuo3GH">demonstration  of OAuth authorization</a>.</p>

<p>Now that you’ve seen how a basic login process works, let’s see how you would deploy a Flask app on a conventional web server.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Testing Flask Apps"><div class="sect1" id="idm140319385781712">
<h1>Testing Flask Apps</h1>

<p><a data-type="indexterm" data-primary="production environment" data-secondary="testing Flask apps" id="PEfapptest22"></a><a data-type="indexterm" data-primary="Flask" data-secondary="production environment" data-tertiary="testing apps" id="Fpetest"></a>A programming quote from Bruce Eckel sums up how many feel about the importance of testing:</p>
<blockquote>“If it’s not tested, it’s broken.”</blockquote>

<p>Of course, there is much disagreement about how much testing should be done and how much time you want to allocate to it. Writing testing procedures can be pretty onerous and since writing tests involves preempting fail points, how do you know you’ve caught them all? In fact, with a program of any great complexity you probably can’t. Nevertheless, testing is a fundamental aspect of modern programming and, in the examples to come, we’ll see how you can write little test procedures to try to catch your code misbehaving.</p>

<p>Testing is becoming an unavoidable aspect of modern programming and is a best practice for any medium- to large-sized project, particularly a collaborative one. Testing is important during development but, arguably, vital in production. Python’s <a href="https://docs.python.org/2/library/unittest.html"><code>unittest</code></a>  is a built-in testing library that provides a basic test framework. There are also various third-party libraries, such as <a href="http://pytest.org/">pytest</a> and <a href="https://nose.readthedocs.org/en/latest/">nose</a>, that build on <code>unittest</code>, simplifying the syntax and generally making it easier to write tests. Let’s see how to use <code>unittest</code> to run some basic tests on our Flask app. We’ll use the login process we just created as a test example.<sup><a data-type="noteref" id="idm140319385230896-marker" href="app01.html#idm140319385230896">4</a></sup></p>

<p>We’ll put our tests in a <em>test_nbviz.py</em> file in our project’s root directory. By convention, test files should begin with <code>test_</code> (test runners like <code>py.test</code> require this by default in order to discover a project’s tests). As the tests get more extensive, it’s sensible to stick them in their own subdirectory. The first thing we’ll do in the <code>test_nbviz</code> module is import our <code>nobel_viz</code> Flask app and the <code>unittest</code> library:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># test_nbviz.py</code>
<code class="kn">import</code> <code class="nn">nobel_viz</code>
<code class="kn">import</code> <code class="nn">unittest</code></pre>

<p>The <code>unittest</code> library has a number of classes to help structure your tests. We’ll subclass a <code>TestCase</code>  to set up our tests. <code>TestCase</code>s take a <code>setUp</code> and <code>tearDown</code> method, which are called before and after each test, respectively. These are used to set up a clean test context and then clean up afterward. So, for example, if you were testing a database operation, you would initialize a clean test database in <code>setUp</code> and then drop it in <code>tearDown</code>. For our test, we’ll just use <code>setUp</code> to provide a <code>test_client</code> from our <code>nobel_viz</code> app. These test clients provide a handy way to make requests to our app. Here’s the initial <code>NVizTestCase</code> code:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code> <code class="nn">nobel_viz</code>
<code class="kn">import</code> <code class="nn">unittest</code>


<code class="k">class</code> <code class="nc">NVIzTestCase</code><code class="p">(</code><code class="n">unittest</code><code class="o">.</code><code class="n">TestCase</code><code class="p">):</code>

    <code class="k">def</code> <code class="nf">setUp</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>
        <code class="n">nobel_viz</code><code class="o">.</code><code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="p">[</code><code class="s1">'TESTING'</code><code class="p">]</code> <code class="o">=</code> <code class="bp">True</code>
        <code class="bp">self</code><code class="o">.</code><code class="n">app</code> <code class="o">=</code> <code class="n">nobel_viz</code><code class="o">.</code><code class="n">app</code><code class="o">.</code><code class="n">test_client</code><code class="p">()</code>

    <code class="k">def</code> <code class="nf">tearDown</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>
        <code class="k">pass</code></pre>

<p>Now let’s write a couple of helper methods to <code>NVizTestCase</code> to use our freshly set up <code>test_client</code> to make login and logout requests to the <code>nobel_viz</code> app:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># ...</code>
    <code class="k">def</code> <code class="nf">login</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">,</code> <code class="n">password</code><code class="p">):</code>
        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">app</code><code class="o">.</code><code class="n">post</code><code class="p">(</code><code class="s1">'/login'</code><code class="p">,</code> <code class="n">data</code><code class="o">=</code><code class="nb">dict</code><code class="p">(</code>
            <code class="n">name</code><code class="o">=</code><code class="n">name</code><code class="p">,</code> <code class="n">pw</code><code class="o">=</code><code class="n">password</code>
            <code class="p">),</code> <code class="n">follow_redirects</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code>

    <code class="k">def</code> <code class="nf">logout</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>
        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">app</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s1">'/logout'</code><code class="p">,</code> <code class="n">follow_redirects</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code></pre>

<p>Now we just need add a login+logout test to our test case. Once again, convention dictates that tests start with <code>test_</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code>    </code><code class="c1"># TESTS</code><code>
</code><code>    </code><code class="k">def</code><code> </code><code class="nf">test_login_logout</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="c1"># log in with valid name and password</code><code>
</code><code>        </code><code class="n">resp</code><code> </code><code class="o">=</code><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">login</code><code class="p">(</code><code class="s1">'</code><code class="s1">groucho</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">swordfish</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>        </code><code class="c1"># check we have been redirected to Nobel-viz page</code><code>
</code><code>        </code><code class="k">assert</code><code> </code><code class="n">nobel_viz</code><code class="o">.</code><code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="p">[</code><code class="s1">'</code><code class="s1">APP_TITLE</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="ow">in</code><code> </code><code class="n">resp</code><code class="o">.</code><code class="n">data</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO6-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO6-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>        </code><code class="c1"># log out and test for the logout string in the response</code><code>
</code><code>        </code><code class="n">resp</code><code> </code><code class="o">=</code><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">logout</code><code class="p">(</code><code class="p">)</code><code>
</code><code>        </code><code class="k">assert</code><code> </code><code class="s1">'</code><code class="s1">Logged Out!</code><code class="s1">'</code><code> </code><code class="ow">in</code><code> </code><code class="n">resp</code><code class="o">.</code><code class="n">data</code><code>
</code><code>        </code><code class="c1"># log in with invalid name and password</code><code>
</code><code>        </code><code class="n">resp</code><code> </code><code class="o">=</code><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">login</code><code class="p">(</code><code class="s1">'</code><code class="s1">chico</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">shark</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>        </code><code class="k">assert</code><code> </code><code class="s1">'</code><code class="s1">Bad Login Attempt</code><code class="s1">'</code><code> </code><code class="ow">in</code><code> </code><code class="n">resp</code><code class="o">.</code><code class="n">data</code></pre>

<p>If you want to run this test module from the command line, you can just add a <code>__name__</code> test to the end of the file to call <code>unittest</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># ...</code>
<code class="k">if</code> <code class="nv-Magic">__name__</code> <code class="o">==</code> <code class="s1">'__main__'</code><code class="p">:</code>
    <code class="n">unittest</code><code class="o">.</code><code class="n">main</code><code class="p">()</code></pre>

<p>Running the test file from the project root should then produce a test output, showing that our login and logout tests have passed:</p>

<pre data-type="programlisting">$ python test_nbviz.py
.
--------------------------------------------------------
Ran 1 test in 0.019s
OK</pre>

<p>While you can run individual test files in this way, it’s sensible to use a dedicated test runner to do this. These libraries add extra functionality to the standard Python test suite, including robust test-discovery mechanisms, which remove a lot of the bookkeeping code from the test process. My personal fave is <a href="http://pytest.org/latest/"><code>pytest</code></a>, which is one of the <a href="http://docs.continuum.io/anaconda/pkg-docs">Anaconda packages</a>. Should you wish you install manually, a <code>pip</code> command will do the job:</p>

<pre data-type="programlisting">$ pip install pytest</pre>

<p>With <code>pytest</code> installed you just run it from the project root and it will automatically search through all subdirectories and files beginning with <code>test_</code> looking for unit tests, running any it finds, and producing a status report:</p>

<pre data-type="programlisting">$ py.test
================================= test session starts =========
platform linux2 -- Python 2.7.6, pytest-2.8.7, py-1.4.31,   ...
rootdir: /home/kyran/workspace/nobel_viz, inifile:
collected 1 items

test_nbviz.py .

============================== 1 passed in 0.14 seconds =======</pre>

<p>On failure of a test, <code>pytest</code> reports are richer than the <code>unittest</code> standard, providing contextual feedback showing the failure point in the code. <code>pytest</code> adds a lot of useful function to Python testing and simplifies a lot of the boilerplate code. I highly recommend using it.</p>

<p>As befits such a big subject, Python testing can get very complex. But you can do an awful lot with the built-in <code>unittest</code> framework and extensions such as <code>pytest</code>. I’d recommend taking a few simple Python functions you’re using and trying to create some succinct, efficient tests to probe for as many fail points in as few lines of code as possible. Like most things programming, testing is a craft that is learned in the doing.</p>

<p>Now let’s have a brief intro to JavaScript testing, a rather more varied and colorful area.<a data-type="indexterm" data-primary="" data-startref="PEfapptest22" id="idm140319384795680"></a><a data-type="indexterm" data-primary="" data-startref="Fpetest" id="idm140319384794704"></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Testing JavaScript Apps"><div class="sect1" id="sect_testing_js">
<h1>Testing JavaScript Apps</h1>

<p><a data-type="indexterm" data-primary="JavaScript" data-secondary="testing apps" id="JStest22"></a><a data-type="indexterm" data-primary="production environment" data-secondary="testing JavaScript apps" id="PEtestjava22"></a>Unlike Python, JavaScript doesn’t have a built-in testing library, but it does have an impressive number of third-party ones.  In fact, even for an experienced JavaScripter, the choice can be bewildering. This problem is compounded by the fact that JavaScript is in flux at the moment, with the new version (ECMAScript 6) promising much easier modular testing, while the Node ecosystem (using Node’s modular, <code>require</code>-based import system) is developing some impressive dedicated testing libraries (e.g., <a href="https://github.com/substack/tape">Tape</a>).</p>

<p>JavaScript also has to deal with the difficulties of testing user interaction on the client browser, which is still something of a black art. To keep things manageable, this section will deal with a simple example of testing, using a few of our core Nobel-viz methods. We’ll use the well-established <a href="http://jasmine.github.io/2.4/introduction.html">Jasmine</a> behavior-driven framework.</p>

<p>There are a number of ways to install Jasmine, but the simplest (and the one we’re using) is to download a zip file of the <a href="http://bit.ly/1tujTC2">latest release</a> from GitHub. Now we’ll create a <em>tests</em> directory and unzip the Jasmine folder in it, giving a folder structure like the following (<em>NBVizSpec.js</em> is the file we’ll be writing our tests to). We also copy the <em>SpecRunner.html</em> file to our project’s root:</p>

<pre data-type="programlisting">.
├── config.py
...
├── nobel_viz.py
├── SpecRunner.html <a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO6-2" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO6-1"><img src="1.png" alt="1" width="12" height="12"></a>
...
├── tests
│   ├── jasmine
│   │   ├── lib
│   │   ├── MIT.LICENSE
│   │   ├── spec
│   │   ├── SpecRunner.html
│   │   └── src
│   └── NbvizSpec.js
...</pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO6-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO6-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Copied from the unzipped Jasmine folder</p></dd>
</dl>

<p>Out of the box, Jasmine is configured to deliver the results of any tests you run to the browser by opening a <em>SpecRunner.html</em> file. This file calls in some Jasmine JavaScript libraries and some CSS styling. Let’s copy the default (shown in the file tree) to our project root and make a few changes to enable us to test the JavaScript methods in our core Nobel-viz module (<em>nbviz_core.js</em>):</p>

<pre data-type="programlisting" data-code-language="html"><code class="c">&lt;!--</code><code class="c"> SpecRunner.html </code><code class="c">--&gt;</code><code>
</code><code class="cp">&lt;!DOCTYPE html&gt;</code><code>
</code><code class="nt">&lt;html</code><code class="nt">&gt;</code><code>
</code><code class="nt">&lt;head</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;meta</code><code> </code><code class="na">charset=</code><code class="s">"utf-8"</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;title</code><code class="nt">&gt;</code><code>Jasmine Spec Runner v2.4.1</code><code class="nt">&lt;/title&gt;</code><code>

  </code><code class="nt">&lt;link</code><code> </code><code class="na">rel=</code><code class="s">"shortcut icon"</code><code> </code><code class="na">type=</code><code class="s">"image/png"</code><code>
  </code><code class="na">href=</code><code class="s">"tests/jasmine/lib/jasmine-2.4.1/jasmine_favicon.png"</code><code class="nt">&gt;</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO7-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO7-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
  </code><code class="nt">&lt;link</code><code> </code><code class="na">rel=</code><code class="s">"stylesheet"</code><code>
    </code><code class="na">href=</code><code class="s">"tests/jasmine/lib/jasmine-2.4.1/jasmine.css"</code><code class="nt">&gt;</code><code>

  </code><code class="nt">&lt;script </code><code class="na">src=</code><code class="s">"tests/jasmine/lib/jasmine-2.4.1/jasmine.js"</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;/script&gt;</code><code>
  </code><code class="nt">&lt;script
  </code><code class="na">src=</code><code class="s">"tests/jasmine/lib/jasmine-2.4.1/jasmine-html.js"</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;/script&gt;</code><code>
  </code><code class="nt">&lt;script
  </code><code class="na">src=</code><code class="s">"tests/jasmine/lib/jasmine-2.4.1/boot.js"</code><code class="nt">&gt;</code><code class="nt">&lt;/script&gt;</code><code>

  </code><code class="c">&lt;!--</code><code class="c"> include source files here... </code><code class="c">--&gt;</code><code>
  </code><code class="c">&lt;!--</code><code class="c"> OUR MAIN JS LIBS </code><code class="c">--&gt;</code><code>
  </code><code class="nt">&lt;script
    </code><code class="na">src=</code><code class="s">"https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/
    d3.js"</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;/script&gt;</code><code>
  </code><code class="nt">&lt;script
    </code><code class="na">src=</code><code class="s">"https://cdnjs.cloudflare.com/ajax/libs/topojson/
    1.6.20/topojson.min.js"</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;/script&gt;</code><code>
  </code><code class="nt">&lt;script
    </code><code class="na">src=</code><code class="s">"https://cdnjs.cloudflare.com/ajax/libs/queue-async/
    1.0.7/queue.min.js"</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;/script&gt;</code><code>
  </code><code class="nt">&lt;script </code><code class="na">src=</code><code class="s">"static/lib/crossfilter.min.js"</code><code class="nt">&gt;</code><code class="nt">&lt;/script&gt;</code><code>
  </code><code class="c">&lt;!--</code><code class="c"> OUR JS FILES TO TEST </code><code class="c">--&gt;</code><code>
  </code><code class="nt">&lt;script </code><code class="na">src=</code><code class="s">"static/js/nbviz_core.js"</code><code class="nt">&gt;</code><code class="nt">&lt;/script&gt;</code><code>

  </code><code class="c">&lt;!--</code><code class="c"> include spec files here... </code><code class="c">--&gt;</code><code>
  </code><code class="c">&lt;!--</code><code class="c"> OUR TEST SCRIPTS </code><code class="c">--&gt;</code><code>
  </code><code class="nt">&lt;script </code><code class="na">src=</code><code class="s">"tests/NbvizSpec.js"</code><code class="nt">&gt;</code><code class="nt">&lt;/script&gt;</code><code>
</code><code class="nt">&lt;/head&gt;</code><code>

</code><code class="nt">&lt;body</code><code class="nt">&gt;</code><code>
</code><code class="nt">&lt;/body&gt;</code><code>
</code><code class="nt">&lt;/html&gt;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO7-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO7-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>We’ve adjusted the <code>href</code>s for the CSS files and the <code>src</code> for the JavaScript files to point them to our local Jasmine library.</p></dd>
</dl>

<p>With our <em>SpecRunner.html</em> configured, we need to write some tests to <em>NbvizSpec.js</em>. The structure of Jasmine tests is guided by the principles of
<a href="https://en.wikipedia.org/wiki/Behavior-driven_development">behavior-driven development (BDD)</a>, an extension of test-driven development (TDD).  Test blocks are written using Jasmine’s <code>describe</code> method, the first argument of which is a descriptive string. These <code>describe</code> blocks contain annotated tests written using Jasmine’s  <code>it</code> function, which contains one or more <code>expect</code> functions, each with a test clause.</p>

<p>Let’s first define our <code>describe</code> function to test the core functions of the Nobel-viz. We’ll also add a little test data to it:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// tests/NbvizSpec.js</code>
<code class="nx">describe</code><code class="p">(</code><code class="s2">"Nbviz core functions"</code><code class="p">,</code> <code class="kd">function</code><code class="p">()</code> <code class="p">{</code>
    <code class="kd">var</code> <code class="nx">testData</code> <code class="o">=</code> <code class="p">[</code>
        <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Albert Einstein'</code><code class="p">,</code> <code class="nx">country</code><code class="o">:</code><code class="s1">'Switzerland'</code><code class="p">,</code>
          <code class="nx">sex</code><code class="o">:</code><code class="s1">'male'</code><code class="p">,</code> <code class="nx">category</code><code class="o">:</code><code class="s1">'Physics'</code><code class="p">},</code>
        <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Paul Dirac'</code><code class="p">,</code> <code class="nx">country</code><code class="o">:</code><code class="s1">'England'</code><code class="p">,</code>
          <code class="nx">sex</code><code class="o">:</code><code class="s1">'male'</code><code class="p">,</code> <code class="nx">category</code><code class="o">:</code><code class="s1">'Physics'</code><code class="p">},</code>
        <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Marie Curie'</code><code class="p">,</code> <code class="nx">country</code><code class="o">:</code><code class="s1">'Poland'</code><code class="p">,</code>
          <code class="nx">sex</code><code class="o">:</code><code class="s1">'female'</code><code class="p">,</code> <code class="nx">category</code><code class="o">:</code><code class="s1">'Chemistry'</code><code class="p">}</code>
    <code class="p">];</code>
    <code class="kd">var</code> <code class="nx">result</code><code class="p">;</code>

    <code class="c1">// ...</code></pre>

<p>For a first test, let’s test our <code>categoryFill</code> method, which takes a Nobel Prize category and produces a CSS color hex string. We know that, if the method is working, the Chemistry category should produce the pinkish hex color #ff7aad:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// ...
</code><code>    </code><code class="nx">it</code><code class="p">(</code><code class="s1">'should show correct color for category'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="p">)</code><code> </code><code class="p">{</code><code>
        </code><code class="kd">var</code><code> </code><code class="nx">col</code><code> </code><code class="o">=</code><code> </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">categoryFill</code><code class="p">(</code><code class="s1">'Chemistry'</code><code class="p">)</code><code class="p">;</code><code>
        </code><code class="nx">expect</code><code class="p">(</code><code class="nx">col</code><code class="p">.</code><code class="nx">toString</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">.</code><code class="nx">toBe</code><code class="p">(</code><code class="s1">'#ff7aad'</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO8-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO8-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
    </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>
</code><code class="c1">// ...</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO8-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO8-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p><code>expect</code> is initialized with a value (in this case, the string version of <code>col</code>), which is then tested by one of its methods—in this case, an equality (<code>===</code>) check.</p></dd>
</dl>

<p>Now let’s add a little test of our <code>filterByCountries</code> method, which takes a list of countries and filters our dataset (<code>testData</code>, in this case) for winners from those countries. We’ll first call the <code>makeFilterAndDimensions</code> (see <a data-type="xref" href="ch15.html#makeFilterAndDims">Example 15-8</a>) method with our test data to create a Crossfilter filter and the category, country, and gender dimensions we use in the visualization:</p>

<pre data-type="programlisting" data-code-language="js"><code class="c1">// ...
</code><code>    </code><code class="nx">it</code><code class="p">(</code><code class="s1">'should filter winners by countries'</code><code class="p">,</code><code> </code><code class="kd">function</code><code class="p">(</code><code class="p">)</code><code> </code><code class="p">{</code><code>

        </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">makeFilterAndDimensions</code><code class="p">(</code><code class="nx">testData</code><code class="p">)</code><code class="p">;</code><code>

        </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">filterByCountries</code><code class="p">(</code><code class="p">[</code><code class="s1">'Poland'</code><code class="p">]</code><code class="p">)</code><code class="p">;</code><code>
        </code><code class="nx">result</code><code> </code><code class="o">=</code><code> </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">countryDim</code><code class="p">.</code><code class="nx">top</code><code class="p">(</code><code class="kc">Infinity</code><code class="p">)</code><code class="p">;</code><code>

        </code><code class="nx">expect</code><code class="p">(</code><code class="nx">result</code><code class="p">.</code><code class="nx">length</code><code class="p">)</code><code class="p">.</code><code class="nx">toBe</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO9-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO9-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
        </code><code class="nx">expect</code><code class="p">(</code><code class="nx">result</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">.</code><code class="nx">name</code><code class="p">)</code><code class="p">.</code><code class="nx">toBe</code><code class="p">(</code><code class="s1">'Marie Curie'</code><code class="p">)</code><code class="p">;</code><code>

        </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">filterByCountries</code><code class="p">(</code><code class="p">[</code><code class="p">]</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO9-2" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO9-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
        </code><code class="nx">result</code><code> </code><code class="o">=</code><code> </code><code class="nx">nbviz</code><code class="p">.</code><code class="nx">countryDim</code><code class="p">.</code><code class="nx">top</code><code class="p">(</code><code class="kc">Infinity</code><code class="p">)</code><code class="p">;</code><code>

        </code><code class="nx">expect</code><code class="p">(</code><code class="nx">result</code><code class="p">.</code><code class="nx">length</code><code class="p">)</code><code class="p">.</code><code class="nx">toBe</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code><code class="p">;</code><code>
        </code><code class="nx">expect</code><code class="p">(</code><code class="nx">result</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code class="p">)</code><code class="p">.</code><code class="nx">toEqual</code><code class="p">(</code><code class="nx">testData</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO9-3" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO9-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
    </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>
</code><code class="c1">// ...</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO9-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO9-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Checks that the result of filtering by Poland returns the one Polish winner in <code>testData</code> and that her name is Marie Curie.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO9-2" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO9-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>We reset the filter with an empty list and then check that the result is the length or our full test dataset.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO9-3" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO9-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>The <code>crossfilter</code> result should be sorted on country with Paul Dirac (England) last (index 2). This should be equal to the second object (index 1) in the test data. <code>toEqual</code> is similar to <code>toBe</code> but does a deep equality check of the two objects. See
<a href="http://stackoverflow.com/questions/22413009/jasmine-javascript-testing-tobe-vs-toequal">this thread</a> for further details.</p></dd>
</dl>

<p>We would probably write a test for each of our Crossfilter methods and other significant core methods. For now, let’s run these two tests. In order to see the result of the two tests, open <em>SpecRunner.html</em> in a web browser. This should produce something like <a data-type="xref" href="#jasmine">Figure A-2</a> showing that the two tests have succeeded.</p>

<figure><div id="jasmine" class="figure">
<img src="dvpj_aa02.png" alt="dvpj aa02" width="694" height="286">
<h6><span class="label">Figure A-2. </span>Running Jasmine’s SpecRunner.html in a local browser</h6>
</div></figure>

<p>Jasmine produces useful feedback should one of your tests fail. Let’s change our winner name check from Marie Curie to another well-known prize winner:</p>

<pre data-type="programlisting" data-code-language="js">        <code class="nx">expect</code><code class="p">(</code><code class="nx">result</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">name</code><code class="p">).</code><code class="nx">toBe</code><code class="p">(</code><code class="s1">'Albert Einstein'</code><code class="p">);</code></pre>

<p>Running the tests now gives <a data-type="xref" href="#jasmine_fail">Figure A-3</a>, with the name failure and a stack trace.</p>

<figure><div id="jasmine_fail" class="figure">
<img src="dvpj_aa03.png" alt="dvpj aa03" width="673" height="455">
<h6><span class="label">Figure A-3. </span>Failing a test with Jasmine</h6>
</div></figure>

<p>JavaScript has a lot of testing libraries and, as mentioned, when one starts trying to test interactive elements, things get difficult very quickly. Extending Jasmine with a good test runner like <a href="http://karma-runner.github.io/">Karma</a> (a framework-agnostic runner) would be a good initial step. For testing Node.js modules, <a href="https://github.com/substack/tape">Tape</a> is a nice, simple library.<sup><a data-type="noteref" id="idm140319384230320-marker" href="app01.html#idm140319384230320">5</a></sup>  As projects get more involved, you may want to look at a continuous integration testing setup like <a href="https://travis-ci.org/">Travis CI</a> (for GitHub-based projects).</p>

<p>Now that we’ve had a little taste of Python and JavaScript testing, let’s dip our toes in the waters of an equally big subject: deploying a Flask app to the Web.<a data-type="indexterm" data-primary="" data-startref="JStest22" id="idm140319384227552"></a><a data-type="indexterm" data-primary="" data-startref="PEtestjava22" id="idm140319384226576"></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Deploying Flask Apps"><div class="sect1" id="sect_flask_deploy">
<h1>Deploying Flask Apps</h1>

<p><a data-type="indexterm" data-primary="production environment" data-secondary="deploying Flask apps" id="PEdeploy22"></a><a data-type="indexterm" data-primary="Flask" data-secondary="production environment" data-tertiary="deploying apps" id="Fpedeploy22"></a><a data-type="indexterm" data-primary="WSGI (Web Server Gateway Interface)" id="wsgi22"></a>In development, you are likely running Flask on a port (5000 by default) of localhost. In production, you’ll probably want to direct your Flask app through a dedicated server such as Apache or Nginx (by far the most popular servers, with around two-thirds of the market share). The  <a href="https://en.wikipedia.org/wiki/Web_Server_Gateway_Interface">Web Server Gateway Interface (WSGI)</a> provides a handy specification for hooking up Python web apps to heavyweight servers. We’ll now see how Flask makes use of this with the most popular web server, Apache.</p>








<section data-type="sect2" data-pdf-bookmark="Configuring Apache"><div class="sect2" id="idm140319384219552">
<h2>Configuring Apache</h2>

<p><a data-type="indexterm" data-primary="Apache" id="apache22"></a>With Apache, you’ll need the <code>mod_wsgi</code> module installed (see the <a href="http://bit.ly/1Yyr5Ja">installation instructions</a>).</p>

<p>On a typical Ubuntu-based server, you would use something like this to install the Apache WSGI module:</p>

<pre data-type="programlisting">$ sudo apt-get install libapache2-mod-wsgi</pre>

<p>With the WSGI module installed, the first sensible step is to either add your app’s root directory to Apache’s default <em>var/www</em> gateway directory or create a symbolic link to it (e.g., with the Nobel-viz root at <em>/home/kyran/workspace/nobel_viz</em>). On a Unix or OS X box, you would create a symbolic link like so, with superuser status:</p>

<pre data-type="programlisting">$ ln -s /home/kyran/workspace/nobel_viz /home /var/www</pre>

<p>To use the WSGI module, you need to define a <em>.wsgi</em> file (regardless of the suffix, a Python module) for your app. This will act as the Apache initializer for your app, web API, and so on. Place the <code>wsgi</code> file in your project’s root directory (in our case, <em>nobel_viz</em>):</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># /home/kyran/workspace/nobel_viz/nobel_viz.wsgi</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">sys</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">os</code><code>
</code><code class="c1"># Add our app's directory to the system path</code><code>
</code><code class="n">sys</code><code class="o">.</code><code class="n">path</code><code class="o">.</code><code class="n">insert</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">/var/www/nobel_viz</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>
</code><code class="n">activate_this</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">/home/kyran/.virtualenvs/pyjsbook/bin</code><code class="s1">'</code><code>\
</code><code class="s1">'</code><code class="s1">/activate_this.py</code><code class="s1">'</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO10-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO10-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="nb">execfile</code><code class="p">(</code><code class="n">activate_this</code><code class="p">,</code><code> </code><code class="nb">dict</code><code class="p">(</code><code class="nv-Magic">__file__</code><code class="o">=</code><code class="n">activate_this</code><code class="p">)</code><code class="p">)</code><code>
</code><code>
</code><code class="n">os</code><code class="o">.</code><code class="n">environ</code><code class="p">[</code><code class="s2">"</code><code class="s2">NBVIZ_CONFIG</code><code class="s2">"</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="s2">"</code><code class="s2">config.DevelopmentConfig</code><code class="s2">"</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO10-2" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO10-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>
</code><code class="kn">from</code><code> </code><code class="nn">server</code><code> </code><code class="kn">import</code><code> </code><code class="n">app</code><code> </code><code class="k">as</code><code> </code><code class="n">application</code><code> </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO10-3" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO10-3"><img src="3.png" alt="3" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO10-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO10-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>If using a Python virtual environment (as you should), then you need to activate it (making its libraries available) using its <code>activate_this</code> module.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO10-2" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO10-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Here we pass an environment variable to the app’s environment, in this case the <code>NBVIZ_CONFIG</code> configuration variable we discussed earlier in the appendix.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO10-3" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO10-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>The Flask app defined in our <code>nobel_viz.py</code> module. The WSGI module needs it to be imported as <code>application</code>.</p></dd>
</dl>

<p>With <code>nobel_viz.wsgi</code> written, we need to point Apache to it, using a standard configuration file added to the <em>/etc/apache2/sites-enabled</em> directory:</p>

<pre data-type="programlisting" data-code-language="xml"><code># /etc/apache2/sites-enabled/nobel-viz.conf

NameVirtualHost *:80

</code><code class="nt">&lt;VirtualHost</code><code> </code><code class="err">*</code><code class="err">:</code><code class="err">8</code><code class="err">0</code><code class="nt">&gt;</code><code>
        ServerName http://nobelviz.com </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO11-1" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO11-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
        WSGIScriptAlias / /var/www/nobel_viz/nobel_viz.wsgi </code><a class="co" id="co_moving_from_development__span_class__keep_together__to_production__span__CO11-2" href="#callout_moving_from_development__span_class__keep_together__to_production__span__CO11-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
        </code><code class="nt">&lt;Directory</code><code> </code><code class="err">/</code><code class="err">v</code><code class="err">a</code><code class="err">r</code><code class="err">/</code><code class="err">w</code><code class="err">w</code><code class="err">w</code><code class="err">/</code><code class="err">n</code><code class="err">o</code><code class="err">b</code><code class="err">e</code><code class="err">l</code><code class="err">_</code><code class="err">v</code><code class="err">i</code><code class="err">z</code><code class="nt">/&gt;</code><code>
                Order allow,deny
                Allow from all
        </code><code class="nt">&lt;/Directory&gt;</code><code>
        ErrorLog ${APACHE_LOG_DIR}/error.log
        LogLevel info
        CustomLog ${APACHE_LOG_DIR}/access.log combined
</code><code class="nt">&lt;/VirtualHost&gt;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO11-1" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO11-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Assuming our Nobel-viz is running on its own dedicated server with DNS name.</p></dd>
<dt><a class="co" id="callout_moving_from_development__span_class__keep_together__to_production__span__CO11-2" href="#co_moving_from_development__span_class__keep_together__to_production__span__CO11-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>The location of our <em>.wsgi</em> configuration file.</p></dd>
</dl>

<p>With the WSGI module installed and <em>nobel_viz.wsgi</em> and <em>nobel-viz.conf</em> in place, we need to restart Apache. On a standard Linux-based server, this is done thusly:</p>

<pre data-type="programlisting">$ sudo service apache2 restart</pre>

<p>If you now go to either the address <em>http:localhost</em> or, assuming it is up and running, <em><a href="http://nobelviz.com"><em class="hyperlink">http://nobelviz.com</em></a></em>, you should find your Flask app being served by Apache.</p>

<p>Deploying to Nginx servers (the second most popular out there) is just as easy, using the <a href="https://uwsgi-docs.readthedocs.org/en/latest/">uWSGI</a> application server.  Check out <a href="http://vladikk.com/2013/09/12/serving-flask-with-nginx-on-ubuntu/">this fine tutorial</a> for a detailed rundown.</p>

<p>Similar principles to those just outlined should see you up and running on the popular production servers. Check the official docs for a <a href="http://flask.pocoo.org/docs/0.10/deploying/">comprehensive rundown</a>.<a data-type="indexterm" data-primary="" data-startref="PEdeploy22" id="idm140319384020816"></a><a data-type="indexterm" data-primary="" data-startref="Fpedeploy22" id="idm140319384019840"></a><a data-type="indexterm" data-primary="" data-startref="apache22" id="idm140319384018896"></a><a data-type="indexterm" data-primary="" data-startref="wsgi22" id="idm140319384017952"></a></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Logging and Error Handling"><div class="sect1" id="idm140319384016880">
<h1>Logging and Error Handling</h1>

<p><a data-type="indexterm" data-primary="production environment" data-secondary="logging/error handling" id="idm140319384015504"></a><a data-type="indexterm" data-primary="logging" id="idm140319384014528"></a><a data-type="indexterm" data-primary="error handling" id="idm140319384013856"></a>Logging is a fundamental part of a production setup and another big topic that can easily mushroom as projects increase in size. On a few projects I’ve worked on, a centralized logging setup such as <a href="https://www.graylog.org/">GrayLog</a> or <a href="http://logstash.net/">Logstash</a> has proved useful. It’s great to be able to pool all logging to one place, and web-based access is another boon.</p>

<p>There’s a nice section in the Flask docs on <a href="http://flask.pocoo.org/docs/0.10/errorhandling/">error handling</a>, which makes a very sensible point: you will generally only look at a log-file for application errors when a user reports an error. It’s better practice to receive an email alert as soon as an exception occurs. Python has a handy log handler (<code>SMTPHandler</code>) for just this occasion, based on the <a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">Simple Mail Transfer Protocol (SMTP)</a>.</p>

<p>In the following code, we set up a Python SMTP logging handler to send an email to the Nobel-viz admin if the Flask server throws an error.  You’ll need access to a mail host to do this, and while you could run one on the same machine as the Flask app (access on 127.0.0.1), you’ll usually want to use an external SMTP mail server, accessed by username and password.</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># ...</code>
<code class="n">app</code> <code class="o">=</code> <code class="n">Flask</code><code class="p">(</code><code class="nv-Magic">__name__</code><code class="p">)</code>
<code class="c1">#...</code>
<code class="n">ADMINS</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'nvizadmin@kyrandale.com'</code><code class="p">]</code>
<code class="k">if</code> <code class="ow">not</code> <code class="n">app</code><code class="o">.</code><code class="n">debug</code><code class="p">:</code>
    <code class="kn">import</code> <code class="nn">logging</code>
    <code class="kn">from</code> <code class="nn">logging.handlers</code> <code class="kn">import</code> <code class="n">SMTPHandler</code>
    <code class="n">mail_handler</code> <code class="o">=</code> <code class="n">SMTPHandler</code><code class="p">(</code>
        <code class="n">mailhost</code> <code class="o">=</code> <code class="p">(</code><code class="s1">'smtp.foo.com'</code><code class="p">,</code> <code class="mi">495</code><code class="p">)</code> <code class="c1"># mail server, port</code>
        <code class="n">fromaddr</code> <code class="o">=</code> <code class="s1">'server-error@nobelviz.com'</code><code class="p">,</code>
        <code class="n">toaddr</code> <code class="o">=</code> <code class="n">ADMINS</code><code class="p">,</code>
        <code class="n">subject</code> <code class="o">=</code> <code class="s1">'Your Application Failed'</code><code class="p">),</code>
        <code class="n">credentials</code> <code class="o">=</code> <code class="p">(</code><code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="o">.</code><code class="n">SMTP_USER</code><code class="p">,</code>\
        <code class="n">app</code><code class="o">.</code><code class="n">config</code><code class="o">.</code><code class="n">SMTP_PASSWORD</code><code class="p">)</code>
    <code class="n">mail_handler</code><code class="o">.</code><code class="n">setLevel</code><code class="p">(</code><code class="n">logging</code><code class="o">.</code><code class="n">ERROR</code><code class="p">)</code>
    <code class="n">app</code><code class="o">.</code><code class="n">logger</code><code class="o">.</code><code class="n">addHandler</code><code class="p">(</code><code class="n">mail_handler</code><code class="p">)</code></pre>

<p>There are some handy <a href="http://flask.pocoo.org/docs/0.10/errorhandling/">error-handling pointers</a> in the Flask docs. They build on Python’s already solid <a href="https://docs.python.org/2/library/logging.html">built-in logging</a> library, which I recommend becoming familiar with. At its most basic, it pretty much replaces the need to use the <code>print</code> statement ever again, outside of providing output to a command-line application. But it has a fair number of bells and whistles beyond that. The <a href="https://docs.python.org/2/howto/logging.html#logging-basic-tutorial">basic logging tutorial</a> is a good starting point. The logging module is also covered succinctly in one of <a href="https://pymotw.com/2/logging/">Doug Hellman’s Weekly Modules</a>. For a nice overview of some logging and exception patterns, see this <a href="https://www.loggly.com/blog/exceptional-logging-of-exceptions-in-python/">loggly blog post</a>.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm140319386222960"><sup><a href="app01.html#idm140319386222960-marker">1</a></sup> To set a environment variable in OS X or Linux, the <code>export</code> command should do the trick (e.g., <code>export ENV_NBIZ_SETTINGS='/path/to/settings_debug.cfg</code>). In Windows, you usually do this using the <code>set</code> command, which will persist for the current CMD session or  with a menu option as described in this <a href="http://bit.ly/1YxqPKL">Stack Exchange thread</a>.</p><p data-type="footnote" id="idm140319386009232"><sup><a href="app01.html#idm140319386009232-marker">2</a></sup> We want to make sure this file isn’t available to a general web request.</p><p data-type="footnote" id="idm140319385775712"><sup><a href="app01.html#idm140319385775712-marker">3</a></sup> Credentials for basic authentication are not encrypted or hashed in any way, making HTTPS pretty much essential.</p><p data-type="footnote" id="idm140319385230896"><sup><a href="app01.html#idm140319385230896-marker">4</a></sup> This is adapted from <a href="http://flask.pocoo.org/docs/0.10/testing/">the example</a> in the Flask docs.</p><p data-type="footnote" id="idm140319384230320"><sup><a href="app01.html#idm140319384230320-marker">5</a></sup> See <a href="http://bit.ly/1UEI5YK">this article</a> for a detailed reason why Tape might save you a lot of time and stress.</p></div></div></section></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch21.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">21. Conclusion</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ix01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Index</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag">
        
        
          
          

          
            <p>You have 6 days left in your trial, Flankpeter. Subscribe today. <a href="/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          
        
        

      </div>

    
    



        
      </div>
      




  <footer class="pagefoot t-pagefoot">
    <a href="#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class='js-footer-nav'>
      
        <li><a class="t-recommendations-footer" href="/r/">Recommended</a></li>
      
      <li>
      
      <a class="t-queue-footer" href="/playlists/">Playlists</a>
      
      </li>
      
        <li><a class="t-recent-footer" href="/history/">History</a></li>
        <li><a class="t-topics-footer" href="/topics?q=*&limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="/u/">Settings</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">&#169; 2018 <a href="https://www.safaribooksonline.com" target="_blank">Safari</a>.</span>
    <a href="/terms/">Terms of Service</a> /
    <a href="/privacy/">Privacy Policy</a>
  </footer>




    

    <script src="/jsi18n/web/" charset="utf-8"></script>
    <script src="/library/jsi18n/appcache/" charset="utf-8"></script>
  </body>
</html>
