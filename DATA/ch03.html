<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/ch03.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch03.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/data-visualization-with/9781491920565/ch03.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="2870136"
  data-user-uuid="fee1bd59-4e02-48a4-a7b4-152ec4c157ac"
  data-username="flankpeter"
  data-account-type="Trial"
  
  data-activated-trial-date="05/04/2018"


  data-archive="9781491920565"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch03.html"
  data-epub-title="Data Visualization with Python and JavaScript" data-debug=0 data-testing=0><!--<![endif]--><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="author" content="Safari Books Online" /><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491920565"/><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"/><meta property="twitter:account_id" content="4503599627559754" /><link rel="apple-touch-icon" href="/static/images/apple-touch-icon.0c29511d2d72.png"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'><title>3. Reading and Writing Data with Python - Data Visualization with Python and JavaScript</title><link rel="stylesheet" href="/static/CACHE/css/a04cd81b09cd.css" type="text/css" /><link rel="stylesheet" type="text/css" href="/static/css/annotator.ef38b0457d7b.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td,#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content canvas,#sbo-rt-content details,#sbo-rt-content embed,#sbo-rt-content figure,#sbo-rt-content figcaption,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content output,#sbo-rt-content ruby,#sbo-rt-content section,#sbo-rt-content summary,#sbo-rt-content time,#sbo-rt-content mark,#sbo-rt-content audio,#sbo-rt-content video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}#sbo-rt-content article,#sbo-rt-content aside,#sbo-rt-content details,#sbo-rt-content figcaption,#sbo-rt-content figure,#sbo-rt-content footer,#sbo-rt-content header,#sbo-rt-content hgroup,#sbo-rt-content menu,#sbo-rt-content nav,#sbo-rt-content section{display:block}#sbo-rt-content div{line-height:1}#sbo-rt-content ol,#sbo-rt-content ul{list-style:none}#sbo-rt-content blockquote,#sbo-rt-content q{quotes:none}#sbo-rt-content blockquote:before,#sbo-rt-content blockquote:after,#sbo-rt-content q:before,#sbo-rt-content q:after{content:none}#sbo-rt-content table{border-collapse:collapse;border-spacing:0}@page{margin:5px !important}#sbo-rt-content p{margin:10px 0 0;line-height:125%;text-align:left}#sbo-rt-content p.byline{text-align:left;margin:-33px auto 35px;font-style:italic;font-weight:bold}#sbo-rt-content div.preface p+p.byline{margin:1em 0 0}#sbo-rt-content div.preface p.byline+p.byline{margin:0}#sbo-rt-content div.sect1>p.byline{margin:-.25em 0 1em}#sbo-rt-content div.sect1>p.byline+p.byline{margin-top:-1em}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content span.lineannotation{font-style:italic;color:#a62a2a;font-family:serif}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#fff}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content span.label,#sbo-rt-content span.keep-together{font-size:inherit;font-weight:inherit}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center !important;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;border:1px solid #DCDCDC;background-color:#F7F7F7;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content div.sidebar ul,#sbo-rt-content aside[data-type="sidebar"] ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:1.25em !important}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif !important;color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div[data-type="tip"],#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div[data-type="note"],#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div[data-type="warning"],#sbo-rt-content div.sidebar div[data-type="caution"],#sbo-rt-content div.sidebar div[data-type="important"]{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content aside[data-type="sidebar"] p.byline{font-size:90%;font-weight:bold;font-style:italic;text-align:center;text-indent:0;margin:5px auto 6px;page-break-after:avoid}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;overflow-wrap:break-word}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;text-align:left !important;text-transform:none !important;font-family:serif !important;margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:2em;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"] h2,#sbo-rt-content section[data-type="titlepage"] p.subtitle,#sbo-rt-content section[data-type="titlepage"] p[data-type="subtitle"]{font-size:1.3em;font-weight:normal;text-align:center;margin-top:.5em;color:#555}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"],#sbo-rt-content section[data-type="titlepage"] p.author{font-size:1.3em;font-family:serif !important;font-weight:bold;margin:50px 0 !important;text-align:center}#sbo-rt-content section[data-type="titlepage"] p.edition{text-align:center;text-transform:uppercase;margin-top:2em}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content ul.stafflist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.stafflist li{list-style-type:none;padding:5px 0}#sbo-rt-content ul.printings li{list-style-type:none}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif !important;font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif !important;margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif !important;font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10px}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif !important}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-style:italic;margin:.75em 0 0 !important}#sbo-rt-content blockquote div.attribution,#sbo-rt-content blockquote p[data-type="attribution"]{margin:5px 0 10px 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p,#sbo-rt-content blockquote p[data-type="attribution"]{font-style:normal;margin-top:5px}#sbo-rt-content blockquote div.attribution p:before,#sbo-rt-content blockquote p[data-type="attribution"]:before{font-style:normal;content:"—";-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div[data-type="footnotes"]{border-top:1px solid black;margin-top:1.5em}#sbo-rt-content sub,#sbo-rt-content sup{font-size:75%;line-height:0;position:relative}#sbo-rt-content sup{top:-.5em}#sbo-rt-content sub{bottom:-.25em}#sbo-rt-content div.refentry p.refname{font-size:1em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin-bottom:5px;overflow:auto;width:100%}#sbo-rt-content div.refentry{width:100%;display:block;margin-top:2em}#sbo-rt-content div.refsynopsisdiv{display:block;clear:both}#sbo-rt-content div.refentry header{page-break-inside:avoid !important;display:block;break-inside:avoid !important;padding-top:0;border-bottom:1px solid #000}#sbo-rt-content div.refsect1 h6{font-size:.9em;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content div.refsect1{margin-top:3em}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dd{margin-left:1.5em !important;margin-bottom:.25em}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ul{list-style-type:disc}#sbo-rt-content ul ul{list-style-type:square}#sbo-rt-content ul ul ul{list-style-type:circle}#sbo-rt-content ol{list-style-type:decimal}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ol ul{list-style-type:disc}#sbo-rt-content ol ul ol{list-style-type:decimal}#sbo-rt-content ul ol{list-style-type:decimal}#sbo-rt-content ul ol ul{list-style-type:disc}#sbo-rt-content ol,#sbo-rt-content ul{list-style-position:outside;margin:15px 0 15px 1.25em}#sbo-rt-content ol li,#sbo-rt-content ul li{margin:.5em 0 .65em;line-height:125%}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist,#sbo-rt-content ul.simplelist{margin:15px 0 15px 20px !important}#sbo-rt-content ul.simplelist li{list-style-type:none;padding:5px 0}#sbo-rt-content table.simplelist td{border:none}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img,#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip ol,#sbo-rt-content div.tip ul,#sbo-rt-content div[data-type="tip"] ol,#sbo-rt-content div[data-type="tip"] ul,#sbo-rt-content div.note ol,#sbo-rt-content div.note ul,#sbo-rt-content div[data-type="note"] ol,#sbo-rt-content div[data-type="note"] ul,#sbo-rt-content div.warning ol,#sbo-rt-content div.warning ul,#sbo-rt-content div[data-type="warning"] ol,#sbo-rt-content div[data-type="warning"] ul,#sbo-rt-content div[data-type="caution"] ol,#sbo-rt-content div[data-type="caution"] ul,#sbo-rt-content div[data-type="important"] ol,#sbo-rt-content div[data-type="important"] ul{margin-left:1.5em !important}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1,#sbo-rt-content div[data-type="important"] h6{font-weight:bold;font-size:110%;font-family:sans-serif !important;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div[data-type="note"] h1{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3,#sbo-rt-content div.safarienabled h6{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px 0 30px 0 !important;max-width:95%;border:none !important;background:none;display:table !important}#sbo-rt-content div.table,#sbo-rt-content div.informaltable,#sbo-rt-content table{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{display:table-cell;padding:.3em;text-align:left;vertical-align:middle;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif;font-size:1em;margin:10px 0 10px 0 !important;padding:0;page-break-after:avoid;text-align:left !important}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation,#sbo-rt-content div[data-type="equation"]{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title,#sbo-rt-content div[data-type="equation"] h5{font-style:italic;font-weight:normal;font-family:serif !important;font-size:90%;margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul,#sbo-rt-content div[data-type="index"] ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:1em}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif;text-align:left}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content span.gray{color:#4C4C4C}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781491920565/chapter/ch03.html",
          "book_id": "9781491920565",
          "chapter_uri": "ch03.html",
          "position": 0,
          "user_uuid": "fee1bd59-4e02-48a4-a7b4-152ec4c157ac",
          "next_chapter_uri": "/library/view/data-visualization-with/9781491920565/ch04.html"
        
      },
      title: "Data Visualization with Python and JavaScript",
      author_list: "Kyran Dale",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false,
      show_ios_app_teaser: false
    };
    // ]]></script><script src="/static/js/src/modernizr.js"></script><script>
    
      
       window.PUBLIC_ANNOTATIONS = false;
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

    
      window.PRIVACY_CONTROL_SWITCH = true;
    

    
      window.PUBLISHER_PAGES = true;
    

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "https://www.safaribooksonline.com/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://www.safaribooksonline.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch03.html"/><meta name="description" content=" Chapter 3. Reading and Writing Data with Python One of the fundamental skills of any data visualizer is the ability to move data around. Whether your data is in an ... "><meta property="og:title" content="3. Reading and Writing Data with Python" /><meta itemprop="isPartOf" content="/library/view/data-visualization-with/9781491920565/" /><meta itemprop="name" content="3. Reading and Writing Data with Python" /><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch03.html" /><meta property="og:site_name" content="Safari" /><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491920565/" /><meta property="og:description" itemprop="description" content=" Chapter 3. Reading and Writing Data with Python One of the fundamental skills of any data visualizer is the ability to move data around. Whether your data is in an ... "><meta itemprop="inLanguage" content="en" /><meta itemprop="publisher" content="O&#39;Reilly Media, Inc." /><meta property="og:type" content="book" /><meta property="og:book:isbn" itemprop="isbn" content="9781491920510" /><meta property="og:book:author" itemprop="author" content="Kyran Dale" /><meta property="og:book:tag" itemprop="about" content="JavaScript" /><meta property="og:book:tag" itemprop="about" content="Python" /><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><script>
    window.ENABLE_BOWERBIRD_COLLECTIONS = true;
  </script><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script type="text/javascript">
    (function(i,s,o,g,r,a,m) {
      i['GoogleAnalyticsObject']=r;
      i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
      a=s.createElement(o),m=s.getElementsByTagName(o)[0];
      a.async=1;
      a.src=g;
      m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    var matches = document.cookie.match(/BrowserCookie\s*=\s*([a-f0-9\-]{36})/),
      user_uuid = null;

    if (matches && matches.length === 2) {
      user_uuid = matches[1];
    }

  
    ga('create', 'UA-39299553-7', {'userId': 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac' });
  

  
    
      ga('set', 'dimension1', 'Trial');
    
  

  ga('set', 'dimension6', user_uuid);

  
    ga('set', 'dimension2', 'fee1bd59-4e02-48a4-a7b4-152ec4c157ac');
    
  

  

  

  //enable enhanced link tracking
  ga('require', 'linkid', 'linkid.js');

  // reading interface will track pageviews itself
  if (document.location.pathname.indexOf("/library/view") !== 0) {
    ga('send', 'pageview');
  }
  </script><script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
  </script><script defer src="/static/js/build/vendor.e2e622a103f9.js"></script><script defer src="/static/js/build/reader.84feb506aa44.js"></script></head>


<body class="reading sidenav nav-collapsed  scalefonts">

    
  
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        





<a href="#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"/><rect x="10" y="12" width="3" height="7"/><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"/><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"/></g></svg><span>Safari Home</span></a></li><li><a href="/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z"/></g></svg><span>Recommended</span></a></li><li><a href="/playlists/" class="t-queue-nav l0 nav-icn None"><?xml version="1.0" encoding="UTF-8"?><svg width="21px" height="17px" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --><title>icon_Playlist_sml</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon_Playlist_sml" fill-rule="nonzero" fill="#000000"><g id="playlist-icon"><g id="Group-6"><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle></g><g id="Group-5" transform="translate(0.000000, 7.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g><g id="Group-5-Copy" transform="translate(0.000000, 14.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g></g></g></g></svg><span>
                 Playlists
              </span></a></li><li class="search"><a href="#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"/></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"/></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z"/></g></svg><span>History</span></a></li><li><a href="/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" width="20" height="20" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z"/></g></svg><span>Topics</span></a></li><li><a href="/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z"/></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>offers icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M35.9 20.6L27 15.5C26.1 15 24.7 15 23.7 15.5L14.9 20.6C13.9 21.1 13.2 22.4 13.2 23.4L13.2 41.4C13.2 42.4 13.9 43.7 14.9 44.2L23.3 49C24.2 49.5 25.6 49.5 26.6 49L35.9 43.6C36.8 43.1 37.6 41.8 37.6 40.8L37.6 23.4C37.6 22.4 36.8 21.1 35.9 20.6L35.9 20.6ZM40 8.2C39.1 7.6 37.6 7.6 36.7 8.2L30.2 11.9C29.3 12.4 29.3 13.2 30.2 13.8L39.1 18.8C40 19.4 40.7 20.6 40.7 21.7L40.7 39C40.7 40.1 41.4 40.5 42.4 40L48.2 36.6C49.1 36.1 49.8 34.9 49.8 33.8L49.8 15.6C49.8 14.6 49.1 13.3 48.2 12.8L40 8.2 40 8.2ZM27 10.1L33.6 6.4C34.5 5.9 34.5 5 33.6 4.5L26.6 0.5C25.6 0 24.2 0 23.3 0.5L16.7 4.2C15.8 4.7 15.8 5.6 16.7 6.1L23.7 10.1C24.7 10.6 26.1 10.6 27 10.1ZM10.1 21.7C10.1 20.6 10.8 19.4 11.7 18.8L20.6 13.8C21.5 13.2 21.5 12.4 20.6 11.9L13.6 7.9C12.7 7.4 11.2 7.4 10.3 7.9L1.6 12.8C0.7 13.3 0 14.6 0 15.6L0 33.8C0 34.9 0.7 36.1 1.6 36.6L8.4 40.5C9.3 41 10.1 40.6 10.1 39.6L10.1 21.7 10.1 21.7Z"/></g></svg><span>Offers & Deals</span></a><ul class="flyout"><li><a href="https://get.oreilly.com/email-signup.html" target="_blank" class="l2 nav-icn"><span>Newsletters</span></a></li></ul></li><li class="nav-highlights"><a href="/u/fee1bd59-4e02-48a4-a7b4-152ec4c157ac/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" width="20" height="20" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z"/></g></svg><span>Highlights</span></a></li><li><a href="/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a></li><li><a href="https://www.safaribooksonline.com/public/support" class="l1 no-icon">Support</a></li><li><a href="/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"/></g></svg><span>Settings</span></a><span class="l2 t-nag-notification"  id="nav-nag" ><strong class="trial-green">6</strong> days left in your trial.
  
  

  
    
      

<a class="" href="/subscribe/">Subscribe</a>.


    
  

  

</span></li><li><a href="https://www.safaribooksonline.com/public/support" class="l2">Support</a></li><li><a href="/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Data Visualization with Python and JavaScript
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781491920565/chapter/ch03.html"><div class="js-collections-dropdown collections-dropdown menu-bit-cards"></div></div></li><li class="js-font-control-panel font-control-activator"><a href="#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a
        class="twitter share-button t-twitter"
        target="_blank"
        aria-label="Share this section on Twitter"
        title="Share this section on Twitter"
      
        href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch03.html&text=Data%20Visualization%20with%20Python%20and%20JavaScript&via=safari"
      ><span>Twitter</span></a></li><li><a
        class="facebook share-button t-facebook"
        target="_blank"
        aria-label="Share this section on Facebook"
        title="Share this section on Facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch03.html"
      ><span>Facebook</span></a></li><li><a
        class="googleplus share-button t-googleplus"
        target="_blank"
        aria-label="Share this secton on Google Plus"
        title="Share this secton on Google Plus"
        href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch03.html"
      ><span>Google Plus</span></a></li><li><a
        class="email share-button t-email"
        aria-label="Share this section via email"
        title="Share this section via email"
      
        href="mailto:?subject=Safari: 3.%20Reading%20and%20Writing%20Data%20with%20Python&body=https://www.safaribooksonline.com/library/view/data-visualization-with/9781491920565/ch03.html%0D%0Afrom Data%20Visualization%20with%20Python%20and%20JavaScript%0D%0A"
      ><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
        
        



 <!--[if lt IE 9]>
  
<![endif]-->



  <script defer src="/static/js/build/djangoMessagesPage.893631b34e7a.js"></script>


        
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch02.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">2. A Language-Learning Bridge Between Python and JavaScript</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch04.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">4. Webdev 101</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Reading and Writing Data with Python"><div class="chapter" id="chapter_read_write">
<h1><span class="label">Chapter 3. </span>Reading and Writing Data <span class="keep-together">with Python</span></h1>


<p><a data-type="indexterm" data-primary="Python" data-secondary="reading/writing data with" data-see="data sharing" id="idm140319439942896"></a>One of the fundamental skills of any data visualizer is the ability to move data around. Whether your data is in an SQL database, a comma-separated-value (CSV) file, or in some more esoteric form, you should be comfortable reading the data, converting it, and writing it into a more convenient form if need be. One of Python’s great strengths is how easy it makes manipulating data in this way. The focus of this chapter is to bring you up to speed with this essential aspect of our dataviz toolchain.</p>

<p>This chapter is part tutorial, part reference, and sections of it will be referred to in later chapters. If you know the fundamentals of reading and writing Python data, you can cherry-pick parts of the chapter as a refresher.</p>






<section data-type="sect1" data-pdf-bookmark="Easy Does It"><div class="sect1" id="idm140319439940416">
<h1>Easy Does It</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="benefits of Python for" id="idm140319439939168"></a>I remember when I started programming back in the day (using low-level languages like C) how awkward data manipulation was. Reading from and writing to files was an annoying mixture of boilerplate code, hand-rolled kludges, and the like. Reading from databases was equally difficult, and as for serializing data, the memories are still painful. Discovering Python was a breath of fresh air. It wasn’t a speed demon, but opening a file was pretty much as simple as it could be:</p>

<pre data-type="programlisting" data-code-language="python"><code class="nb">file</code> <code class="o">=</code> <code class="nb">open</code><code class="p">(</code><code class="s1">'data.txt'</code><code class="p">)</code></pre>

<p>Back then, Python made reading from and writing to files refreshingly easy, and its sophisticated string processing made parsing the data in those files just as easy. It even had an amazing module called Pickle that could serialize pretty much any Python object.</p>

<p>In the years since, Python has added robust, mature modules to its standard library that make dealing with CSV and JSON files, the standard for web dataviz work, just as easy. There are also some great libraries for interacting with SQL databases such as SQLAlchemy, my thoroughly recommended go-to. The newer NoSQL databases are also well served. MongoDB is the most popular of these newer document-based databases, and Python’s <code>pymongo</code> library, which is demonstrated later in the chapter, makes interacting with it a relative breeze.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Passing Data Around"><div class="sect1" id="idm140319439936032">
<h1>Passing Data Around</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="target list of data objects" id="idm140319439934656"></a>A good way to demonstrate how to use the key data-storage libraries is to pass a single data packet among them, reading and writing it as we go. This will give us an opportunity to see in action the key data formats and databases employed by data visualizers.</p>

<p>The data we’ll be passing around is probably the most commonly used in web visualizations, a list of dictionary-like objects (see <a data-type="xref" href="#data_dummydata">Example 3-1</a>). This dataset is transferred to the browser in <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> form, which is, as we’ll see, easily converted from a Python <span class="keep-together">dictionary</span>.</p>
<div id="data_dummydata" data-type="example">
<h5><span class="label">Example 3-1. </span>Our target list of data objects</h5>

<pre data-type="programlisting" data-code-language="python"><code class="n">nobel_winners</code> <code class="o">=</code> <code class="p">[</code>
 <code class="p">{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
 <code class="p">{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s1">'Paul Dirac'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s1">'British'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1933</code><code class="p">},</code>
 <code class="p">{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s1">'Chemistry'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s1">'Marie Curie'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s1">'Polish'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s1">'female'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1911</code><code class="p">}</code>
<code class="p">]</code></pre></div>

<p>We’ll start by creating a CSV file from the Python list shown in <a data-type="xref" href="#data_dummydata">Example 3-1</a> as a demonstration of reading (opening) and writing system files.</p>

<p>The following sections assume you’re in a work directory with a <em>data</em> subdirectory at hand. You can run the code from a Python interpreter or file.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Working with System Files"><div class="sect1" id="idm140319439809488">
<h1>Working with System Files</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="CSV file creation" id="idm140319439807952"></a><a data-type="indexterm" data-primary="CSV (comma-separated values) files" data-secondary="creating" id="idm140319439806976"></a><a data-type="indexterm" data-primary="files" data-secondary="creating CSV files" id="idm140319439806064"></a><a data-type="indexterm" data-primary="system files" id="idm140319439805120"></a>In this section, we’ll create a CSV file from a Python list of dictionaries (<a data-type="xref" href="#data_dummydata">Example 3-1</a>). Typically, you would do this using the <code>csv</code> module, which we’ll demonstrate after this section,  so this is just a way of demonstrating basic Python file manipulation.</p>

<p>First let’s open a new file, using <code>w</code> as a second argument to indicate we’ll be writing data to it.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">f</code> <code class="o">=</code> <code class="nb">open</code><code class="p">(</code><code class="s1">'data/nobel_winners.csv'</code><code class="p">,</code> <code class="s1">'w'</code><code class="p">)</code></pre>

<p>Now we’ll create our CSV file from the <code>nobel_winners</code> dictionary (<a data-type="xref" href="#data_dummydata">Example 3-1</a>):</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">cols</code><code> </code><code class="o">=</code><code> </code><code class="n">nobel_winners</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">keys</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">cols</code><code class="o">.</code><code class="n">sort</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-2" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>
</code><code class="k">with</code><code> </code><code class="nb">open</code><code class="p">(</code><code class="s1">'</code><code class="s1">data/nobel_winners.csv, </code><code class="s1">'</code><code class="n">w</code><code class="s1">'</code><code class="s1">) as f: </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-3" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
</code><code>    </code><code class="n">f</code><code class="o">.</code><code class="n">write</code><code class="p">(</code><code class="s1">'</code><code class="s1">,</code><code class="s1">'</code><code class="o">.</code><code class="n">join</code><code class="p">(</code><code class="n">cols</code><code class="p">)</code><code> </code><code class="o">+</code><code> </code><code class="s1">'</code><code class="se">\n</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-4" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-4"><img src="4.png" alt="4" width="12" height="12"></a><code>
</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">o</code><code> </code><code class="ow">in</code><code> </code><code class="n">nobel_winners</code><code class="p">:</code><code>
</code><code>        </code><code class="n">row</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="nb">str</code><code class="p">(</code><code class="n">o</code><code class="p">[</code><code class="n">col</code><code class="p">]</code><code class="p">)</code><code> </code><code class="k">for</code><code> </code><code class="n">col</code><code> </code><code class="ow">in</code><code> </code><code class="n">cols</code><code class="p">]</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-5" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-5"><img src="5.png" alt="5" width="12" height="12"></a><code>
</code><code>        </code><code class="n">f</code><code class="o">.</code><code class="n">write</code><code class="p">(</code><code class="s1">'</code><code class="s1">,</code><code class="s1">'</code><code class="o">.</code><code class="n">join</code><code class="p">(</code><code class="n">row</code><code class="p">)</code><code> </code><code class="o">+</code><code> </code><code class="s1">'</code><code class="se">\n</code><code class="s1">'</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Gets our data columns from the keys of the first object (i.e., <code>['category', 'name', ... ]</code>).</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-2" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Sorts the columns in alphabetical order.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-3" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Uses Python’s <code>with</code> statement to guarantee the file is closed on leaving the block or if any exceptions occur.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-4" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-4"><img src="4.png" alt="4" width="12" height="12"></a></dt>
<dd><p><code>join</code> creates a concatenated string from a list of strings (<code>cols</code> here), joined by the initial string (i.e., “category,name,..”).</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-5" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO1-5"><img src="5.png" alt="5" width="12" height="12"></a></dt>
<dd><p>Creates a list using the column keys to the objects in <code>nobel_winners</code>.</p></dd>
</dl>

<p>Now that we’ve created our CSV file, let’s use Python to read it and make sure everything is correct:</p>

<pre data-type="programlisting" data-code-language="python"><code class="k">with</code><code> </code><code class="nb">open</code><code class="p">(</code><code class="s1">'</code><code class="s1">data/nobel_winners.csv</code><code class="s1">'</code><code class="p">)</code><code> </code><code class="k">as</code><code> </code><code class="n">f</code><code class="p">:</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">line</code><code> </code><code class="ow">in</code><code> </code><code class="n">f</code><code class="o">.</code><code class="n">readlines</code><code class="p">(</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="k">print</code><code class="p">(</code><code class="n">line</code><code class="p">)</code><code class="p">,</code><code>                    </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO2-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO2-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="n">category</code><code class="p">,</code><code class="n">name</code><code class="p">,</code><code class="n">nationality</code><code class="p">,</code><code class="n">sex</code><code class="p">,</code><code class="n">year</code><code>
</code><code class="n">Physics</code><code class="p">,</code><code class="n">Albert</code><code> </code><code class="n">Einstein</code><code class="p">,</code><code class="n">Swiss</code><code class="p">,</code><code class="n">male</code><code class="p">,</code><code class="mi">1921</code><code>
</code><code class="n">Physics</code><code class="p">,</code><code class="n">Paul</code><code> </code><code class="n">Dirac</code><code class="p">,</code><code class="n">British</code><code class="p">,</code><code class="n">male</code><code class="p">,</code><code class="mi">1933</code><code>
</code><code class="n">Chemistry</code><code class="p">,</code><code class="n">Marie</code><code> </code><code class="n">Curie</code><code class="p">,</code><code class="n">Polish</code><code class="p">,</code><code class="n">female</code><code class="p">,</code><code class="mi">1911</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO2-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO2-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Adding a comma after the <code>print</code> function call inhibits the addition of an unnecessary newline.</p></dd>
</dl>

<p>As the previous output shows, our CSV file is well formed. Let’s use Python’s built-in <code>csv</code> module to first read it and then create a CSV file the right way.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="CSV, TSV, and Row-Column Data Formats"><div class="sect1" id="idm140319439808992">
<h1>CSV, TSV, and Row-Column Data Formats</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="CSV/TSV and row-column formats" id="DSmanip3"></a><a data-type="indexterm" data-primary="CSV (comma-separated values) files" data-secondary="manipulating" id="idm140319439489728"></a><a data-type="indexterm" data-primary="TSV (tab-separated value) files" id="idm140319439488880"></a><a data-type="indexterm" data-primary="row-column file format" id="idm140319439488272"></a>Comma-separated values (CSV) or their tab-separated cousins (TSV) are probably the most ubiquitous file-based data formats and, as a data visualizer, these will often be the forms you’ll receive to work your magic with. Being able to read and write CSV files and their various quirky variants, such as pipe- or semicolon-separated or those using <em>`</em> in place of the standard double quotes, is a fundamental skill; Python’s <code>csv</code> module is capable of doing pretty much all your heavy lifting here. Let’s put it through its paces reading and writing our <code>nobel_winners</code> data:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">nobel_winners</code> <code class="o">=</code> <code class="p">[</code>
 <code class="p">{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
  <code class="o">...</code>
<code class="p">]</code></pre>

<p>Writing our <code>nobel_winners</code> data (see <a data-type="xref" href="#data_dummydata">Example 3-1</a>) to a CSV file is a pretty simple affair. <code>csv</code> has a dedicated <code>DictWriter</code> class that will turn our dictionaries into CSV rows. The only piece of explicit bookkeeping we have to do is write a header to our CSV file, using the keys of our dictionaries as fields (i.e., “category, name, nationality, sex”):</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code><code> </code><code class="nn">csv</code><code>
</code><code>
</code><code class="k">with</code><code> </code><code class="nb">open</code><code class="p">(</code><code class="s1">'</code><code class="s1">data/nobel_winners.csv</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">wb</code><code class="s1">'</code><code class="p">)</code><code> </code><code class="k">as</code><code> </code><code class="n">f</code><code class="p">:</code><code>
</code><code>    </code><code class="n">fieldnames</code><code> </code><code class="o">=</code><code> </code><code class="n">nobel_winners</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">keys</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="n">fieldnames</code><code class="o">.</code><code class="n">sort</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-2" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="n">writer</code><code> </code><code class="o">=</code><code> </code><code class="n">csv</code><code class="o">.</code><code class="n">DictWriter</code><code class="p">(</code><code class="n">f</code><code class="p">,</code><code> </code><code class="n">fieldnames</code><code class="o">=</code><code class="n">fieldnames</code><code class="p">)</code><code>
</code><code>    </code><code class="n">writer</code><code class="o">.</code><code class="n">writeheader</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-3" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-3"><img src="3.png" alt="3" width="12" height="12"></a><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">w</code><code> </code><code class="ow">in</code><code> </code><code class="n">nobel_winners</code><code class="p">:</code><code>
</code><code>        </code><code class="n">writer</code><code class="o">.</code><code class="n">writerow</code><code class="p">(</code><code class="n">w</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>You need to explicitly tell the writer which <code>fieldnames</code> (in this case, the <code>'category'</code>, <code>'name'</code>, etc., keys) to use.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-2" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>We’ll sort the CSV header fields alphabetically for readability.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-3" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO3-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Writes the CSV-file header (“category,name,…”).</p></dd>
</dl>

<p>You’ll probably be reading CSV files more often than writing them.<sup><a data-type="noteref" id="idm140319439368000-marker" href="ch03.html#idm140319439368000">1</a></sup> Let’s read back the <em>nobel_winners.csv</em> file we just wrote.</p>

<p>If you just want to use <code>csv</code> as a superior and eminently adaptable file line-reader, a couple of lines will produce a handy iterator, which can deliver your CSV rows as lists of strings:</p>

<pre data-type="programlisting" data-code-language="python"><code class="k">with</code><code> </code><code class="nb">open</code><code class="p">(</code><code class="s1">'</code><code class="s1">data/nobel_winners.csv</code><code class="s1">'</code><code class="p">)</code><code> </code><code class="k">as</code><code> </code><code class="n">f</code><code class="p">:</code><code>
</code><code>    </code><code class="n">reader</code><code> </code><code class="o">=</code><code> </code><code class="n">csv</code><code class="o">.</code><code class="n">reader</code><code class="p">(</code><code class="n">f</code><code class="p">)</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">row</code><code> </code><code class="ow">in</code><code> </code><code class="n">reader</code><code class="p">:</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO4-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO4-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>        </code><code class="k">print</code><code class="p">(</code><code class="n">row</code><code class="p">)</code><code>
</code><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="p">[</code><code class="s1">'</code><code class="s1">category</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">name</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">nationality</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">sex</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">]</code><code>
</code><code class="p">[</code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Albert Einstein</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Swiss</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">1921</code><code class="s1">'</code><code class="p">]</code><code>
</code><code class="p">[</code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Paul Dirac</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">British</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">1933</code><code class="s1">'</code><code class="p">]</code><code>
</code><code class="p">[</code><code class="s1">'</code><code class="s1">Chemistry</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Marie Curie</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Polish</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">female</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">1911</code><code class="s1">'</code><code class="p">]</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO4-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO4-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Iterates over the <code>reader</code> object, consuming the lines in the file.</p></dd>
</dl>

<p>Note that the numbers are read in string form. If you want to manipulate them numerically, you’ll need to convert any numeric columns to their respective type, which is integer years in this case.</p>

<p>A more convenient way to consume CSV data is to convert the rows into Python dictionaries. This <em>record</em> form is also the one we are using as our conversion target (a <code>list</code> of <code>dict</code>s). <code>csv</code> has a handy <code>DictReader</code> for just this purpose:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code><code> </code><code class="nn">csv</code><code>
</code><code>
</code><code class="k">with</code><code> </code><code class="nb">open</code><code class="p">(</code><code class="s1">'</code><code class="s1">data/nobel_winners.csv</code><code class="s1">'</code><code class="p">)</code><code> </code><code class="k">as</code><code> </code><code class="n">f</code><code class="p">:</code><code>
</code><code>    </code><code class="n">reader</code><code> </code><code class="o">=</code><code> </code><code class="n">csv</code><code class="o">.</code><code class="n">DictReader</code><code class="p">(</code><code class="n">f</code><code class="p">)</code><code>
</code><code>    </code><code class="n">nobel_winners</code><code> </code><code class="o">=</code><code> </code><code class="nb">list</code><code class="p">(</code><code class="n">reader</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO5-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO5-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="n">nobel_winners</code><code>
</code><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="p">[</code><code class="p">{</code><code class="s1">'</code><code class="s1">category</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">nationality</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Swiss</code><code class="s1">'</code><code class="p">,</code><code> </code><code>\
</code><code> </code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">1921</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">name</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Albert Einstein</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">sex</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">}</code><code class="p">,</code><code>
</code><code class="p">{</code><code class="s1">'</code><code class="s1">category</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">nationality</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">British</code><code class="s1">'</code><code class="p">,</code><code> </code><code>\
</code><code> </code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">1933</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">name</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Paul Dirac</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">sex</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">}</code><code class="p">,</code><code>
</code><code class="p">{</code><code class="s1">'</code><code class="s1">category</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Chemistry</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">nationality</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Polish</code><code class="s1">'</code><code class="p">,</code><code> </code><code>\
</code><code> </code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">1911</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">name</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">Marie Curie</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">sex</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s1">'</code><code class="s1">female</code><code class="s1">'</code><code class="p">}</code><code class="p">]</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO5-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO5-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Inserts all of the <code>reader</code> items into a list.</p></dd>
</dl>

<p>As the output shows, we just need to cast the <code>dict</code>s year attributes to integers to make <code>nobel_winners</code> conform to the chapter’s target data (<a data-type="xref" href="#data_dummydata">Example 3-1</a>), thus:</p>

<pre data-type="programlisting" data-code-language="python"><code class="k">for</code> <code class="n">w</code> <code class="ow">in</code> <code class="n">nobel_winners</code><code class="p">:</code>
    <code class="n">w</code><code class="p">[</code><code class="s1">'year'</code><code class="p">]</code> <code class="o">=</code> <code class="nb">int</code><code class="p">(</code><code class="n">w</code><code class="p">[</code><code class="s1">'year'</code><code class="p">])</code></pre>

<p>The <code>csv</code> readers don’t infer datatypes from your file, and instead interpret everything as a string. Pandas, Python’s preeminent data-hacking library, will try to guess the correct type of the data columns, usually successfully. We’ll see this in action in the later dedicated Pandas chapters.</p>

<p><code>csv</code> has a few useful arguments to help parse members of the CSV family:</p>
<dl>
<dt><code>dialect</code></dt>
<dd>
<p>By default, <code>'excel'</code>; specifies a set of dialect-specific parameters. <code>excel-tab</code> is a sometimes used alternative.</p>
</dd>
<dt><code>delimiter</code></dt>
<dd>
<p>Files are usually comma-separated, but they could use <code>|</code>, <code>:</code> or  <span class="keep-together"><code>' '</code></span> instead.</p>
</dd>
<dt><code>quotechar</code></dt>
<dd>
<p>By default, double quotes are used, but you occasionally find <code>|</code> or <code>`</code> instead.</p>
</dd>
</dl>

<p>You can find the full set of <code>csv</code> parameters in the <a href="https://docs.python.org/2/library/csv.html#csv-fmt-params">online Python docs</a>.</p>

<p>Now that we’ve successfully written and read our target data using the <code>csv</code> module, let’s pass on our CSV-derived <code>nobel_winners</code> <code>dict</code> to the <code>json</code> module.<a data-type="indexterm" data-primary="" data-startref="DSmanip3" id="idm140319439007472"></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="JSON"><div class="sect1" id="read_write_json">
<h1>JSON</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="JSON data" id="idm140319439004960"></a><a data-type="indexterm" data-primary="JSON (JavaScript Object Notation)" data-secondary="for data sharing" data-secondary-sortas="data sharing" id="idm140319439003984"></a>In this section we’ll write and read our <code>nobel_winners</code> data using Python’s <code>json</code> module. Let’s remind ourselves of the data we’re using:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">nobel_winners</code> <code class="o">=</code> <code class="p">[</code>
 <code class="p">{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
  <code class="o">...</code>
<code class="p">]</code></pre>

<p>For data primitives such as strings, integers, and floats, Python dictionaries are easily saved (or <em>dumped</em>, in the JSON vernacular) into JSON files, using the <code>json</code> module. The <code>dump</code> method takes a Python container and a file pointer, saving the former to the latter:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code> <code class="nn">json</code>

<code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s1">'data/nobel_winners.json'</code><code class="p">,</code> <code class="s1">'w'</code><code class="p">)</code> <code class="k">as</code> <code class="n">f</code><code class="p">:</code>
     <code class="n">json</code><code class="o">.</code><code class="n">dump</code><code class="p">(</code><code class="n">nobel_winners</code><code class="p">,</code> <code class="n">f</code><code class="p">)</code>

<code class="nb">open</code><code class="p">(</code><code class="s1">'data/nobel_winners.json'</code><code class="p">)</code><code class="o">.</code><code class="n">read</code><code class="p">()</code>

<code class="n">Out</code><code class="p">:</code> <code class="s1">'[{"category": "Physics", "name": "Albert Einstein",</code>
<code class="s2">"sex"</code><code class="p">:</code> <code class="s2">"male"</code><code class="p">,</code> <code class="s2">"person_data"</code><code class="p">:</code> <code class="p">{</code><code class="s2">"date of birth"</code><code class="p">:</code> <code class="s2">"14th March</code>
<code class="mi">1879</code><code class="s2">", "</code><code class="n">date</code> <code class="n">of</code> <code class="n">death</code><code class="s2">": "</code><code class="mi">18</code><code class="n">th</code> <code class="n">April</code> <code class="mi">1955</code><code class="s2">"}, "</code><code class="n">year</code><code class="s2">": 1921,</code>
<code class="s2">"nationality"</code><code class="p">:</code> <code class="s2">"Swiss"</code><code class="p">},</code> <code class="p">{</code><code class="s2">"category"</code><code class="p">:</code> <code class="s2">"Physics"</code><code class="p">,</code>
<code class="s2">"nationality"</code><code class="p">:</code> <code class="s2">"British"</code><code class="p">,</code> <code class="s2">"year"</code><code class="p">:</code> <code class="mi">1933</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Paul Dirac"</code><code class="p">,</code>
<code class="s2">"sex"</code><code class="p">:</code> <code class="s2">"male"</code><code class="p">},</code> <code class="p">{</code><code class="s2">"category"</code><code class="p">:</code> <code class="s2">"Chemistry"</code><code class="p">,</code> <code class="s2">"nationality"</code><code class="p">:</code>
<code class="s2">"Polish"</code><code class="p">,</code> <code class="s2">"year"</code><code class="p">:</code> <code class="mi">1911</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Marie Curie"</code><code class="p">,</code> <code class="s2">"sex"</code><code class="p">:</code>
<code class="s2">"female"</code><code class="p">}]</code><code class="s1">'</code></pre>

<p>Reading (or loading) a JSON file is just as easy. We just pass the opened JSON file to the <code>json</code> module’s <code>load</code> method:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code><code> </code><code class="nn">json</code><code>
</code><code>
</code><code class="k">with</code><code> </code><code class="nb">open</code><code class="p">(</code><code class="s1">'</code><code class="s1">data/nobel_winners.json</code><code class="s1">'</code><code class="p">)</code><code> </code><code class="k">as</code><code> </code><code class="n">f</code><code class="p">:</code><code>
</code><code>    </code><code class="n">nobel_winners</code><code> </code><code class="o">=</code><code> </code><code class="n">json</code><code class="o">.</code><code class="n">load</code><code class="p">(</code><code class="n">f</code><code class="p">)</code><code>
</code><code>
</code><code class="n">nobel_winners</code><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="p">[</code><code class="p">{</code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">category</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>  </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">name</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">Albert Einstein</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>  </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">nationality</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">Swiss</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>  </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">sex</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">male</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>  </code><code class="s-Affix">u</code><code class="s1">'</code><code class="s1">year</code><code class="s1">'</code><code class="p">:</code><code> </code><code class="mi">1921</code><code class="p">}</code><code class="p">,</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO6-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO6-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO6-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO6-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Note that, unlike in our CSV file conversion, the integer type of the year column is preserved.</p></dd>
</dl>

<p><code>json</code> has the methods <code>loads</code> and <code>dumps</code>, which are counterparts to the file access methods, loading JSON strings to Python containers and dumping Python containers to JSON strings.</p>








<section data-type="sect2" data-pdf-bookmark="Dealing with Dates and Times"><div class="sect2" id="idm140319438702016">
<h2>Dealing with Dates and Times</h2>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="date/time handling" id="DSdate3"></a><a data-type="indexterm" data-primary="dates" id="dates3"></a><a data-type="indexterm" data-primary="times" id="times3"></a>Trying to dump a <code>datetime</code> object to <code>json</code> produces a <code>TypeError</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>

<code class="n">json</code><code class="o">.</code><code class="n">dumps</code><code class="p">(</code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">())</code>
<code class="n">Out</code><code class="p">:</code>
<code class="o">...</code>
<code class="ne">TypeError</code><code class="p">:</code> <code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="p">(</code><code class="mi">2015</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">13</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">25</code><code class="p">,</code> <code class="mi">52</code><code class="p">,</code> <code class="mi">586792</code><code class="p">)</code>
<code class="ow">is</code> <code class="ow">not</code> <code class="n">JSON</code> <code class="n">serializable</code></pre>

<p>When serializing simple datatypes such as strings or numbers, the default <code>json</code> encoders and decoders are fine. But for more specialized data such as dates, you will need to do your own encoding and decoding. This isn’t as hard as it sounds and quickly becomes routine. Let’s first look at  encoding your Python <a href="https://docs.python.org/2/library/datetime.html#datetime-objects"><code>datetime</code>s</a> into sensible JSON strings.</p>

<p>The easiest way to encode Python data containing <code>datetime</code>s is to create a custom encoder like the one shown in <a data-type="xref" href="#data_json_time">Example 3-2</a>, which is provided to the <code>json.dumps</code> method as a <code>cls</code> argument. This encoder is applied to each object in your data in turn and converts dates or datetimes to their ISO-format string (see <a data-type="xref" href="#sect_datetimes">“Dealing with Dates, Times, and Complex Data”</a>).</p>
<div id="data_json_time" data-type="example">
<h5><span class="label">Example 3-2. </span>Encoding a Python datetime to JSON</h5>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code><code> </code><code class="nn">datetime</code><code>
</code><code class="kn">from</code><code> </code><code class="nn">dateutil</code><code> </code><code class="kn">import</code><code> </code><code class="n">parser</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">json</code><code>
</code><code>
</code><code>
</code><code class="k">class</code><code> </code><code class="nc">JSONDateTimeEncoder</code><code class="p">(</code><code class="n">json</code><code class="o">.</code><code class="n">JSONEncoder</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="k">def</code><code> </code><code class="nf">default</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">obj</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="nb">isinstance</code><code class="p">(</code><code class="n">obj</code><code class="p">,</code><code> </code><code class="p">(</code><code class="n">datetime</code><code class="o">.</code><code class="n">date</code><code class="p">,</code><code> </code><code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-2" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>            </code><code class="k">return</code><code> </code><code class="n">obj</code><code class="o">.</code><code class="n">isoformat</code><code class="p">(</code><code class="p">)</code><code>
</code><code>        </code><code class="k">else</code><code class="p">:</code><code>
</code><code>            </code><code class="k">return</code><code> </code><code class="n">json</code><code class="o">.</code><code class="n">JSONEncoder</code><code class="o">.</code><code class="n">default</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">obj</code><code class="p">)</code><code>
</code><code>
</code><code class="k">def</code><code> </code><code class="nf">dumps</code><code class="p">(</code><code class="n">obj</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">json</code><code class="o">.</code><code class="n">dumps</code><code class="p">(</code><code class="n">obj</code><code class="p">,</code><code> </code><code class="n">cls</code><code class="o">=</code><code class="n">JSONDateTimeEncoder</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-3" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-3"><img src="3.png" alt="3" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Subclasses  a <code>JSONEncoder</code> in order to create customized date-handling one.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-2" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Tests for a <code>datetime</code> object and if true, returns the <code>isoformat</code> of any dates or datetimes (e.g., <em>2015-09-13T10:25:52.586792</em>).</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-3" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO7-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>Uses the <code>cls</code> argument to set a custom date encoder.</p></dd>
</dl></div>

<p>Let’s see how our new <code>dumps</code> method copes with some <code>datetime</code> data:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">now_str</code> <code class="o">=</code> <code class="n">dumps</code><code class="p">({</code><code class="s1">'time'</code><code class="p">:</code> <code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">()})</code>
<code class="n">now_str</code>
<code class="n">Out</code><code class="p">:</code>
<code class="s1">'{"time": "2015-09-13T10:25:52.586792"}'</code></pre>

<p>The <code>time</code> field is correctly converted into an ISO-format string, ready to be decoded into a JavaScript <code>Date</code> object (see <a data-type="xref" href="#sect_datetimes">“Dealing with Dates, Times, and Complex Data”</a> for a demonstration).</p>

<p>While you could write a generic decoder to cope with date strings in arbitrary JSON files,<sup><a data-type="noteref" id="idm140319438301600-marker" href="ch03.html#idm140319438301600">2</a></sup> it’s probably not advisable. Date strings come in so many weird and wonderful varieties that this is a job best done by hand on what is pretty much always a known dataset.</p>

<p>The venerable <code>strptime</code> method, part of the <code>datetime.datetime</code> package, is good for the job of turning a time string in a known format into a Python <code>datetime</code> instance:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">In</code><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">:</code><code> </code><code class="kn">from</code><code> </code><code class="nn">datetime</code><code> </code><code class="kn">import</code><code> </code><code class="n">datetime</code><code>
</code><code>
</code><code class="n">In</code><code> </code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="p">:</code><code> </code><code class="n">time_str</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">2012/01/01 12:32:11</code><code class="s1">'</code><code>
</code><code>
</code><code class="n">In</code><code> </code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code class="p">:</code><code> </code><code class="n">dt</code><code> </code><code class="o">=</code><code> </code><code class="n">datetime</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="n">time_str</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="si">%Y</code><code class="s1">/</code><code class="si">%m</code><code class="s1">/</code><code class="si">%d</code><code class="s1"> </code><code class="si">%H</code><code class="s1">:</code><code class="si">%M</code><code class="s1">:</code><code class="si">%S</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO8-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO8-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code class="n">In</code><code> </code><code class="p">[</code><code class="mi">3</code><code class="p">]</code><code class="p">:</code><code> </code><code class="n">dt</code><code>
</code><code class="n">Out</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code class="p">:</code><code> </code><code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="p">(</code><code class="mi">2012</code><code class="p">,</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="mi">12</code><code class="p">,</code><code> </code><code class="mi">32</code><code class="p">,</code><code> </code><code class="mi">11</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO8-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO8-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p><code>strptime</code> tries to match the time string to a format string using various directives such as <code>%Y</code> (year with century) and <code>%H</code> (hour as a zero-padded decimal number). If successful, it creates a Python <code>datetime</code> instance. See <a href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior">the Python docs</a> for a full list of the directives available.</p></dd>
</dl>

<p>If <code>strptime</code> is fed a time string that does not match its format, it throws a handy <code>ValueError</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">dt</code> <code class="o">=</code> <code class="n">datetime</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="s1">'1/2/2012 12:32:11'</code><code class="p">,</code> <code class="s1">'</code><code class="si">%Y</code><code class="s1">/</code><code class="si">%m</code><code class="s1">/</code><code class="si">%d</code><code class="s1"> </code><code class="si">%H</code><code class="s1">:</code><code class="si">%M</code><code class="s1">:</code><code class="si">%S</code><code class="s1">'</code><code class="p">)</code>
<code class="o">-----------------------------------------------------------</code>
<code class="ne">ValueError</code>                <code class="n">Traceback</code> <code class="p">(</code><code class="n">most</code> <code class="n">recent</code> <code class="n">call</code> <code class="n">last</code><code class="p">)</code>
<code class="o">&lt;</code><code class="n">ipython</code><code class="o">-</code><code class="nb">input</code><code class="o">-</code><code class="mi">111</code><code class="o">-</code><code class="n">af657749a9fe</code><code class="o">&gt;</code> <code class="ow">in</code> <code class="o">&lt;</code><code class="n">module</code><code class="o">&gt;</code><code class="p">()</code>
<code class="o">----&gt;</code> <code class="mi">1</code> <code class="n">dt</code> <code class="o">=</code> <code class="n">datetime</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="s1">'1/2/2012 12:32:11'</code><code class="p">,</code>\
    <code class="s1">'</code><code class="si">%Y</code><code class="s1">/</code><code class="si">%m</code><code class="s1">/</code><code class="si">%d</code><code class="s1"> </code><code class="si">%H</code><code class="s1">:</code><code class="si">%M</code><code class="s1">:</code><code class="si">%S</code><code class="s1">'</code><code class="p">)</code>
<code class="o">...</code>
<code class="ne">ValueError</code><code class="p">:</code> <code class="n">time</code> <code class="n">data</code> <code class="s1">'1/2/2012 12:32:11'</code> <code class="n">does</code> <code class="ow">not</code> <code class="n">match</code>
            <code class="n">format</code> <code class="s1">'</code><code class="si">%Y</code><code class="s1">/</code><code class="si">%m</code><code class="s1">/</code><code class="si">%d</code><code class="s1"> </code><code class="si">%H</code><code class="s1">:</code><code class="si">%M</code><code class="s1">:</code><code class="si">%S</code><code class="s1">'</code></pre>

<p>So to convert date fields of a known format into <code>datetime</code>s for a <code>data</code> list of dictionaries, you could do something like this:</p>

<pre data-type="programlisting" data-code-language="python"><code class="k">for</code> <code class="n">d</code> <code class="ow">in</code> <code class="n">data</code><code class="p">:</code>
     <code class="k">try</code><code class="p">:</code>
         <code class="n">d</code><code class="p">[</code><code class="s1">'date'</code><code class="p">]</code> <code class="o">=</code> <code class="n">datetime</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="n">d</code><code class="p">[</code><code class="s1">'date'</code><code class="p">],</code>\
           <code class="s1">'</code><code class="si">%Y</code><code class="s1">/</code><code class="si">%m</code><code class="s1">/</code><code class="si">%d</code><code class="s1"> </code><code class="si">%H</code><code class="s1">:</code><code class="si">%M</code><code class="s1">:</code><code class="si">%S</code><code class="s1">'</code><code class="p">)</code>
     <code class="k">except</code> <code class="ne">ValueError</code><code class="p">:</code>
         <code class="k">print</code><code class="p">(</code><code class="s1">'Oops! - invalid date for '</code> <code class="o">+</code> <code class="nb">repr</code><code class="p">(</code><code class="n">d</code><code class="p">))</code></pre>

<p>Now that we’ve dealt with the two most popular data file formats, let’s shift to the big guns and see how to read our data from and write our data to SQL and NoSQL databases.<a data-type="indexterm" data-primary="" data-startref="times3" id="idm140319437845616"></a><a data-type="indexterm" data-primary="" data-startref="dates3" id="idm140319437850944"></a><a data-type="indexterm" data-primary="" data-startref="DSdate3" id="idm140319437850032"></a></p>
</div></section>





</div></section>













<section data-type="sect1" class="pagebreak-before" data-pdf-bookmark="SQL"><div class="sect1" id="read_write_sql">
<h1>SQL</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="SQL databases" id="DSsql3"></a><a data-type="indexterm" data-primary="SQLAlchemy" data-secondary="benefits of" id="idm140319438050688"></a><a data-type="indexterm" data-primary="databases" data-secondary="SQL" id="DBsql3"></a>For interacting with an SQL database, SQLAlchemy is the most popular and, in my opinion, best Python library. It allows you to use raw SQL instructions if speed and efficiency is an issue, but also provides a powerful object-relational mapping (ORM) that allows you to operate on SQL tables using a high-level, Pythonic API, treating them essentially as Python classes.</p>

<p>Reading and writing data using SQL while allowing the user to treat that data as a Python container is a complicated process, and though SQLAlchemy is far more user-friendly than a low-level SQL engine, it is still a fairly complex library. I’ll cover the basics here, using our data as a target, but encourage you to spend a little time reading some of the rather excellent documentation on <a href="http://www.sqlalchemy.org/library.html#reference">SQLAlchemy</a>. Let’s remind ourselves of the <code>nobel_winners</code> dataset we’re aiming to write and read:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">nobel_winners</code> <code class="o">=</code> <code class="p">[</code>
 <code class="p">{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
  <code class="o">...</code>
<code class="p">]</code></pre>

<p>Let’s first write our target data to an SQLite file using SQLAlchemy, starting by creating the database engine.</p>








<section data-type="sect2" data-pdf-bookmark="Creating the Database Engine"><div class="sect2" id="sql_engine">
<h2>Creating the Database Engine</h2>

<p><a data-type="indexterm" data-primary="SQLAlchemy" data-secondary="database engine creation" id="idm140319437828784"></a>The first thing you need to do when starting an SQLAlchemy session is to create a database engine. This engine will establish a connection with the database in question and perform any conversions needed to the generic SQL instructions generated by SQLAlchemy and the data being returned.</p>

<p>There are engines for pretty much every popular database, as well as a <em>memory</em> option, which holds the database in RAM, allowing fast access for testing.<sup><a data-type="noteref" id="idm140319437826608-marker" href="ch03.html#idm140319437826608">3</a></sup>  The great thing about these engines is that they are interchangeable, which means you could develop your code using the convenient file-based SQLite database and then switch during production to something a little more industrial, such as Postgresql, by changing a single config string. Check <a href="http://docs.sqlalchemy.org/en/rel_1_0/core/engines.html">SQLAlchemy</a> for the full list of engines available.</p>

<p>The form for specifying a database URL is:</p>

<pre data-type="programlisting" data-code-language="bash">dialect+driver://username:password@host:port/database</pre>

<p>So, to connect to a <code>'nobel_prize'</code> MySQL database running on localhost requires something like the following. Note that <code>create_engine</code> does not actually make any SQL requests at this point, but merely sets up the framework for doing so.<sup><a data-type="noteref" id="idm140319437799136-marker" href="ch03.html#idm140319437799136">4</a></sup></p>

<pre data-type="programlisting" data-code-language="python"><code class="n">engine</code> <code class="o">=</code> <code class="n">create_engine</code><code class="p">(</code>\
           <code class="s1">'mysql://kyran:mypsswd@localhost/nobel_prize'</code><code class="p">)</code></pre>

<p>We’ll use a file-based SQLite database, setting the <code>echo</code> argument to <code>True</code>, which will output any SQL instructions generated by SQLAlchemy. Note the use of three backslashes after the colon:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">sqlalchemy</code> <code class="kn">import</code> <code class="n">create_engine</code>

<code class="n">engine</code> <code class="o">=</code> <code class="n">create_engine</code><code class="p">(</code>\
            <code class="s1">'sqlite:///data/nobel_prize.db'</code><code class="p">,</code> <code class="n">echo</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code></pre>

<p>SQLAlchemy offers various ways to engage with databases, but I recommend using the more recent declarative style unless there are good reasons to go with something more low-level and fine-grained. In essence, with declarative mapping, you subclass your Python SQL-table classes from a base, and SQLAlchemy introspects their structure and relationships. See <a href="http://bit.ly/1tu8qlU">SQLAlchemy</a> for more details.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Defining the Database Tables"><div class="sect2" id="sql_schema">
<h2>Defining the Database Tables</h2>

<p><a data-type="indexterm" data-primary="SQLAlchemy" data-secondary="database table definition" id="idm140319437818480"></a>We first create a <code>Base</code> class using <code>declarative_base</code>. This base will be used to create table classes, from which SQLAlchemy will create the database’s table schemas. You can use these table classes to interact with the database in a fairly Pythonic fashion:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">sqlalchemy.ext.declarative</code> <code class="kn">import</code> <code class="n">declarative_base</code>

<code class="n">Base</code> <code class="o">=</code> <code class="n">declarative_base</code><code class="p">()</code></pre>

<p>Note that most SQL libraries require you to formally define table schemas. This is in contrast to such schema-less NoSQL variants as MongoDB. We’ll take a look at the Dataset library later in this chapter, which enables schemaless SQL.</p>

<p>Using this <code>Base</code>, we define our various tables—in our case, a single <code>Winner</code> table. <a data-type="xref" href="#data_sql_base">Example 3-3</a> shows how to subclass <code>Base</code> and use SQLAlchemy’s datatypes to define a table schema. Note the <code>__tablename__</code> member, which will be used to name the SQL table and as a keyword to retrieve it, and the optional custom <code>__repr__</code> method, which will be used when printing a table row.</p>
<div id="data_sql_base" data-type="example">
<h5><span class="label">Example 3-3. </span>Defining an SQL database table</h5>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">sqlalchemy</code> <code class="kn">import</code> <code class="n">Column</code><code class="p">,</code> <code class="n">Integer</code><code class="p">,</code> <code class="n">String</code><code class="p">,</code> <code class="n">Enum</code>
<code class="o">//</code> <code class="o">...</code>

<code class="k">class</code> <code class="nc">Winner</code><code class="p">(</code><code class="n">Base</code><code class="p">):</code>
     <code class="n">__tablename__</code> <code class="o">=</code> <code class="s1">'winners'</code>

     <code class="nb">id</code> <code class="o">=</code> <code class="n">Column</code><code class="p">(</code><code class="n">Integer</code><code class="p">,</code> <code class="n">primary_key</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code>
     <code class="n">name</code> <code class="o">=</code> <code class="n">Column</code><code class="p">(</code><code class="n">String</code><code class="p">)</code>
     <code class="n">category</code> <code class="o">=</code> <code class="n">Column</code><code class="p">(</code><code class="n">String</code><code class="p">)</code>
     <code class="n">year</code> <code class="o">=</code> <code class="n">Column</code><code class="p">(</code><code class="n">Integer</code><code class="p">)</code>
     <code class="n">nationality</code> <code class="o">=</code> <code class="n">Column</code><code class="p">(</code><code class="n">String</code><code class="p">)</code>
     <code class="n">sex</code> <code class="o">=</code> <code class="n">Column</code><code class="p">(</code><code class="n">Enum</code><code class="p">(</code><code class="s1">'male'</code><code class="p">,</code> <code class="s1">'female'</code><code class="p">))</code>

     <code class="k">def</code> <code class="nf-Magic">__repr__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>
        <code class="k">return</code> <code class="s2">"&lt;Winner(name='</code><code class="si">%s</code><code class="s2">', category='</code><code class="si">%s</code><code class="s2">', year='</code><code class="si">%s</code><code class="s2">')&gt;"</code>\
            <code class="o">%</code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">name</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">category</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">year</code><code class="p">)</code></pre></div>

<p>Having declared our <code>Base</code> subclass in <a data-type="xref" href="#data_sql_base">Example 3-3</a>, we supply its <code>metadata</code> <code>create_all</code> method with our database engine to create our database.<sup><a data-type="noteref" id="idm140319437670256-marker" href="ch03.html#idm140319437670256">5</a></sup> Because we set the <code>echo</code> argument to <code>True</code> when creating the engine, we can see the SQL instructions generated by SQLAlchemy from the command line:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">Base</code><code class="o">.</code><code class="n">metadata</code><code class="o">.</code><code class="n">create_all</code><code class="p">(</code><code class="n">engine</code><code class="p">)</code>

<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code> <code class="n">SELECT</code> <code class="n">CAST</code><code class="p">(</code><code class="s1">'test plain</code>
<code class="n">returns</code><code class="s1">' AS VARCHAR(60)) AS anon_1</code>
<code class="o">...</code>
<code class="n">INFO</code> <code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code>
<code class="n">CREATE</code> <code class="n">TABLE</code> <code class="n">winners</code> <code class="p">(</code>
	<code class="nb">id</code> <code class="n">INTEGER</code> <code class="n">NOT</code> <code class="n">NULL</code><code class="p">,</code>
	<code class="n">name</code> <code class="n">VARCHAR</code><code class="p">,</code>
	<code class="n">category</code> <code class="n">VARCHAR</code><code class="p">,</code>
	<code class="n">year</code> <code class="n">INTEGER</code><code class="p">,</code>
	<code class="n">nationality</code> <code class="n">VARCHAR</code><code class="p">,</code>
	<code class="n">sex</code> <code class="n">VARCHAR</code><code class="p">(</code><code class="mi">6</code><code class="p">),</code>
	<code class="n">PRIMARY</code> <code class="n">KEY</code> <code class="p">(</code><code class="nb">id</code><code class="p">),</code>
	<code class="n">CHECK</code> <code class="p">(</code><code class="n">sex</code> <code class="n">IN</code> <code class="p">(</code><code class="s1">'male'</code><code class="p">,</code> <code class="s1">'female'</code><code class="p">))</code>
<code class="p">)</code>
<code class="o">...</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:</code><code class="n">COMMIT</code></pre>

<p>With our new <code>winners</code> table declared, we can start adding winner instances to it.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Adding Instances with a Session"><div class="sect2" id="idm140319437993664">
<h2>Adding Instances with a Session</h2>

<p><a data-type="indexterm" data-primary="SQLAlchemy" data-secondary="adding instances" id="idm140319437578000"></a>Now that we have created our database, we need a session to interact with:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">sqlalchemy.orm</code> <code class="kn">import</code> <code class="n">sessionmaker</code>

<code class="n">Session</code> <code class="o">=</code> <code class="n">sessionmaker</code><code class="p">(</code><code class="n">bind</code><code class="o">=</code><code class="n">engine</code><code class="p">)</code>
<code class="n">session</code> <code class="o">=</code> <code class="n">Session</code><code class="p">()</code></pre>

<p>We can now use our <code>Winner</code> class to create instances and table rows and add them to the session:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">albert</code><code> </code><code class="o">=</code><code> </code><code class="n">Winner</code><code class="p">(</code><code class="o">*</code><code class="o">*</code><code class="n">nobel_winners</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">session</code><code class="o">.</code><code class="n">add</code><code class="p">(</code><code class="n">albert</code><code class="p">)</code><code>
</code><code class="n">session</code><code class="o">.</code><code class="n">new</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-2" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="n">IdentitySet</code><code class="p">(</code><code class="p">[</code><code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'</code><code class="s1">Albert Einstein</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">category</code><code class="o">=</code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>             </code><code class="n">year</code><code class="o">=</code><code class="s1">'</code><code class="s1">1921</code><code class="s1">'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">]</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Python’s handy ** operator unpacks our first <code>nobel_winners</code> member into key-value pairs: <code>(name='Albert Einstein', category='Physics'...)</code>.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-2" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO9-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p><code>new</code> is the set of any items that have been added to this session.</p></dd>
</dl>

<p>Note that all database insertions and deletions take place in Python. It’s only when we use the <code>commit</code> method that the database is altered.</p>
<div data-type="tip"><h6>Tip</h6>
<p>Use as few commits as possible, allowing SQLAlchemy to work its magic behind the scenes. When you commit, your various database manipulations should be summarized by SQLAlchemy and communicated in an efficient fashion. Commits involve establishing a database handshake and negotiating transactions, which is often a slow process and one you want to limit as much as possible, leveraging SQLAlchemy’s bookkeeping abilities to full advantage.</p>
</div>

<p>As the <code>new</code> method shows, we have added a <code>Winner</code> to the session. We can remove the object using <code>expunge</code>, leaving an empty <code>IdentitySet</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">session</code><code class="o">.</code><code class="n">expunge</code><code class="p">(</code><code class="n">albert</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO10-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO10-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">session</code><code class="o">.</code><code class="n">new</code><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="n">IdentitySet</code><code class="p">(</code><code class="p">[</code><code class="p">]</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO10-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO10-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Remove the instance from the session (there is an <code>expunge_all</code> method that removes all new objects added to the session).</p></dd>
</dl>

<p>At this point, no database insertions or deletions have taken place. Let’s add all the members of our <code>nobel_winners</code> list to the session and commit them to the database:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">winner_rows</code> <code class="o">=</code> <code class="p">[</code><code class="n">Winner</code><code class="p">(</code><code class="o">**</code><code class="n">w</code><code class="p">)</code> <code class="k">for</code> <code class="n">w</code> <code class="ow">in</code> <code class="n">nobel_winners</code><code class="p">]</code>
<code class="n">session</code><code class="o">.</code><code class="n">add_all</code><code class="p">(</code><code class="n">winner_rows</code><code class="p">)</code>
<code class="n">session</code><code class="o">.</code><code class="n">commit</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:</code><code class="n">BEGIN</code> <code class="p">(</code><code class="n">implicit</code><code class="p">)</code>
<code class="o">...</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:</code><code class="n">INSERT</code> <code class="n">INTO</code> <code class="n">winners</code> <code class="p">(</code><code class="n">name</code><code class="p">,</code>
<code class="n">category</code><code class="p">,</code> <code class="n">year</code><code class="p">,</code> <code class="n">nationality</code><code class="p">,</code> <code class="n">sex</code><code class="p">)</code> <code class="n">VALUES</code> <code class="p">(</code><code class="err">?</code><code class="p">,</code> <code class="err">?</code><code class="p">,</code> <code class="err">?</code><code class="p">,</code> <code class="err">?</code><code class="p">,</code> <code class="err">?</code><code class="p">)</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:(</code><code class="s-Affix">u</code><code class="s1">'Albert Einstein'</code><code class="p">,</code>
<code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">,</code> <code class="mi">1921</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Swiss'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">)</code>
<code class="o">...</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:</code><code class="n">COMMIT</code></pre>

<p>Now that we’ve committed our <code>nobel_winners</code> data to the database, let’s see what we can do with it and how to recreate the target list in <a data-type="xref" href="#data_dummydata">Example 3-1</a>.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Querying the Database"><div class="sect2" id="idm140319437578624">
<h2>Querying the Database</h2>

<p><a data-type="indexterm" data-primary="SQLAlchemy" data-secondary="queries" id="SQLAquery"></a>To access data, you use the <code>session</code>’s <code>query</code> method, the result of which can be filtered, grouped, and intersected, allowing the full range of standard SQL data retrieval. You can check out available querying methods in the <a href="http://docs.sqlalchemy.org/en/rel_1_0/orm/query.html">SQLAlchemy docs</a>. For now, I’ll quickly run through some of the most common queries on our Nobel <span class="keep-together">dataset</span>.</p>

<p>Let’s first count the number of rows in our winners’ table:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">count</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="mi">3</code></pre>

<p>Next, let’s retrieve all Swiss winners:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">result</code><code> </code><code class="o">=</code><code> </code><code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">filter_by</code><code class="p">(</code><code class="n">nationality</code><code class="o">=</code><code class="s1">'</code><code class="s1">Swiss</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO11-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO11-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="nb">list</code><code class="p">(</code><code class="n">result</code><code class="p">)</code><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="p">[</code><code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'</code><code class="s1">Albert Einstein</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">category</code><code class="o">=</code><code class="s1">'</code><code class="s1">Physics</code><code class="s1">'</code><code class="p">,</code><code>\
</code><code>  </code><code class="n">year</code><code class="o">=</code><code class="s1">'</code><code class="s1">1921</code><code class="s1">'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">]</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO11-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO11-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p><code>filter_by</code> uses keyword expressions; its SQL expressions counterpart is <code>filter</code>—for example, <code>filter(Winner.nationality == <em>Swiss</em>)</code>.</p></dd>
</dl>

<p>Now let’s get all non-Swiss Physics winners:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">result</code> <code class="o">=</code> <code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">filter</code><code class="p">(</code>\
             <code class="n">Winner</code><code class="o">.</code><code class="n">category</code> <code class="o">==</code> <code class="s1">'Physics'</code><code class="p">,</code> \
             <code class="n">Winner</code><code class="o">.</code><code class="n">nationality</code> <code class="o">!=</code> <code class="s1">'Swiss'</code><code class="p">)</code>
<code class="nb">list</code><code class="p">(</code><code class="n">result</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[</code><code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Paul Dirac'</code><code class="p">,</code> <code class="n">category</code><code class="o">=</code><code class="s1">'Physics'</code><code class="p">,</code> <code class="n">year</code><code class="o">=</code><code class="s1">'1933'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">]</code></pre>

<p>Here’s how to get a row based on ID number:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Marie Curie'</code><code class="p">,</code> <code class="n">category</code><code class="o">=</code><code class="s1">'Chemistry'</code><code class="p">,</code> <code class="n">year</code><code class="o">=</code><code class="s1">'1911'</code><code class="p">)</code><code class="o">&gt;</code></pre>

<p>Now let’s retrieve winners ordered by year:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">res</code> <code class="o">=</code> <code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">order_by</code><code class="p">(</code><code class="s1">'year'</code><code class="p">)</code>
<code class="nb">list</code><code class="p">(</code><code class="n">res</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[</code><code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Marie Curie'</code><code class="p">,</code> <code class="n">category</code><code class="o">=</code><code class="s1">'Chemistry'</code><code class="p">,</code>\
<code class="n">year</code><code class="o">=</code><code class="s1">'1911'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">,</code>
 <code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Albert Einstein'</code><code class="p">,</code> <code class="n">category</code><code class="o">=</code><code class="s1">'Physics'</code><code class="p">,</code>\
<code class="n">year</code><code class="o">=</code><code class="s1">'1921'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">,</code>
 <code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Paul Dirac'</code><code class="p">,</code> <code class="n">category</code><code class="o">=</code><code class="s1">'Physics'</code><code class="p">,</code> <code class="n">year</code><code class="o">=</code><code class="s1">'1933'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">]</code></pre>

<p>To reconstruct our target list requires a little effort converting the <code>Winner</code> objects returned by our session query into Python <code>dict</code>s. Let’s write a little function to create a <code>dict</code> from an SQLAlchemy class. We’ll use a little table introspection to get the column labels (see <a data-type="xref" href="#data_to_dict">Example 3-4</a>).</p>
<div id="data_to_dict" data-type="example">
<h5><span class="label">Example 3-4. </span>Converts an SQLAlchemy instance to a dict</h5>

<pre data-type="programlisting" data-code-language="python"><code class="k">def</code><code> </code><code class="nf">inst_to_dict</code><code class="p">(</code><code class="n">inst</code><code class="p">,</code><code> </code><code class="n">delete_id</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">dat</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code class="p">}</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">column</code><code> </code><code class="ow">in</code><code> </code><code class="n">inst</code><code class="o">.</code><code class="n">__table__</code><code class="o">.</code><code class="n">columns</code><code class="p">:</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>        </code><code class="n">dat</code><code class="p">[</code><code class="n">column</code><code class="o">.</code><code class="n">name</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="nb">getattr</code><code class="p">(</code><code class="n">inst</code><code class="p">,</code><code> </code><code class="n">column</code><code class="o">.</code><code class="n">name</code><code class="p">)</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="n">delete_id</code><code class="p">:</code><code>
</code><code>        </code><code class="n">dat</code><code class="o">.</code><code class="n">pop</code><code class="p">(</code><code class="s1">'</code><code class="s1">id</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-2" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">dat</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Accesses the instance’s table class to get a list of column objects.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-2" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO12-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>If <code>delete_id</code> is true, remove the SQL primary ID field.</p></dd>
</dl></div>

<p>We can use <a data-type="xref" href="#data_to_dict">Example 3-4</a> to reconstruct our <code>nobel_winners</code> target list:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">winner_rows</code> <code class="o">=</code> <code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code>
<code class="n">nobel_winners</code> <code class="o">=</code> <code class="p">[</code><code class="n">inst_to_dict</code><code class="p">(</code><code class="n">w</code><code class="p">)</code> <code class="k">for</code> <code class="n">w</code> <code class="ow">in</code> <code class="n">winner_rows</code><code class="p">]</code>
<code class="n">nobel_winners</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
  <code class="o">...</code>
<code class="p">]</code></pre>

<p>You can update database rows easily by changing the property of their reflected objects:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">marie</code><code> </code><code class="o">=</code><code> </code><code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">marie</code><code class="o">.</code><code class="n">nationality</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">French</code><code class="s1">'</code><code>
</code><code class="n">session</code><code class="o">.</code><code class="n">dirty</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-2" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code class="n">Out</code><code class="p">:</code><code>
</code><code class="n">IdentitySet</code><code class="p">(</code><code class="p">[</code><code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'</code><code class="s1">Marie Curie</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">category</code><code class="o">=</code><code class="s1">'</code><code class="s1">Chemistry</code><code class="s1">'</code><code class="p">,</code><code>
</code><code class="n">year</code><code class="o">=</code><code class="s1">'</code><code class="s1">1911</code><code class="s1">'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">]</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Fetches Marie Curie, nationality Polish.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-2" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO13-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p><code>dirty</code> shows any changed instances not yet committed to the database.</p></dd>
</dl>

<p>Let’s commit <code>marie</code>’s changes and check that her nationality has changed from Polish to French:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">session</code><code class="o">.</code><code class="n">commit</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:</code><code class="n">UPDATE</code> <code class="n">winners</code> <code class="n">SET</code>
<code class="n">nationality</code><code class="o">=</code><code class="err">?</code> <code class="n">WHERE</code> <code class="n">winners</code><code class="o">.</code><code class="n">id</code> <code class="o">=</code> <code class="err">?</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:(</code><code class="s1">'French'</code><code class="p">,</code> <code class="mi">3</code><code class="p">)</code>
<code class="o">...</code>

<code class="n">session</code><code class="o">.</code><code class="n">dirty</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">IdentitySet</code><code class="p">([])</code>

<code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code><code class="o">.</code><code class="n">nationality</code>
<code class="n">Out</code><code class="p">:</code>
<code class="s1">'French'</code></pre>

<p>In addition to updating database rows, you can delete the results of a query:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">)</code><code class="o">.</code><code class="n">filter_by</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Albert Einstein'</code><code class="p">)</code><code class="o">.</code><code class="n">delete</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:</code><code class="n">DELETE</code> <code class="n">FROM</code> <code class="n">winners</code> <code class="n">WHERE</code>
<code class="n">winners</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="err">?</code>
<code class="n">INFO</code><code class="p">:</code><code class="n">sqlalchemy</code><code class="o">.</code><code class="n">engine</code><code class="o">.</code><code class="n">base</code><code class="o">.</code><code class="n">Engine</code><code class="p">:(</code><code class="s1">'Albert Einstein'</code><code class="p">,)</code>
<code class="mi">1</code>

<code class="nb">list</code><code class="p">(</code><code class="n">session</code><code class="o">.</code><code class="n">query</code><code class="p">(</code><code class="n">Winner</code><code class="p">))</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[</code><code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Paul Dirac'</code><code class="p">,</code> <code class="n">category</code><code class="o">=</code><code class="s1">'Physics'</code><code class="p">,</code> <code class="n">year</code><code class="o">=</code><code class="s1">'1933'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">,</code>
 <code class="o">&lt;</code><code class="n">Winner</code><code class="p">(</code><code class="n">name</code><code class="o">=</code><code class="s1">'Marie Curie'</code><code class="p">,</code> <code class="n">category</code><code class="o">=</code><code class="s1">'Chemistry'</code><code class="p">,</code>\
 <code class="n">year</code><code class="o">=</code><code class="s1">'1911'</code><code class="p">)</code><code class="o">&gt;</code><code class="p">]</code></pre>

<p>You can also drop the whole table if required, using the declarative class’s <code>__table__</code> attribute:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">Winner</code><code class="o">.</code><code class="n">__table__</code><code class="o">.</code><code class="n">drop</code><code class="p">(</code><code class="n">engine</code><code class="p">)</code></pre>

<p>In this section, we’ve dealt with a single winners table, without any foreign keys or relationship to any other tables, akin to a CSV or JSON file. SQLAlchemy adds the same level of convenience in dealing with many-to-one, one-to-many, and other database table relationships as it does to basic querying using implicit joins, by supplying the <code>query</code> method with more than one table class or explicitly using the query’s <code>join</code> method. Check out the examples <a href="http://docs.sqlalchemy.org/en/rel_1_0/orm/tutorial.html#querying-with-joins">in the SQLAlchemy docs</a> for more details.<a data-type="indexterm" data-primary="" data-startref="SQLAquery" id="idm140319436310096"></a></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Easier SQL with Dataset"><div class="sect2" id="dataset">
<h2>Easier SQL with Dataset</h2>

<p><a data-type="indexterm" data-primary="Dataset library" id="dataset3"></a><a data-type="indexterm" data-primary="SQLAlchemy" data-secondary="Dataset module" id="SQLAdataset3"></a>One library I’ve found myself using a fair deal recently is <a href="https://dataset.readthedocs.org/en/latest/">Dataset</a>, a module designed to make working with SQL databases a little easier and more Pythonic than existing powerhouses like SQLAlchemy.<sup><a data-type="noteref" id="idm140319436308000-marker" href="ch03.html#idm140319436308000">6</a></sup> Dataset tries to provide the same degree of convenience you get when working with schema-less NoSQL databases such as MongoDB by removing a lot of the formal boilerplate, such as schema definitions, which are demanded by the more conventional libraries. Dataset is built on top of SQLAlchemy, which means it works with pretty much all major databases and can exploit the power, robustness, and maturity of that best-of-breed library. Let’s see how it deals with reading and writing our target dataset (from <a data-type="xref" href="#data_dummydata">Example 3-1</a>).</p>

<p>Let’s use the SQLite <em>nobel_prize.db</em> database we’ve just created to put Dataset through its paces. First we connect to our SQL database, using the same URL/file format as SQLAlchemy:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code> <code class="nn">dataset</code>

<code class="n">db</code> <code class="o">=</code> <code class="n">dataset</code><code class="o">.</code><code class="n">connect</code><code class="p">(</code><code class="s1">'sqlite:///data/nobel_prize.db'</code><code class="p">)</code></pre>

<p>To get our list of winners, we grab a table from our <code>db</code> database, using its name as a key, and then use the <code>find</code> method without arguments to return all winners:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">wtable</code> <code class="o">=</code> <code class="n">db</code><code class="p">[</code><code class="s1">'winners'</code><code class="p">]</code>
<code class="n">winners</code> <code class="o">=</code> <code class="n">wtable</code><code class="o">.</code><code class="n">find</code><code class="p">()</code>
<code class="n">winners</code> <code class="o">=</code> <code class="nb">list</code><code class="p">(</code><code class="n">winners</code><code class="p">)</code>
<code class="n">winners</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[</code><code class="n">OrderedDict</code><code class="p">([(</code><code class="s-Affix">u</code><code class="s1">'id'</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Albert Einstein'</code><code class="p">),</code>
 <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">,</code> <code class="mi">1921</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">,</code>
 <code class="s-Affix">u</code><code class="s1">'Swiss'</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">)]),</code> <code class="n">OrderedDict</code><code class="p">([(</code><code class="s-Affix">u</code><code class="s1">'id'</code><code class="p">,</code> <code class="mi">2</code><code class="p">),</code>
 <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Paul Dirac'</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">),</code>
 <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">,</code> <code class="mi">1933</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'British'</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">,</code>
 <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">)]),</code> <code class="n">OrderedDict</code><code class="p">([(</code><code class="s-Affix">u</code><code class="s1">'id'</code><code class="p">,</code> <code class="mi">3</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Marie</code>
 <code class="n">Curie</code><code class="s1">'), (u'</code><code class="n">category</code><code class="s1">', u'</code><code class="n">Chemistry</code><code class="s1">'), (u'</code><code class="n">year</code><code class="s1">', 1911),</code>
 <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Polish'</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'female'</code><code class="p">)])]</code></pre>

<p>Note that the instances returned by Dataset’s <code>find</code> method are <code>OrderedDict</code>s. These useful containers are an extension of Python’s <code>dict</code> class and behave just like dictionaries except that they remember the order in which items were inserted, meaning you can guarantee the result of iteration, pop the last item inserted, and more. This is a very handy additional functionality.</p>
<div data-type="tip"><h6>Tip</h6>
<p>One of the most useful Python “batteries” for data-mungers is <code>collections</code>, which is where <code>Dataset</code>’s <code>OrderedDict</code>s come from. The <code>defaultdict</code> and <code>Counter</code> classes are particularly useful. Check out what’s available in the <a href="https://docs.python.org/2/library/collections.html">Python docs</a>.</p>
</div>

<p>Let’s recreate our winners table with <code>Dataset</code>, first dropping the existing one:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">wtable</code> <code class="o">=</code> <code class="n">db</code><code class="p">[</code><code class="s1">'winners'</code><code class="p">]</code>
<code class="n">wtable</code><code class="o">.</code><code class="n">drop</code><code class="p">()</code>

<code class="n">wtable</code> <code class="o">=</code> <code class="n">db</code><code class="p">[</code><code class="s1">'winners'</code><code class="p">]</code>
<code class="n">wtable</code><code class="o">.</code><code class="n">find</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[]</code></pre>

<p>To recreate our dropped winners table, we don’t need to define a schema as with SQLAlchemy (see <a data-type="xref" href="#sql_schema">“Defining the Database Tables”</a>). Dataset will infer that from the data we add, doing all the SQL creation implicitly. This is the kind of convenience one is used to when working with collection-based NoSQL databases. Let’s use our <code>nobel_winners</code> dataset (<a data-type="xref" href="#data_dummydata">Example 3-1</a>) to insert some winner dictionaries. We use a database transaction and the <code>with</code> statement to efficiently insert our objects and then commit them.<sup><a data-type="noteref" id="idm140319435929120-marker" href="ch03.html#idm140319435929120">7</a></sup></p>

<pre data-type="programlisting" data-code-language="python"><code class="k">with</code><code> </code><code class="n">db</code><code> </code><code class="k">as</code><code> </code><code class="n">tx</code><code class="p">:</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO14-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO14-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">w</code><code> </code><code class="ow">in</code><code> </code><code class="n">nobel_winners</code><code class="p">:</code><code>
</code><code>        </code><code class="n">tx</code><code class="p">[</code><code class="s1">'</code><code class="s1">winners</code><code class="s1">'</code><code class="p">]</code><code class="o">.</code><code class="n">insert</code><code class="p">(</code><code class="n">w</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO14-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO14-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Use the <code>with</code> statement to guarantee the transaction <code>tx</code> is committed to the database.</p></dd>
</dl>

<p>Let’s check that everything has gone well:</p>

<pre data-type="programlisting" data-code-language="python"><code class="nb">list</code><code class="p">(</code><code class="n">db</code><code class="p">[</code><code class="s1">'winners'</code><code class="p">]</code><code class="o">.</code><code class="n">find</code><code class="p">())</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[</code><code class="n">OrderedDict</code><code class="p">([(</code><code class="s-Affix">u</code><code class="s1">'id'</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Albert Einstein'</code><code class="p">),</code>
<code class="p">(</code><code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">,</code> <code class="mi">1921</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">,</code>
<code class="s-Affix">u</code><code class="s1">'Swiss'</code><code class="p">),</code> <code class="p">(</code><code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">,</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">)]),</code>
<code class="o">...</code>
<code class="p">]</code></pre>

<p>The winners have been correctly inserted and their order of insertion preserved by the <code>OrderedDict</code>.</p>

<p>Dataset is great for basic SQL-based work, particularly retrieving data you might wish to process or visualize. For more advanced manipulation, it allows you to drop down into SQLAlchemy’s core API using the <code>query</code> method.</p>

<p>On top of its huge convenience, Dataset has a <code>freeze</code> method that is a great asset to budding data visualizers. <code>freeze</code> takes the result of an SQL query and turns it into a JSON or CSV file, which is a very convenient way to start playing around with the data with JavaScript/D3:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">winners</code> <code class="o">=</code> <code class="n">db</code><code class="p">[</code><code class="s1">'winners'</code><code class="p">]</code><code class="o">.</code><code class="n">find</code><code class="p">()</code>
<code class="n">dataset</code><code class="o">.</code><code class="n">freeze</code><code class="p">(</code><code class="n">winners</code><code class="p">,</code> <code class="n">format</code><code class="o">=</code><code class="s1">'csv'</code><code class="p">,</code> \
               <code class="n">filename</code><code class="o">=</code><code class="s1">'data/nobel_winners_ds.csv'</code><code class="p">)</code>

<code class="nb">open</code><code class="p">(</code><code class="s1">'data/nobel_winners_ds.csv'</code><code class="p">)</code><code class="o">.</code><code class="n">read</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="s1">'id,name,category,year,nationality,sex</code><code class="se">\r\n</code>
<code class="mi">1</code><code class="p">,</code><code class="n">Albert</code> <code class="n">Einstein</code><code class="p">,</code><code class="n">Physics</code><code class="p">,</code><code class="mi">1921</code><code class="p">,</code><code class="n">Swiss</code><code class="p">,</code><code class="n">male</code>\<code class="n">r</code>\<code class="n">n</code>
<code class="mi">2</code><code class="p">,</code><code class="n">Paul</code> <code class="n">Dirac</code><code class="p">,</code><code class="n">Physics</code><code class="p">,</code><code class="mi">1933</code><code class="p">,</code><code class="n">British</code><code class="p">,</code><code class="n">male</code>\<code class="n">r</code>\<code class="n">n</code>
<code class="mi">3</code><code class="p">,</code><code class="n">Marie</code> <code class="n">Curie</code><code class="p">,</code><code class="n">Chemistry</code><code class="p">,</code><code class="mi">1911</code><code class="p">,</code><code class="n">Polish</code><code class="p">,</code><code class="n">female</code>\<code class="n">r</code>\<code class="n">n</code><code class="s1">'</code></pre>

<p>Now that we’ve covered the basics of working with SQL databases, let’s see how Python makes working with the most popular NoSQL database just as painless.<a data-type="indexterm" data-primary="" data-startref="DSsql3" id="idm140319435986704"></a><a data-type="indexterm" data-primary="" data-startref="DBsql3" id="idm140319435711776"></a><a data-type="indexterm" data-primary="" data-startref="dataset3" id="idm140319435710864"></a><a data-type="indexterm" data-primary="" data-startref="SQLAdataset3" id="idm140319435709920"></a></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="MongoDB"><div class="sect1" id="data_mongodb">
<h1>MongoDB</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="MongoDB" id="DSmongo3"></a><a data-type="indexterm" data-primary="databases" data-secondary="MongoDB" id="DBmongo3"></a><a data-type="indexterm" data-primary="MongoDB" data-secondary="benefits of" id="idm140319435660976"></a>Document-centric datastores like MongoDB offer a lot of convenience to data wranglers. As with all tools, there are good and bad use cases for NoSQL databases. If you have data that has already been refined and processed and don’t anticipate needing SQL’s powerful query language based on optimized table joins, MongoDB will probably prove easier to work with.  MongoDB is a particularly good fit for web dataviz because it uses binary JSON (BSON) as its data format. An extension of JSON, BSON can deal with binary data and <code>datetime</code> objects, and plays very nicely with JavaScript.</p>

<p>Let’s remind ourselves of the target dataset we’re aiming to write and read:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">nobel_winners</code> <code class="o">=</code> <code class="p">[</code>
 <code class="p">{</code><code class="s1">'category'</code><code class="p">:</code> <code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
  <code class="o">...</code>
<code class="p">]</code></pre>

<p><a data-type="indexterm" data-primary="MongoDB" data-secondary="creating collections" id="idm140319435657568"></a>Creating a MongoDB collection with Python is the work of a few lines:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code><code> </code><code class="nn">pymongo</code><code> </code><code class="kn">import</code><code> </code><code class="n">MongoClient</code><code>
</code><code>
</code><code class="n">client</code><code> </code><code class="o">=</code><code> </code><code class="n">MongoClient</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code class="n">db</code><code> </code><code class="o">=</code><code> </code><code class="n">client</code><code class="o">.</code><code class="n">nobel_prize</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-2" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-2"><img src="2.png" alt="2" width="12" height="12"></a><code>
</code><code class="n">coll</code><code> </code><code class="o">=</code><code> </code><code class="n">db</code><code class="o">.</code><code class="n">winners</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-3" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-3"><img src="3.png" alt="3" width="12" height="12"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>Creates a Mongo client, using the default host and ports.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-2" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-2"><img src="2.png" alt="2" width="12" height="12"></a></dt>
<dd><p>Creates or accesses the <code>nobel_prize</code> database.</p></dd>
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-3" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO15-3"><img src="3.png" alt="3" width="12" height="12"></a></dt>
<dd><p>If a <em>winners</em> collection exists, this will retrieve it; otherwise (as in our case), it creates it.</p></dd>
</dl>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm140319435596688">
<h5>Using Constants for MongoDB Access</h5>
<p><a data-type="indexterm" data-primary="MongoDB" data-secondary="accessing with constants" id="idm140319435568496"></a>Accessing and creating a MongoDB database with Python involves the same operation, using dot notation and square-bracket key access:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">db</code> <code class="o">=</code> <code class="n">client</code><code class="o">.</code><code class="n">nobel_prize</code>
<code class="n">db</code> <code class="o">=</code> <code class="n">client</code><code class="p">[</code><code class="s1">'nobel_prize'</code><code class="p">]</code></pre>

<p>This is all very convenient, but it means a single spelling mistake, such as <code>noble_prize</code>, could both create an unwanted database and cause future operations to fail to update the correct one. For this reason, I advise using constant strings to access your MongoDB databases and collections:</p>

<pre data-type="programlisting" data-code-language="python" class="pagebreak-before"><code class="n">DB_NOBEL_PRIZE</code> <code class="o">=</code> <code class="s1">'nobel_prize'</code>
<code class="n">COLL_WINNERS</code> <code class="o">=</code> <code class="s1">'winners'</code>

<code class="n">db</code> <code class="o">=</code> <code class="n">client</code><code class="p">[</code><code class="n">DB_NOBEL_PRIZE</code><code class="p">]</code>
<code class="n">coll</code> <code class="o">=</code> <code class="n">db</code><code class="p">[</code><code class="n">COLL_WINNERS</code><code class="p">]</code></pre>
</div></aside>

<p><a data-type="indexterm" data-primary="MongoDB" data-secondary="accessing" id="idm140319435408256"></a>MongoDB databases run on localhost port 27017 by default but could be anywhere on the Web. They also take an optional username and password. <a data-type="xref" href="#data_get_mongo">Example 3-5</a> shows how to  create a simple utility function to access our database, with standard defaults.</p>
<div id="data_get_mongo" data-type="example">
<h5><span class="label">Example 3-5. </span>Accessing a MongoDB database</h5>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code><code> </code><code class="nn">pymongo</code><code> </code><code class="kn">import</code><code> </code><code class="n">MongoClient</code><code>
</code><code>
</code><code class="k">def</code><code> </code><code class="nf">get_mongo_database</code><code class="p">(</code><code class="n">db_name</code><code class="p">,</code><code> </code><code class="n">host</code><code class="o">=</code><code class="s1">'</code><code class="s1">localhost</code><code class="s1">'</code><code class="p">,</code><code>\
</code><code>                       </code><code class="n">port</code><code class="o">=</code><code class="mi">27017</code><code class="p">,</code><code> </code><code class="n">username</code><code class="o">=</code><code class="bp">None</code><code class="p">,</code><code> </code><code class="n">password</code><code class="o">=</code><code class="bp">None</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="sd">""" Get named database from MongoDB with/out authentication """</code><code>
</code><code>    </code><code class="c1"># make Mongo connection with/out authentication</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="n">username</code><code> </code><code class="ow">and</code><code> </code><code class="n">password</code><code class="p">:</code><code>
</code><code>        </code><code class="n">mongo_uri</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">mongodb://</code><code class="si">%s</code><code class="s1">:</code><code class="si">%s</code><code class="s1">@</code><code class="si">%s</code><code class="s1">/</code><code class="si">%s</code><code class="s1">'</code><code class="o">%</code><code>\</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO16-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO16-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>        </code><code class="p">(</code><code class="n">username</code><code class="p">,</code><code> </code><code class="n">password</code><code class="p">,</code><code> </code><code class="n">host</code><code class="p">,</code><code> </code><code class="n">db_name</code><code class="p">)</code><code>
</code><code>        </code><code class="n">conn</code><code> </code><code class="o">=</code><code> </code><code class="n">MongoClient</code><code class="p">(</code><code class="n">mongo_uri</code><code class="p">)</code><code>
</code><code>    </code><code class="k">else</code><code class="p">:</code><code>
</code><code>        </code><code class="n">conn</code><code> </code><code class="o">=</code><code> </code><code class="n">MongoClient</code><code class="p">(</code><code class="n">host</code><code class="p">,</code><code> </code><code class="n">port</code><code class="p">)</code><code>
</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">conn</code><code class="p">[</code><code class="n">db_name</code><code class="p">]</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO16-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO16-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>We specify the database name in the MongoDB URI (Uniform Resource Identifier) as the user may not have general privileges for the database.</p></dd>
</dl></div>

<p>We can now create a Nobel Prize database and add our target dataset (<a data-type="xref" href="#data_dummydata">Example 3-1</a>). Let’s first get a winners collection, using the string constants for access:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">db</code> <code class="o">=</code> <code class="n">get_mongo_database</code><code class="p">(</code><code class="n">DB_NOBEL_PRIZE</code><code class="p">)</code>
<code class="n">coll</code> <code class="o">=</code> <code class="n">db</code><code class="p">[</code><code class="n">COLL_WINNERS</code><code class="p">]</code></pre>

<p>Inserting our Nobel Prize dataset is then as easy as can be:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">coll</code><code class="o">.</code><code class="n">insert</code><code class="p">(</code><code class="n">nobel_winners</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[</code><code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d4'</code><code class="p">),</code>
 <code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d5'</code><code class="p">),</code>
 <code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d6'</code><code class="p">)]</code></pre>

<p>The resulting array of <code>ObjectId</code>s can be used for future retrieval, but MongoDB has already left its stamp on our <code>nobel_winners</code> list, adding a hidden <code>id</code> property:<sup><a data-type="noteref" id="idm140319435356240-marker" href="ch03.html#idm140319435356240">8</a></sup></p>

<pre data-type="programlisting" data-code-language="python"><code class="n">nobel_winners</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[{</code><code class="s1">'_id'</code><code class="p">:</code> <code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d4'</code><code class="p">),</code>
  <code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s1">'nationality'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s1">'sex'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">,</code>
  <code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
  <code class="o">...</code>
<code class="p">]</code></pre>
<div data-type="tip"><h6>Tip</h6>
<p><a data-type="indexterm" data-primary="MongoDB" data-secondary="ObjectIds" id="idm140319435262720"></a>MongoDB’s <code>ObjectId</code>s have quite a bit of hidden functionality, being a lot more than a simple random identifier. You can, for example, get the generation time of the <code>ObjectId</code>, which gives you access to a handy timestamp:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code> <code class="nn">bson</code>
<code class="n">oid</code> <code class="o">=</code> <code class="n">bson</code><code class="o">.</code><code class="n">ObjectId</code><code class="p">()</code>
<code class="n">oid</code><code class="o">.</code><code class="n">generation_time</code>
<code class="n">Out</code><code class="p">:</code> <code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="p">(</code><code class="mi">2015</code><code class="p">,</code> <code class="mi">11</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">15</code><code class="p">,</code> <code class="mi">43</code><code class="p">,</code> <code class="mf">23.</code><code class="o">..</code></pre>

<p>Find the full details in the <a href="http://bit.ly/1QbOBKE">MongoDB documentation</a>.</p>
</div>

<p><a data-type="indexterm" data-primary="MongoDB" data-secondary="query expressions" id="idm140319435138128"></a>Now that we’ve got some items in our winners collection, MongoDB makes finding them very easy, with its <code>find</code> method taking a dictionary query:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">res</code> <code class="o">=</code> <code class="n">coll</code><code class="o">.</code><code class="n">find</code><code class="p">({</code><code class="s1">'category'</code><code class="p">:</code><code class="s1">'Chemistry'</code><code class="p">})</code>
<code class="nb">list</code><code class="p">(</code><code class="n">res</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[{</code><code class="s-Affix">u</code><code class="s1">'_id'</code><code class="p">:</code> <code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d6'</code><code class="p">),</code>
  <code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Chemistry'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Marie Curie'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Polish'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'female'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">:</code> <code class="mi">1911</code><code class="p">}]</code></pre>

<p>There are a number of special dollar-prefixed operators that allow for sophisticated querying. Let’s find all the winners after 1930 using the <code>$gt</code> (greater-than) operator:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">res</code> <code class="o">=</code> <code class="n">coll</code><code class="o">.</code><code class="n">find</code><code class="p">({</code><code class="s1">'year'</code><code class="p">:</code> <code class="p">{</code><code class="s1">'$gt'</code><code class="p">:</code> <code class="mi">1930</code><code class="p">}})</code>
<code class="nb">list</code><code class="p">(</code><code class="n">res</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[{</code><code class="s-Affix">u</code><code class="s1">'_id'</code><code class="p">:</code> <code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d5'</code><code class="p">),</code>
  <code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Paul Dirac'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'British'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">:</code> <code class="mi">1933</code><code class="p">}]</code></pre>

<p>You can also use Boolean expression, for instance, to find all winners after 1930 or all female winners:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">res</code> <code class="o">=</code> <code class="n">coll</code><code class="o">.</code><code class="n">find</code><code class="p">({</code><code class="s1">'$or'</code><code class="p">:[{</code><code class="s1">'year'</code><code class="p">:</code> <code class="p">{</code><code class="s1">'$gt'</code><code class="p">:</code> <code class="mi">1930</code><code class="p">}},</code>\
<code class="p">{</code><code class="s1">'sex'</code><code class="p">:</code><code class="s1">'female'</code><code class="p">}]})</code>
<code class="nb">list</code><code class="p">(</code><code class="n">res</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[{</code><code class="s-Affix">u</code><code class="s1">'_id'</code><code class="p">:</code> <code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d5'</code><code class="p">),</code>
  <code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Paul Dirac'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'British'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">:</code> <code class="mi">1933</code><code class="p">},</code>
 <code class="p">{</code><code class="s-Affix">u</code><code class="s1">'_id'</code><code class="p">:</code> <code class="n">ObjectId</code><code class="p">(</code><code class="s1">'55f8326f26a7112e547879d6'</code><code class="p">),</code>
  <code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Chemistry'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Marie Curie'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Polish'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'female'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">:</code> <code class="mi">1911</code><code class="p">}]</code></pre>

<p><a data-type="indexterm" data-primary="MongoDB" data-secondary="documentation" id="idm140319434968480"></a>You can find the full list of available query expressions in the <a href="http://bit.ly/1Yxn5c1">MongoDB documentation</a>.</p>

<p>As a final test, let’s turn our new <em>winners</em> collection back into a Python list of dictionaries. We’ll create a utility function for the task:</p>

<pre data-type="programlisting" data-code-language="python"><code class="k">def</code><code> </code><code class="nf">mongo_coll_to_dicts</code><code class="p">(</code><code class="n">dbname</code><code class="o">=</code><code class="s1">'</code><code class="s1">test</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">collname</code><code class="o">=</code><code class="s1">'</code><code class="s1">test</code><code class="s1">'</code><code class="p">,</code><code>\
</code><code>                        </code><code class="n">query</code><code class="o">=</code><code class="p">{</code><code class="p">}</code><code class="p">,</code><code> </code><code class="n">del_id</code><code class="o">=</code><code class="bp">True</code><code class="p">,</code><code> </code><code class="o">*</code><code class="o">*</code><code class="n">kw</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" id="co_reading_and_writing_data__span_class__keep_together__with_python__span__CO17-1" href="#callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO17-1"><img src="1.png" alt="1" width="12" height="12"></a><code>
</code><code>
</code><code>    </code><code class="n">db</code><code> </code><code class="o">=</code><code> </code><code class="n">get_mongo_database</code><code class="p">(</code><code class="n">dbname</code><code class="p">,</code><code> </code><code class="o">*</code><code class="o">*</code><code class="n">kw</code><code class="p">)</code><code>
</code><code>    </code><code class="n">res</code><code> </code><code class="o">=</code><code> </code><code class="nb">list</code><code class="p">(</code><code class="n">db</code><code class="p">[</code><code class="n">collname</code><code class="p">]</code><code class="o">.</code><code class="n">find</code><code class="p">(</code><code class="n">query</code><code class="p">)</code><code class="p">)</code><code>
</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="n">del_id</code><code class="p">:</code><code>
</code><code>        </code><code class="k">for</code><code> </code><code class="n">r</code><code> </code><code class="ow">in</code><code> </code><code class="n">res</code><code class="p">:</code><code>
</code><code>            </code><code class="n">r</code><code class="o">.</code><code class="n">pop</code><code class="p">(</code><code class="s1">'</code><code class="s1">_id</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">res</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_reading_and_writing_data__span_class__keep_together__with_python__span__CO17-1" href="#co_reading_and_writing_data__span_class__keep_together__with_python__span__CO17-1"><img src="1.png" alt="1" width="12" height="12"></a></dt>
<dd><p>An empty <code>query dict {}</code> will find all documents in the collection. <code>del_id</code> is a flag to remove MongoDB’s <code>ObjectId</code>s from the items by default.</p></dd>
</dl>

<p>We can now create our target dataset:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">mongo_coll_to_dicts</code><code class="p">(</code><code class="n">DB_NOBEL_PRIZE</code><code class="p">,</code> <code class="n">COLL_WINNERS</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[{</code><code class="s-Affix">u</code><code class="s1">'category'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Physics'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'name'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Albert Einstein'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'nationality'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'Swiss'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'sex'</code><code class="p">:</code> <code class="s-Affix">u</code><code class="s1">'male'</code><code class="p">,</code>
  <code class="s-Affix">u</code><code class="s1">'year'</code><code class="p">:</code> <code class="mi">1921</code><code class="p">},</code>
  <code class="o">...</code>
<code class="p">]</code></pre>

<p><a data-type="indexterm" data-primary="MongoDB" data-secondary="benefits of" id="idm140319434685696"></a>MongoDB’s schema-less databases are great for fast prototyping in solo work or small teams. There will probably come a point, particularly with large code bases, when a formal schema becomes a useful reference and sanity check; and when you are choosing a data model, the ease with which document forms can be adapted is a bonus. Being able to pass Python dictionaries as queries to PyMongo and having access to client-side generated <code>ObjectId</code>s are a couple of other conveniences.</p>

<p>We’ve now passed the <code>nobel_winners</code> data in <a data-type="xref" href="#data_dummydata">Example 3-1</a> through all our required file formats and databases. Let’s consider the special case of dealing with dates and times before summing up.<a data-type="indexterm" data-primary="" data-startref="DSmongo3" id="idm140319434610592"></a><a data-type="indexterm" data-primary="" data-startref="DBmongo3" id="idm140319434609648"></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Dealing with Dates, Times, and Complex Data"><div class="sect1" id="sect_datetimes">
<h1>Dealing with Dates, Times, and Complex Data</h1>

<p><a data-type="indexterm" data-primary="data sharing" data-secondary="date/time handling" id="idm140319434607632"></a><a data-type="indexterm" data-primary="dates" id="idm140319434606656"></a><a data-type="indexterm" data-primary="times" id="idm140319434605984"></a>The ability to deal comfortably with dates and times is fundamental to dataviz work but can be quite tricky. There are many ways to represent a date or datetime as a string, each one requiring a separate encoding or decoding. For this reason it’s good to settle on one format in your own work and encourage others to do the same.  I recommend using the <a href="http://bit.ly/1OcC731">International Standard Organization (ISO) 8601 time format</a> as your string representation for dates and times, and using the <a href="http://bit.ly/1rtmDOT">Coordinated Universal Time (UTC) form</a>.<sup><a data-type="noteref" id="idm140319434603504-marker" href="ch03.html#idm140319434603504">9</a></sup> Here’s a few examples of ISO 8601 date and datetime strings:</p>
<table>

<tbody>
<tr>
<td><p>2015-09-23</p></td>
<td><p>A date  (Python/C format code <code>'%Y-%m-%d'</code>)</p></td>
</tr>
<tr>
<td><p>2015-09-23T16:32:35Z</p></td>
<td><p>A UTC (<em>Z</em> after time) date and time (<code>'T%H:%M:%S'</code>)</p></td>
</tr>
<tr>
<td><p>2015-09-23T16:32+02:00</p></td>
<td><p>A positive two-hour (+02:00) offset from UTC (e.g., Central European Time)</p></td>
</tr>
</tbody>
</table>

<p>Note the importance of being prepared to deal with different time zones. These are not always on lines of longitude (see <a href="https://en.wikipedia.org/wiki/Time_zone">Wikipedia’s Time Zone entry</a>), and often the best way to derive an accurate time is by using UTC time plus a geographic location.</p>

<p>ISO 8601 is the standard used by JavaScript and is easy to work with in Python. As web data visualizers, our key concern is in creating a string representation that can be passed between Python and JavaScript using JSON and encoded and decoded easily at both ends.</p>

<p>Let’s take a date and time in the shape of a Python <code>datetime</code>, convert it into a string, and then see how that string can be consumed by JavaScript.</p>

<p>First we produce our Python <code>datetime</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>

<code class="n">d</code> <code class="o">=</code> <code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">()</code>
<code class="n">d</code><code class="o">.</code><code class="n">isoformat</code><code class="p">()</code>
<code class="n">Out</code><code class="p">:</code>
<code class="s1">'2015-09-15T21:48:50.746674'</code></pre>

<p>This string can then be saved to JSON or CSV, read by JavaScript, and used to create a <code>Date</code> object:</p>

<pre data-type="programlisting" data-code-language="js"><code class="nx">d</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="s1">'2015-09-15T21:48:50.746674'</code><code class="p">)</code>
<code class="o">&gt;</code> <code class="nx">Tue</code> <code class="nx">Sep</code> <code class="mi">15</code> <code class="mi">2015</code> <code class="mi">22</code><code class="o">:</code><code class="mi">48</code><code class="o">:</code><code class="mi">50</code> <code class="nx">GMT</code><code class="o">+</code><code class="mi">0100</code> <code class="p">(</code><code class="nx">BST</code><code class="p">)</code></pre>

<p>We can return the datetime to ISO 8601 string form with the <code>toISOString</code> method:</p>

<pre data-type="programlisting" data-code-language="js"><code class="nx">d</code><code class="p">.</code><code class="nx">toISOString</code><code class="p">()</code>
<code class="o">&gt;</code> <code class="s2">"2015-09-15T21:48:50.746Z"</code></pre>

<p>Finally, we can read the string back into Python.</p>

<p>If you know that you’re dealing with an ISO-format time string, Python’s <code>dateutil</code> module should do the job.<sup><a data-type="noteref" id="idm140319434414848-marker" href="ch03.html#idm140319434414848">10</a></sup> But you’ll probably want to sanity-check the result:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">dateutil</code> <code class="kn">import</code> <code class="n">parser</code>

<code class="n">d</code> <code class="o">=</code> <code class="n">parser</code><code class="o">.</code><code class="n">parse</code><code class="p">(</code><code class="s2">"2015-09-15T21:48:50.746Z"</code><code class="p">)</code>
<code class="n">d</code>
<code class="n">Out</code><code class="p">:</code>
<code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="p">(</code><code class="mi">2015</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">15</code><code class="p">,</code> <code class="mi">21</code><code class="p">,</code> <code class="mi">48</code><code class="p">,</code> <code class="mi">50</code><code class="p">,</code> <code class="mi">746000</code><code class="p">,</code> \
<code class="n">tzinfo</code><code class="o">=</code><code class="n">tzutc</code><code class="p">())</code></pre>

<p>Note that we’ve lost some resolution in the trip from Python to JavaScript and back again, the latter dealing in milliseconds, not microseconds. This is unlikely to be an issue in any dataviz work but is good to bear in mind just in case some strange temporal errors occur.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idm140319434608448">
<h1>Summary</h1>

<p>This chapter aimed to make you comfortable using Python to move data around the various file formats and databases that a data visualizer might expect to bump into. Using databases effectively and efficiently is a skill that takes a while to learn, but you should now be comfortable with basic reading and writing for the large majority of dataviz use cases.</p>

<p>Now that we have the vital lubrication for our dataviz toolchain, let’s get up to scratch on the basic web development skills you’ll need for the chapters ahead.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm140319439368000"><sup><a href="ch03.html#idm140319439368000-marker">1</a></sup> I recommend using JSON over CSV as your preferred data format.</p><p data-type="footnote" id="idm140319438301600"><sup><a href="ch03.html#idm140319438301600-marker">2</a></sup> The Python module <code>dateutil</code> has a parser that will parse most dates and times sensibly, and might be a good basis for this.</p><p data-type="footnote" id="idm140319437826608"><sup><a href="ch03.html#idm140319437826608-marker">3</a></sup> On a cautionary note, it is probably a bad idea to use different database configurations for testing and production.</p><p data-type="footnote" id="idm140319437799136"><sup><a href="ch03.html#idm140319437799136-marker">4</a></sup> See details on <a href="http://docs.sqlalchemy.org/en/latest/core/engines.html">SQLAlchemy</a> of this <em>lazy initialization</em>.</p><p data-type="footnote" id="idm140319437670256"><sup><a href="ch03.html#idm140319437670256-marker">5</a></sup> This assumes the database doesn’t already exist. If it does, <code>Base</code> will be used to create new insertions and to interpret retrievals.</p><p data-type="footnote" id="idm140319436308000"><sup><a href="ch03.html#idm140319436308000-marker">6</a></sup> Dataset’s official motto is “databases for lazy people.” It is not part of the standard Anaconda package, so you’ll want to install it using pip from the command line: <code>$ pip install dataset</code>.</p><p data-type="footnote" id="idm140319435929120"><sup><a href="ch03.html#idm140319435929120-marker">7</a></sup> See <a href="https://dataset.readthedocs.org/en/latest/quickstart.html#using-transactions">this documentation</a> for further details of how to use transactions to group updates.</p><p data-type="footnote" id="idm140319435356240"><sup><a href="ch03.html#idm140319435356240-marker">8</a></sup> One of the cool things about MongoDB is that the <code>ObjectId</code>s are generated on the client side, removing the need to quiz the database for them.</p><p data-type="footnote" id="idm140319434603504"><sup><a href="ch03.html#idm140319434603504-marker">9</a></sup> To get the actual local time from UTC, you can store a time zone offset or, better still, derive it from a geocoordinate; this is because time zones do not follow lines of longitude very exactly.</p><p data-type="footnote" id="idm140319434414848"><sup><a href="ch03.html#idm140319434414848-marker">10</a></sup> To install, just run <code>pip install dateutil</code>. <code>dateutil</code> is a pretty powerful extension of Python’s <code>datetime</code>; check it out on <a href="https://dateutil.readthedocs.org/en/latest/">Read the Docs</a>.</p></div></div></section></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch02.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">2. A Language-Learning Bridge Between Python and JavaScript</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/library/view/data-visualization-with/9781491920565/ch04.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">4. Webdev 101</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag">
        
        
          
          

          
            <p>You have 6 days left in your trial, Flankpeter. Subscribe today. <a href="/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          
        
        

      </div>

    
    



        
      </div>
      




  <footer class="pagefoot t-pagefoot">
    <a href="#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class='js-footer-nav'>
      
        <li><a class="t-recommendations-footer" href="/r/">Recommended</a></li>
      
      <li>
      
      <a class="t-queue-footer" href="/playlists/">Playlists</a>
      
      </li>
      
        <li><a class="t-recent-footer" href="/history/">History</a></li>
        <li><a class="t-topics-footer" href="/topics?q=*&limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="/u/">Settings</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">&#169; 2018 <a href="https://www.safaribooksonline.com" target="_blank">Safari</a>.</span>
    <a href="/terms/">Terms of Service</a> /
    <a href="/privacy/">Privacy Policy</a>
  </footer>




    

    <script src="/jsi18n/web/" charset="utf-8"></script>
    <script src="/library/jsi18n/appcache/" charset="utf-8"></script>
  </body>
</html>
